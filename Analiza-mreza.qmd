---
title: "Analiza društvenih mreza u istrazivanju masovne komunikacije"
format:
  html:
    toc: true
    toc-depth: 2
    number-sections: true
    theme: cosmo
    fig-width: 8
    fig-height: 5
    format-links:
      - pdf
      - docx
  pdf:
    documentclass: article
    geometry: margin=2.5cm
    fontsize: 11pt
    fig-width: 6
    fig-height: 4
    keep-tex: false
    babel-lang: croatian
  docx:
    toc: true
    toc-depth: 2
    fig-width: 6
    fig-height: 4
lang: hr
execute:
  echo: false
  warning: false
  message: false
---

```{r}
#| label: setup
#| include: false

library(igraph)
library(ggraph)
library(tidygraph)
library(ggplot2)
library(dplyr)
library(tidyr)
library(knitr)
library(kableExtra)

# Postavke za grafove
theme_set(theme_minimal(base_size = 12))
```

# Relacijska perspektiva

Zamislimo da želimo razumjeti tko je najutjecajnija osoba na hrvatskom Twitteru. Je li to korisnik s najviše pratitelja ili možda osoba čije objave redovito dijele novinari vodećih medijskih kuća? Ova naizgled jednostavna pitanja otkrivaju fundamentalnu promjenu u načinu na koji suvremena društvena znanost pristupa istraživanju masovne komunikacije. Umjesto da analiziramo isključivo individualne karakteristike aktera, poput broja objava ili demografskih obilježja, fokus se premješta na proučavanje odnosa i veza među njima. Upravo taj pomak perspektive čini temelj analize društvenih mreža kao metodološkog pristupa. Ovaj pristup proizlazi iz spoznaje da društveni fenomeni nisu puki agregat individualnih atributa, već svojstva koja nastaju kroz interakciju. U kontekstu masovne komunikacije, to znači da razumijevanje širenja informacija, formiranja javnog mnijenja ili dinamike medijskog utjecaja zahtijeva mapiranje obrazaca povezanosti među akterima. Analiza društvenih mreža pruža teorijski okvir i metodološke alate za takvo istraživanje, omogućujući nam da vizualiziramo, kvantificiramo i interpretiramo strukturu komunikacijskih tokova.

Tradicionalni pristupi u društvenim znanostima počivali su na pretpostavci da se ponašanje pojedinaca može objasniti proučavanjem njihovih atributa. U istraživanjima masovne komunikacije to se očitovalo kroz ankete koje mjere demografske varijable, stavove ili navike konzumacije medija. Takav pristup tretira pojedince kao izolirane jedinice čije karakteristike određuju njihovo ponašanje neovisno o društvenom kontekstu. Međutim, ova perspektiva zanemaruje činjenicu da su ljudi ukorijenjeni u mrežama odnosa koje oblikuju njihove stavove, ponašanja i mogućnosti djelovanja. **Relacijska perspektiva** predstavlja zaokret u znanstvenom mišljenju. Umjesto pitanja tko je netko, postavlja se pitanje s kim je povezan i na koji način. U kontekstu istraživanja medija, novinara ne definiraju samo njegove profesionalne kvalifikacije, već i mreža izvora, kolega i publike s kojima je povezan. Slično tome, viralnost sadržaja na društvenim mrežama ne ovisi isključivo o kvaliteti sadržaja, već o strukturnim pozicijama korisnika koji ga dijele. Upravo ta strukturna ukorijenjenost aktera čini središnji predmet analize društvenih mreža. 

Razliku između atributnog i relacijskog pristupa možemo ilustrirati jednostavnim primjerom iz prakse. Pretpostavimo da želimo identificirati ključne aktere u širenju dezinformacija na određenoj platformi. Atributni pristup fokusirao bi se na karakteristike pojedinih korisnika, poput učestalosti objavljivanja ili duljine članstva na platformi. S druge strane, relacijski pristup mapirao bi obrasce dijeljenja sadržaja među korisnicima, identificirajući čvorišta kroz koja informacije protječu i mostove koji povezuju različite zajednice. Ovaj drugi pristup omogućuje razumijevanje sistemske dinamike širenja informacija, otkrivajući strukturne ranjivosti informacijskog ekosustava.


## Čvorovi i veze

Svaka mreža sastoji se od dva temeljna elementa. Prvi element jesu **čvorovi** koji predstavljaju entitete od interesa u istraživanju. U teoriji grafova koristi se i termin vrhovi, dok u sociološkoj tradiciji govorimo o akterima. U kontekstu istraživanja masovne komunikacije, čvorovi mogu predstavljati novinare, medijske kuće, političare, influencere ili obične korisnike društvenih mreža. Izbor entiteta koje ćemo modelirati kao čvorove ovisi o istraživačkom pitanju i teorijskom okviru studije. Drugi temeljni element mreže jesu **veze** koje povezuju čvorove. U literaturi se koriste i termini bridovi ili relacije. Veze predstavljaju odnose među akterima i mogu poprimiti različite oblike ovisno o fenomenu koji proučavamo. Primjerice, veza može predstavljati dijeljenje objave na društvenoj mreži, citiranje izvora u novinarskom članku, hiperlinkove između web stranica ili vlasničke strukture među medijskim kućama. Priroda veze određuje interpretaciju mrežne strukture, stoga je precizna definicija relacije od presudne važnosti za valjanost istraživanja.

```{r}
#| label: fig-basic-network
#| fig-cap: "Osnovni elementi mreže: čvorovi (prikazani krugovima) i veze (prikazane linijama) čine temeljnu strukturu svake mrežne analize."
#| fig-width: 7
#| fig-height: 5

set.seed(42)
basic_net <- graph_from_literal(
  Novinar_A -- Novinar_B,
  Novinar_A -- Portal_X,
  Novinar_B -- Portal_X,
  Novinar_B -- Portal_Y,
  Portal_X -- Influencer,
  Portal_Y -- Influencer,
  Portal_Y -- Političar,
  Influencer -- Političar
)

V(basic_net)$type <- c("Novinar", "Novinar", "Portal", "Portal", "Influencer", "Političar")
V(basic_net)$color <- case_when(
  V(basic_net)$type == "Novinar" ~ "#3498db",
  V(basic_net)$type == "Portal" ~ "#e74c3c",
  V(basic_net)$type == "Influencer" ~ "#2ecc71",
  V(basic_net)$type == "Političar" ~ "#9b59b6"
)

basic_tidy <- as_tbl_graph(basic_net)

ggraph(basic_tidy, layout = "fr") +
  geom_edge_link(color = "gray60", width = 1.2) +
  geom_node_point(aes(color = type), size = 12) +
  geom_node_text(aes(label = name), size = 3, color = "white", fontface = "bold") +
  scale_color_manual(
    values = c("Novinar" = "#3498db", "Portal" = "#e74c3c", 
               "Influencer" = "#2ecc71", "Političar" = "#9b59b6"),
    name = "Tip aktera"
  ) +
  theme_void() +
  theme(legend.position = "bottom")
```

Formalno, mrežu možemo definirati kao uređeni par G = (V, E), gdje V predstavlja skup čvorova, a E skup veza među njima. Svaka veza e iz skupa E definirana je kao par čvorova (v₁, v₂) koje povezuje. Ova matematička formalizacija omogućuje precizno opisivanje strukture mreže i primjenu algoritama za njezinu analizu. Nadalje, čvorovi i veze mogu imati pridružene atribute koji obogaćuju analizu. Primjerice, čvorovima mogu biti pridruženi podaci o geografskoj lokaciji ili broju pratitelja, dok veze mogu nositi informaciju o vremenu nastanka ili učestalosti interakcije. U istraživanjima masovne komunikacije, akter može biti bilo koji entitet koji sudjeluje u komunikacijskom procesu. Medijska kuća poput HRT-a, portal Index.hr, novinar s imenom i prezimenom, ali i anonimni korisnik Twittera koji dijeli vijesti, svi oni mogu biti modelirani kao čvorovi u komunikacijskoj mreži. Ključno je razumjeti da mreža nije objektivna stvarnost, već analitička konstrukcija koju istraživač gradi prema svojim teorijskim pretpostavkama i istraživačkim ciljevima.


## Povijesni razvoj

Korijeni analize društvenih mreža sežu u tridesete godine dvadesetog stoljeća i rad rumunjsko-američkog psihijatra **Jacoba Levy Morena**. Moreno je razvio **sociometriju** kao metodu za proučavanje interpersonalnih odnosa unutar grupa. Njegova ključna inovacija bila je **sociogram**, grafički prikaz društvenih odnosa u kojem su pojedinci predstavljeni točkama, a njihovi odnosi linijama koje ih povezuju. U svojoj knjizi objavljenoj 1934. godine, Moreno je primijenio sociometrijske metode za analizu društvene strukture u institucijama poput škola i zatvora. Time je postavio temelje za sustavno empirijsko proučavanje mrežnih obrazaca. Morenov pristup donio je revolucionarnu spoznaju da prije bilo kakvog društvenog programa istraživač mora uzeti u obzir stvarnu konstituciju grupe. Sociometrija je omogućila otkrivanje skrivenih struktura koje oblikuju grupu, uključujući saveze, podgrupe, neizrečena uvjerenja i zabranjene agende. Moreno je identificirao konfiguraciju koju je nazvao sociometrijskom zvijezdom, odnosno pojedinca kojeg mnogi drugi biraju kao prijatelja. Ti rani uvidi anticipirali su suvremene koncepte poput čvorišta i utjecajnih korisnika u digitalnim mrežama.

Sljedeći prijelomni trenutak u razvoju mrežnog pristupa predstavlja eksperiment **Stanleyja Milgrama** iz 1967. godine, poznat kao eksperiment malog svijeta. Milgram je postavio jednostavno pitanje koliko posrednika treba da poveže dva nasumično odabrana čovjeka u Sjedinjenim Američkim Državama? Koristeći metodu lančanih pisama, Milgram je otkrio da je prosječna udaljenost između ispitanika iz Nebraske i ciljne osobe u Bostonu iznosila samo pet do šest koraka. Ovaj nalaz populariziran je pod nazivom **šest stupnjeva odvojenosti**, iako sam Milgram taj termin nikada nije upotrijebio. Milgramov eksperiment imao je duboke implikacije za razumijevanje društvene strukture. Otkrio je da bez obzira na ogromnu veličinu populacije, ljudsko društvo karakteriziraju iznenađujuće kratki lanci poznanstava. Nadalje, eksperiment je pokazao da se polovica svih pisama koja su stigla do cilja prošla kroz samo tri osobe, sugerirajući postojanje ključnih posrednika u društvenoj mreži. Ovi posrednici, koje suvremena mrežna znanost naziva mostovima ili povezivačima, igraju neproporcionalnu ulogu u širenju informacija kroz društvo.

Suvremena era mrežne znanosti započinje krajem devedesetih godina dvadesetog stoljeća radom **Alberta-Lászla Barabásija** i njegove suradnice Réke Albert. Analizirajući topologiju dijela World Wide Weba, Barabási je otkrio da distribucija povezanosti stranica ne slijedi normalnu raspodjelu koja bi se očekivala u nasumičnim mrežama. Umjesto toga, distribucija je slijedila zakon potencije, što znači da mali broj stranica ima ogroman broj dolaznih veza dok velika većina stranica ima vrlo malo veza. Ovu strukturu Barabási je nazvao **mrežom bez skale**, a objasnio ju je mehanizmom **preferencijskog prikapčanja**. Prema ovom mehanizmu, novi čvorovi koji ulaze u mrežu imaju veću vjerojatnost povezivanja s već dobro povezanim čvorovima. Intuitivno, ovo možemo razumjeti kao fenomen bogatiji postaju bogatiji. Nova web stranica vjerojatnije će postaviti hiperveze prema Googleu nego prema nepoznatom blogu, baš kao što novi korisnik Twittera vjerojatnije slijedi poznatu javnu osobu nego anonimnog korisnika.

```{r}
#| label: fig-scale-free
#| fig-cap: "Usporedba nasumične mreže (lijevo) i mreže bez skale (desno). U mreži bez skale jasno su vidljiva čvorišta s velikim brojem veza, dok nasumična mreža pokazuje ujednačeniju distribuciju povezanosti."
#| fig-width: 10
#| fig-height: 5

set.seed(123)
random_net <- erdos.renyi.game(30, 0.15, type = "gnp")
scale_free_net <- barabasi.game(30, m = 2, directed = FALSE)

par(mfrow = c(1, 2), mar = c(1, 1, 3, 1))

V(random_net)$size <- degree(random_net) * 2 + 5
V(random_net)$color <- "#3498db"
plot(random_net, 
     vertex.label = NA,
     edge.color = "gray70",
     main = "Nasumična mreža (Erdős-Rényi)",
     vertex.frame.color = NA)

V(scale_free_net)$size <- degree(scale_free_net) * 1.5 + 5
V(scale_free_net)$color <- "#e74c3c"
plot(scale_free_net, 
     vertex.label = NA,
     edge.color = "gray70",
     main = "Mreža bez skale (Barabási-Albert)",
     vertex.frame.color = NA)
```

Barabásijevo otkriće imalo je dalekosežne implikacije za razumijevanje komunikacijskih sustava. Mreže bez skale karakterizira postojanje **čvorišta** ili hubova, odnosno čvorova s disproporcionalno velikim brojem veza. U kontekstu masovne komunikacije, čvorišta mogu biti mainstream mediji čije sadržaje preuzimaju deseci manjih portala, ili influenceri čije objave dijele tisuće pratitelja. Razumijevanje uloge čvorišta ključno je za analizu procesa poput širenja vijesti, formiranja javnog mnijenja ili dinamike dezinformacijskih kampanja.


# Osnovni elementi i vrste mreža

Razumijevanje različitih tipova mrežnih struktura preduvjet je za odabir odgovarajućih analitičkih metoda i ispravnu interpretaciju rezultata. Mreže se mogu klasificirati prema nekoliko ključnih dimenzija koje odražavaju prirodu odnosa koji se proučavaju. U ovom poglavlju razmatramo tri temeljne karakteristike mrežnih podataka: usmjerenost veza, njihovu težinu te načine formalnog prikaza mrežne strukture.


## Usmjerenost veza

Jedna od temeljnih distinkcija u mrežnoj analizi jest razlika između **usmjerenih** i **neusmjerenih mreža**. U neusmjerenoj mreži veze nemaju smjer, što znači da ako postoji veza između čvora A i čvora B, ona je simetrična. Primjer neusmjerene mreže bio bi sustav komunikacije u kojem mjerimo jesu li dvije osobe međusobni prijatelji na Facebooku. U tom slučaju, prijateljstvo je po definiciji obostrano jer obje strane moraju prihvatiti zahtjev za prijateljstvom. S druge strane, **usmjerene mreže** karakterizira asimetričnost odnosa. Veza ima definiran smjer koji ide od izvornog čvora prema ciljnom čvoru. Klasičan primjer usmjerene mreže jest praćenje na Twitteru ili Instagramu, gdje korisnik A može pratiti korisnika B bez da korisnik B uzvraća praćenje. U kontekstu istraživanja medija, usmjerene mreže često modeliraju tokove informacija. Primjerice, mreža citiranja članaka usmjerena je jer članak A može citirati članak B, a da pritom članak B ne citira članak A.

```{r}
#| label: fig-directed-undirected
#| fig-cap: "Usporedba neusmjerene mreže (lijevo) gdje su veze simetrične i usmjerene mreže (desno) gdje strelice pokazuju smjer odnosa. U kontekstu društvenih mreža, neusmjerena mreža mogla bi predstavljati Facebook prijateljstva, dok usmjerena predstavlja Twitter praćenje."
#| fig-width: 10
#| fig-height: 5

set.seed(42)

edges_undir <- data.frame(
  from = c("A", "A", "B", "B", "C", "D"),
  to = c("B", "C", "C", "D", "D", "E")
)
undirected_net <- graph_from_data_frame(edges_undir, directed = FALSE)

edges_dir <- data.frame(
  from = c("A", "A", "B", "C", "C", "D", "E"),
  to = c("B", "C", "C", "D", "A", "E", "C")
)
directed_net <- graph_from_data_frame(edges_dir, directed = TRUE)

par(mfrow = c(1, 2), mar = c(1, 1, 3, 1))

plot(undirected_net,
     vertex.size = 30,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray50",
     edge.width = 2,
     main = "Neusmjerena mreža\n(Facebook prijateljstva)")

plot(directed_net,
     vertex.size = 30,
     vertex.color = "#e74c3c",
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray50",
     edge.width = 2,
     edge.arrow.size = 0.6,
     main = "Usmjerena mreža\n(Twitter praćenje)")
```

Razlikovanje usmjerenih i neusmjerenih mreža ima značajne analitičke implikacije. U usmjerenim mrežama razlikujemo **ulazni stupanj** koji mjeri broj veza koje dolaze u čvor, te **izlazni stupanj** koji mjeri broj veza koje izlaze iz čvora. U kontekstu Twittera, ulazni stupanj odgovara broju pratitelja, dok izlazni stupanj odgovara broju računa koje korisnik prati. Ova distinkcija omogućuje identificiranje različitih tipova aktera. Korisnik s visokim ulaznim stupnjem i niskim izlaznim stupnjem mogao bi biti influencer kojeg mnogi prate, ali on prati malo drugih. Obratno, korisnik s visokim izlaznim stupnjem i niskim ulaznim stupnjem mogao bi biti netko tko aktivno prati novosti, ali sam nije popularan. U istraživanjima masovne komunikacije, izbor između usmjerene i neusmjerene mreže ovisi o prirodi fenomena koji se proučava. Ako nas zanima tko utječe na koga, usmjerena mreža će pružiti bogatije informacije. Međutim, ako proučavamo suradnju ili zajedničku pripadnost grupama, neusmjerena mreža može biti primjereniji izbor. Primjerice, mreža koautorstva znanstvenih radova tipično se modelira kao neusmjerena jer koautorstvo podrazumijeva obostrani odnos.


## Težina veze

Druga važna dimenzija mrežne strukture jest razlika između **binarnih** i **ponderiranih mreža**. U binarnoj mreži veza između dva čvora može samo postojati ili ne postojati. Formalno, težina svake veze iznosi ili jedan ili nula. Ovakav prikaz pojednostavljuje strukturu mreže, ali gubi informaciju o intenzitetu odnosa. Primjerice, binarna mreža dijeljenja sadržaja bilježi samo činjenicu da je korisnik A podijelio objavu korisnika B, ne uzimajući u obzir koliko je puta to učinio. Nasuprot tome, **ponderirane mreže** svakoj vezi pridružuju numeričku vrijednost koja odražava snagu ili intenzitet odnosa. Ova težina može predstavljati učestalost interakcije, trajanje veze, količinu razmijenjenih resursa ili neku drugu mjeru jačine odnosa. U istraživanjima komunikacije, težina veze mogla bi predstavljati broj zajedničkih članaka koje su dva novinara napisala, učestalost međusobnih retvitova ili količinu prometa između dvije web stranice.

```{r}
#| label: fig-weighted
#| fig-cap: "Usporedba binarne mreže (lijevo) gdje sve veze imaju jednaku težinu i ponderirane mreže (desno) gdje debljina linije označava intenzitet odnosa. U ponderiranoj mreži možemo vidjeti da neke veze predstavljaju snažnije odnose od drugih."
#| fig-width: 10
#| fig-height: 5

set.seed(42)

edges_binary <- data.frame(
  from = c("Portal_A", "Portal_A", "Portal_B", "Portal_B", "Portal_C", "Portal_D"),
  to = c("Portal_B", "Portal_C", "Portal_C", "Portal_D", "Portal_D", "Portal_E")
)
binary_net <- graph_from_data_frame(edges_binary, directed = FALSE)

edges_weighted <- data.frame(
  from = c("Portal_A", "Portal_A", "Portal_B", "Portal_B", "Portal_C", "Portal_D"),
  to = c("Portal_B", "Portal_C", "Portal_C", "Portal_D", "Portal_D", "Portal_E"),
  weight = c(15, 3, 25, 8, 12, 5)
)
weighted_net <- graph_from_data_frame(edges_weighted, directed = FALSE)

par(mfrow = c(1, 2), mar = c(1, 1, 3, 1))

plot(binary_net,
     vertex.size = 25,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = c("A", "B", "C", "D", "E"),
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray50",
     edge.width = 2,
     main = "Binarna mreža\n(veze bez težine)")

plot(weighted_net,
     vertex.size = 25,
     vertex.color = "#2ecc71",
     vertex.frame.color = NA,
     vertex.label = c("A", "B", "C", "D", "E"),
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = E(weighted_net)$weight / 5,
     main = "Ponderirana mreža\n(debljina = intenzitet)")
```

Prednost ponderiranih mreža leži u njihovoj informativnosti. Veza između dva čvora koja se ostvaruje jednom tjedno kvalitativno je različita od veze koja se ostvaruje svakodnevno, premda obje postoje u binarnom smislu. Ponderirana mreža hvata tu razliku i omogućuje sofisticiranije analize. S druge strane, prikupljanje podataka o težini veza može biti zahtjevnije, a određene analitičke metode razvijene su primarno za binarne mreže. Istraživač mora pažljivo odvagnuti prednosti i nedostatke svakog pristupa s obzirom na istraživačka pitanja i dostupne podatke. U praksi se ponekad ponderirane mreže pretvaraju u binarne primjenom praga. Definiramo vrijednost ispod koje smatramo da veza ne postoji. Primjerice, možemo odlučiti da veza među korisnicima postoji samo ako su razmijenili najmanje pet poruka. Ovaj postupak **binarizacije** pojednostavljuje analizu, ali izbor praga utječe na rezultate i mora biti teorijski opravdan.


## Matrični prikaz mreže

Za analitičke svrhe, mrežne strukture mogu se prikazati u različitim formatima podataka. Najčešći i najsvestraniji format jest **matrica susjedstva** (*adjacency matrix*). Ova kvadratna matrica dimenzija n × n, gdje n predstavlja broj čvorova u mreži, bilježi postojanje i eventualnu težinu veza među svim parovima čvorova. U matrici susjedstva retci i stupci označeni su imenima ili identifikatorima čvorova. Vrijednost u ćeliji na presjeku retka i i stupca j označava vezu od čvora i prema čvoru j. U binarnoj mreži, vrijednost jedan označava postojanje veze, dok vrijednost nula označava njezinu odsutnost. U ponderiranoj mreži, vrijednost u ćeliji odgovara težini veze. Dijagonala matrice predstavlja potencijalne samopoveznice, odnosno veze čvora sa samim sobom, koje se u mnogim primjenama postavljaju na nulu.

```{r}
#| label: tbl-adjacency
#| tbl-cap: "Primjer matrice susjedstva za hipotetsku mrežu citiranja među četiri medijske kuće. Vrijednosti označavaju broj citiranja tijekom jednomjesečnog razdoblja."

adj_matrix <- data.frame(
  Medij = c("HRT", "N1", "Index", "Jutarnji"),
  HRT = c(0, 2, 0, 1),
  N1 = c(3, 0, 2, 0),
  Index = c(1, 4, 0, 3),
  Jutarnji = c(2, 1, 5, 0)
)

kable(adj_matrix, align = c("l", rep("c", 4))) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE)
```

Iz gornje tablice možemo iščitati obrasce citiranja među medijima. Primjerice, vrijednost 3 u ćeliji HRT-N1 označava da je HRT citirao N1 tri puta. Uočavamo da matrica nije simetrična jer je riječ o usmjerenoj mreži. Index je citirao Jutarnji pet puta, dok je Jutarnji citirao Index tri puta. Ova asimetrija pruža uvid u tokove informacija i potencijalnu hijerarhiju izvora među medijima.

Za neusmjerene mreže, matrica susjedstva je simetrična, što znači da je vrijednost u ćeliji (i, j) jednaka vrijednosti u ćeliji (j, i). Ova simetrija proizlazi iz činjenice da u neusmjerenoj mreži veza između A i B podrazumijeva i vezu između B i A. Nasuprot tome, u usmjerenim mrežama poput one prikazane u tablici, matrica općenito nije simetrična jer veza od A prema B ne implicira vezu od B prema A.

Osim matrice susjedstva, mrežni podaci mogu se prikazati i u obliku **liste bridova**. Ovaj format jednostavno nabraja sve postojeće veze u mreži, navodeći za svaku vezu izvorni i ciljni čvor te eventualnu težinu. Lista bridova prostorno je učinkovitija od matrice susjedstva za rijetke mreže u kojima većina potencijalnih veza ne postoji. Primjerice, u velikoj mreži s milijun čvorova, matrica susjedstva imala bi bilijun ćelija od kojih bi većina sadržavala nule. Lista bridova bilježila bi samo postojeće veze, značajno smanjujući memorijske zahtjeve.

```{r}
#| label: tbl-formats
#| tbl-cap: "Usporedba formata mrežnih podataka s njihovim prednostima i nedostacima."

formats_df <- data.frame(
  Format = c("Matrica susjedstva", "Lista bridova", "Lista susjedstva"),
  Struktura = c("Kvadratna matrica n × n", "Parovi čvorova s težinama", "Za svaki čvor popis susjeda"),
  Prednosti = c("Omogućuje matrične operacije, intuitivna", "Memorijski učinkovita, jednostavna", "Brz pristup susjedima"),
  Nedostaci = c("Neučinkovita za rijetke mreže", "Manje pogodna za neke algoritme", "Složenija struktura podataka")
)

kable(formats_df) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Razumijevanje ovih temeljnih koncepata i formata podataka preduvjet je za daljnje proučavanje mrežnih metrika i analitičkih postupaka. U sljedećim poglavljima razmatramo mjere centralnosti koje omogućuju identificiranje ključnih aktera u mreži, strukturne karakteristike poput gustoće i klasteriranja koje opisuju mrežu na agregatnoj razini, te metode za detekciju zajednica i analizu difuzijskih procesa.


# Mjere centralnosti

Zamislimo istraživača koji proučava mrežu dijeljenja političkih vijesti na hrvatskom Twitteru tijekom izborne kampanje. Pred sobom ima mrežu s tisućama korisnika i desecima tisuća veza koje predstavljaju retvitove. Središnje pitanje koje si postavlja jest: tko su najvažniji akteri u ovoj mreži? Intuitivno, važnost se čini jednostavnim konceptom, no dubljom analizom postaje jasno da postoje različiti načini na koje čvor može biti važan. Korisnik s najviše pratitelja važan je po jednom kriteriju, korisnik čije objave povezuju ideološki različite skupine važan je po drugom, a korisnik čije objave najbrže dosežu cijelu mrežu važan je po trećem. Mjere centralnosti formaliziraju ove različite intuicije o važnosti, pružajući kvantitativne alate za identificiranje ključnih aktera u mrežnim strukturama.

**Centralnost** u analizi mreža odnosi se na skup metrika koje kvantificiraju relativnu važnost ili istaknutost čvorova unutar mrežne strukture. Različite mjere centralnosti operacionaliziraju različite koncepte važnosti, a izbor odgovarajuće mjere ovisi o teorijskom pitanju koje istraživač postavlja i o karakteristikama fenomena koji proučava. U kontekstu istraživanja masovne komunikacije, mjere centralnosti omogućuju identificiranje utjecajnih medija, ključnih novinara, gatekeepera informacija i mostova između različitih zajednica. Svaka mjera centralnosti odgovara na specifično pitanje o ulozi čvora u mreži, stoga je razumijevanje logike različitih mjera preduvjet za njihovu ispravnu primjenu i interpretaciju.

```{r}
#| label: create-example-network
#| include: false

set.seed(42)
media_edges <- data.frame(
  from = c("HRT", "HRT", "HRT", "N1", "N1", "N1", "N1", "Index", "Index", 
           "Index", "Jutarnji", "Jutarnji", "Večernji", "Večernji", 
           "Portal_A", "Portal_A", "Portal_B", "Blog_X", "Blog_Y", "Blog_Y"),
  to = c("N1", "Index", "Jutarnji", "Index", "Večernji", "Portal_A", "Blog_X",
         "Jutarnji", "Večernji", "Portal_B", "Večernji", "Portal_A", 
         "Portal_A", "Portal_B", "Portal_B", "Blog_X", "Blog_Y", "Blog_Y", "HRT", "N1")
)

media_net <- graph_from_data_frame(media_edges, directed = FALSE)
V(media_net)$type <- case_when(
  V(media_net)$name %in% c("HRT", "N1") ~ "Javni medij",
  V(media_net)$name %in% c("Index", "Jutarnji", "Večernji") ~ "Komercijalni portal",
  V(media_net)$name %in% c("Portal_A", "Portal_B") ~ "Manji portal",
  TRUE ~ "Blog"
)
```


## Stupanj centralnosti

Najjednostavnija i najintuitivnija mjera centralnosti jest **stupanj centralnosti** (engl. *degree centrality*) koja mjeri broj izravnih veza koje čvor ima s drugim čvorovima u mreži. Logika ove mjere proizlazi iz pretpostavke da čvorovi s više veza imaju više mogućnosti za interakciju, utjecaj i pristup resursima koji cirkuliraju mrežom. U kontekstu društvenih mreža, osoba s više prijatelja ili poznanika ima veći socijalni kapital, više izvora informacija i potencijalno veći utjecaj na svoje okruženje.

Formalno, stupanj centralnosti čvora $i$ u neusmjerenoj mreži definira se jednostavno kao broj bridova incidentnih na taj čvor:

$$C_D(i) = k_i = \sum_{j} a_{ij}$$

U ovoj formuli $k_i$ označava stupanj čvora $i$, a $a_{ij}$ je element matrice susjedstva koji poprima vrijednost 1 ako postoji veza između čvorova $i$ i $j$, odnosno 0 ako veza ne postoji. Za usporedbu mreža različitih veličina koristi se normalizirani stupanj centralnosti koji se dobiva dijeljenjem stupnja s maksimalnim mogućim brojem veza:

$$C_D^{norm}(i) = \frac{k_i}{n-1}$$

gdje je $n$ ukupan broj čvorova u mreži. Normalizirani stupanj poprima vrijednosti između 0 i 1, što omogućuje usporedbu centralnosti čvorova u mrežama različitih veličina.

U **usmjerenim mrežama** razlikujemo dva tipa stupnja centralnosti. **Ulazni stupanj** (engl. *in-degree*) broji veze koje dolaze u čvor, dok **izlazni stupanj** (engl. *out-degree*) broji veze koje izlaze iz čvora. Ova distinkcija ima značajne implikacije za interpretaciju. U mreži citiranja akademskih radova, visok ulazni stupanj označava rad koji mnogi citiraju, što sugerira njegov utjecaj na polje. Visok izlazni stupanj označava rad s mnogim referencama, što može indicirati pregledni članak ili sintezu literature. U kontekstu Twittera, ulazni stupanj odgovara broju pratitelja, a izlazni stupanj broju praćenih računa.

```{r}
#| label: fig-degree-centrality
#| fig-cap: "Vizualizacija stupnja centralnosti u hipotetskoj mreži hrvatskih medija. Veličina čvora proporcionalna je stupnju centralnosti, a boja označava tip medija. Čvorovi s višim stupnjem centralnosti (poput N1 i Indexa) nalaze se u središtu mreže s najviše izravnih veza."
#| fig-width: 9
#| fig-height: 7

V(media_net)$degree <- degree(media_net)

degree_colors <- c("Javni medij" = "#3498db", "Komercijalni portal" = "#e74c3c", 
                   "Manji portal" = "#2ecc71", "Blog" = "#9b59b6")

set.seed(42)
plot(media_net,
     vertex.size = V(media_net)$degree * 4 + 10,
     vertex.color = degree_colors[V(media_net)$type],
     vertex.frame.color = NA,
     vertex.label.color = "black",
     vertex.label.cex = 0.9,
     vertex.label.dist = 0,
     edge.color = "gray70",
     edge.width = 1.5,
     main = "Stupanj centralnosti u mreži hrvatskih medija")

legend("bottomleft", 
       legend = names(degree_colors),
       fill = degree_colors,
       title = "Tip medija",
       bty = "n")
```

```{r}
#| label: tbl-degree
#| tbl-cap: "Stupanj centralnosti za svaki čvor u mreži hrvatskih medija. Viši stupanj označava veći broj izravnih veza s drugim medijima u mreži."

degree_df <- data.frame(
  Medij = V(media_net)$name,
  Tip = V(media_net)$type,
  Stupanj = degree(media_net),
  Normalizirani_stupanj = round(degree(media_net) / (vcount(media_net) - 1), 3)
)

degree_df <- degree_df[order(-degree_df$Stupanj), ]

kable(degree_df, 
      col.names = c("Medij", "Tip", "Stupanj", "Normalizirani stupanj"),
      row.names = FALSE) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE)
```

U kontekstu istraživanja masovne komunikacije, stupanj centralnosti može se interpretirati kao mjera **vidljivosti** ili **popularnosti**. Medij s visokim stupnjem centralnosti u mreži citiranja jest medij kojeg mnogi drugi mediji citiraju kao izvor, što sugerira njegov status autoritativnog izvora informacija. Na društvenim mrežama, korisnik s visokim stupnjem centralnosti jest korisnik s mnogo pratitelja ili prijatelja, što mu daje potencijalnu publiku za širenje poruka. Međutim, važno je napomenuti da stupanj centralnosti mjeri samo lokalne veze i ne uzima u obzir globalnu strukturu mreže. Čvor može imati visok stupanj, ali biti povezan samo s marginaliziranim dijelom mreže, što ograničava njegov stvarni utjecaj.


## Međuposredovanje

Dok stupanj centralnosti mjeri izravne veze čvora, **međuposredovanje** (engl. *betweenness centrality*) hvata različit aspekt važnosti koji se odnosi na poziciju čvora na putanjama koje povezuju druge čvorove u mreži. Intuitivno, čvor ima visoko međuposredovanje ako se nalazi na mnogim najkraćim putanjama između drugih parova čvorova. Takav čvor djeluje kao most ili posrednik kroz kojeg moraju prolaziti informacije, resursi ili utjecaji koji se kreću mrežom. U kontekstu komunikacije, čvorovi s visokim međuposredovanjem mogu se konceptualizirati kao **gatekeeperi** koji kontroliraju tokove informacija.

Formalno, međuposredovanje čvora $i$ definira se kao:

$$C_B(i) = \sum_{s \neq i \neq t} \frac{\sigma_{st}(i)}{\sigma_{st}}$$

U ovoj formuli $\sigma_{st}$ označava ukupan broj najkraćih putanja između čvorova $s$ i $t$, dok $\sigma_{st}(i)$ označava broj tih putanja koje prolaze kroz čvor $i$. Mjera sumira preko svih parova čvorova u mreži, kvantificirajući koliko često čvor $i$ leži na najkraćim putanjama. Normalizirana verzija dijeli se s maksimalnim mogućim brojem parova, omogućujući usporedbu među mrežama različitih veličina.

Konceptualna snaga međuposredovanja leži u njegovoj sposobnosti identificiranja čvorova koji povezuju inače odvojene dijelove mreže. U sociološkoj literaturi, takvi čvorovi opisuju se kao zauzimatelji **strukturnih rupa**, pojam koji je uveo Ronald Burt. Strukturna rupa jest praznina u mreži gdje određeni čvor premošćuje dva klastera koji inače ne bi bili povezani. Akter koji premošćuje strukturnu ruku ima pristup raznolikim izvorima informacija i može djelovati kao posrednik između različitih skupina, što mu daje značajnu moć i pristup neredundantnim informacijama.

```{r}
#| label: fig-betweenness
#| fig-cap: "Vizualizacija međuposredovanja u mreži hrvatskih medija. Veličina čvora proporcionalna je međuposredovanju. Čvorovi s visokim međuposredovanjem (poput Portala_A) djeluju kao mostovi između različitih dijelova mreže i kontroliraju protok informacija."
#| fig-width: 9
#| fig-height: 7

V(media_net)$betweenness <- betweenness(media_net, normalized = TRUE)

set.seed(42)
plot(media_net,
     vertex.size = V(media_net)$betweenness * 80 + 10,
     vertex.color = degree_colors[V(media_net)$type],
     vertex.frame.color = NA,
     vertex.label.color = "black",
     vertex.label.cex = 0.9,
     edge.color = "gray70",
     edge.width = 1.5,
     main = "Međuposredovanje (Betweenness) u mreži hrvatskih medija")

legend("bottomleft", 
       legend = names(degree_colors),
       fill = degree_colors,
       title = "Tip medija",
       bty = "n")
```

```{r}
#| label: tbl-betweenness
#| tbl-cap: "Međuposredovanje (betweenness centrality) za svaki čvor u mreži. Viša vrijednost označava čvor koji se nalazi na više najkraćih putanja između drugih čvorova, djelujući kao most u mreži."

betweenness_df <- data.frame(
  Medij = V(media_net)$name,
  Tip = V(media_net)$type,
  Meduposredovanje = round(betweenness(media_net), 2),
  Normalizirano = round(betweenness(media_net, normalized = TRUE), 3)
)

betweenness_df <- betweenness_df[order(-betweenness_df$Meduposredovanje), ]

kable(betweenness_df, 
      col.names = c("Medij", "Tip", "Međuposredovanje", "Normalizirano"),
      row.names = FALSE) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE)
```

U istraživanjima masovne komunikacije, međuposredovanje je posebno relevantno za identificiranje gatekeepera, odnosno aktera koji kontroliraju pristup informacijama između različitih skupina. Novinar koji povezuje političke elite s javnošću, agregator vijesti koji povezuje mainstream medije s alternativnim portalima, ili influencer koji premošćuje ideološki različite online zajednice, svi oni imaju potencijalno visoko međuposredovanje. Ovi akteri mogu imati disproporcionalan utjecaj na to koje informacije cirkuliraju mrežom i kako se oblikuje javni diskurs.

Praktična ilustracija dolazi iz istraživanja širenja dezinformacija. Čak i ako dezinformacijski portal ima relativno malo pratitelja (nizak stupanj), može imati visoko međuposredovanje ako ga retweetaju korisnici koji povezuju mainstream i alternativne medijske prostore. Identificiranje takvih mostova može biti ključno za razumijevanje mehanizama širenja dezinformacija i potencijalne intervencije.


## Bliskost

Treća klasična mjera centralnosti jest **bliskost** (engl. *closeness centrality*) koja mjeri koliko je čvor blizu svim ostalim čvorovima u mreži u terminima prosječne udaljenosti. Intuitivno, čvor s visokom bliskošću može brzo doći do svakog drugog čvora u mreži, odnosno informacija koja kreće od tog čvora prosječno treba manje koraka da dosegne bilo koji drugi čvor. U kontekstu komunikacije, visoka bliskost može se interpretirati kao **komunikacijska učinkovitost** jer omogućuje brzo širenje poruka kroz mrežu.

Formalno, bliskost čvora $i$ definira se kao recipročna vrijednost prosječne udaljenosti od tog čvora do svih ostalih čvorova:

$$C_C(i) = \frac{n-1}{\sum_{j \neq i} d(i,j)}$$

U ovoj formuli $d(i,j)$ označava duljinu najkraće putanje između čvorova $i$ i $j$, a $n$ je ukupan broj čvorova. Brojnik $n-1$ služi normalizaciji tako da maksimalna moguća vrijednost iznosi 1 kada je čvor izravno povezan sa svim ostalim čvorovima. Viša vrijednost bliskosti označava čvor koji je prosječno bliži svim ostalim čvorovima.

```{r}
#| label: fig-closeness
#| fig-cap: "Vizualizacija bliskosti (closeness centrality) u mreži hrvatskih medija. Veličina čvora proporcionalna je bliskosti. Čvorovi s visokom bliskošću mogu najučinkovitije širiti informacije jer su prosječno najbliži svim ostalim čvorovima u mreži."
#| fig-width: 9
#| fig-height: 7

V(media_net)$closeness <- closeness(media_net, normalized = TRUE)

set.seed(42)
plot(media_net,
     vertex.size = V(media_net)$closeness * 50 + 5,
     vertex.color = degree_colors[V(media_net)$type],
     vertex.frame.color = NA,
     vertex.label.color = "black",
     vertex.label.cex = 0.9,
     edge.color = "gray70",
     edge.width = 1.5,
     main = "Bliskost (Closeness) u mreži hrvatskih medija")

legend("bottomleft", 
       legend = names(degree_colors),
       fill = degree_colors,
       title = "Tip medija",
       bty = "n")
```

```{r}
#| label: tbl-closeness
#| tbl-cap: "Bliskost (closeness centrality) za svaki čvor u mreži. Viša vrijednost označava čvor koji je prosječno bliži svim ostalim čvorovima i može najučinkovitije širiti informacije kroz mrežu."

closeness_df <- data.frame(
  Medij = V(media_net)$name,
  Tip = V(media_net)$type,
  Bliskost = round(closeness(media_net), 4),
  Normalizirana = round(closeness(media_net, normalized = TRUE), 3)
)

closeness_df <- closeness_df[order(-closeness_df$Bliskost), ]

kable(closeness_df, 
      col.names = c("Medij", "Tip", "Bliskost", "Normalizirana"),
      row.names = FALSE) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE)
```

Važno ograničenje bliskosti jest njezina osjetljivost na nepovezane mreže. Ako mreža ima više komponenti koje nisu međusobno povezane, udaljenost između čvorova u različitim komponentama je beskonačna, što čini standardnu formulu neupotrebljivom. U takvim slučajevima koriste se modificirane verzije mjere ili se analiza ograničava na najveću povezanu komponentu mreže.

U kontekstu istraživanja masovne komunikacije, bliskost je relevantna za razumijevanje dinamike širenja informacija. Medij ili korisnik s visokom bliskošću jest potencijalno učinkovit širitelj informacija jer njegove poruke mogu brzo doseći sve dijelove mreže. Ova mjera može biti korisna za identificiranje potencijalnih ambasadora kampanja ili, s druge strane, potencijalnih širitelja dezinformacija koji mogu brzo kontaminirati cijelu mrežu.


## Svojstvena vektorska centralnost

Sve dosad razmatrane mjere tretiraju sve veze kao jednako vrijedne. Međutim, intuitivno je jasno da veza s utjecajnim čvorom vrijedi više od veze s marginalnim čvorom. Osoba koja poznaje predsjednika države ima više potencijalnog utjecaja od osobe koja poznaje samo svoje susjede, čak i ako obje imaju jednak broj poznanika. **Svojstvena vektorska centralnost** (engl. *eigenvector centrality*) formalizira ovu intuiciju definirajući centralnost čvora kao funkciju centralnosti njegovih susjeda. Čvor je centralan ako je povezan s drugim centralnim čvorovima.

Ova rekurzivna definicija može se matematički izraziti kao:

$$C_E(i) = \frac{1}{\lambda} \sum_{j} a_{ij} C_E(j)$$

U ovoj formuli $C_E(i)$ označava svojstvenu vektorsku centralnost čvora $i$, $a_{ij}$ je element matrice susjedstva, a $\lambda$ je konstanta normalizacije. U matričnom obliku, vektor centralnosti $\mathbf{x}$ zadovoljava jednadžbu $A\mathbf{x} = \lambda\mathbf{x}$, gdje je $A$ matrica susjedstva, a $\lambda$ najveća svojstvena vrijednost te matrice. Vektor $\mathbf{x}$ koji odgovara ovoj najvećoj svojstvenoj vrijednosti jest vektor svojstvenih vektorskih centralnosti.

Konceptualna snaga ove mjere leži u tome što uzima u obzir ne samo izravne veze čvora, već i kvalitetu tih veza mjerenu centralnošću susjeda. Čvor može imati umjeren stupanj, ali visoku svojstvenu vektorsku centralnost ako je povezan s nekoliko visoko centralnih čvorova. Obratno, čvor s visokim stupnjem može imati relativno nisku svojstvenu vektorsku centralnost ako su svi njegovi susjedi periferni.

```{r}
#| label: fig-eigenvector
#| fig-cap: "Vizualizacija svojstvene vektorske centralnosti u mreži hrvatskih medija. Veličina čvora proporcionalna je centralnosti. Ova mjera nagrađuje čvorove koji su povezani s drugim utjecajnim čvorovima, a ne samo broj veza."
#| fig-width: 9
#| fig-height: 7

V(media_net)$eigenvector <- eigen_centrality(media_net)$vector

set.seed(42)
plot(media_net,
     vertex.size = V(media_net)$eigenvector * 30 + 8,
     vertex.color = degree_colors[V(media_net)$type],
     vertex.frame.color = NA,
     vertex.label.color = "black",
     vertex.label.cex = 0.9,
     edge.color = "gray70",
     edge.width = 1.5,
     main = "Svojstvena vektorska centralnost (Eigenvector) u mreži hrvatskih medija")

legend("bottomleft", 
       legend = names(degree_colors),
       fill = degree_colors,
       title = "Tip medija",
       bty = "n")
```

**PageRank**, algoritam koji je Google koristio za rangiranje web stranica, predstavlja varijantu svojstvene vektorske centralnosti prilagođenu usmjerenim mrežama. Osnovna intuicija je ista: stranica je važna ako na nju upućuju važne stranice. PageRank uključuje dodatne modifikacije poput faktora prigušenja koji rješava probleme s čvorovima bez izlaznih veza. U kontekstu istraživanja medija, PageRank se može primijeniti na mreže hiperlinkova kako bi se identificirali najutjecajniji online izvori.

```{r}
#| label: tbl-eigenvector
#| tbl-cap: "Svojstvena vektorska centralnost za svaki čvor u mreži. Viša vrijednost označava čvor koji je povezan s drugim utjecajnim čvorovima."

eigen_df <- data.frame(
  Medij = V(media_net)$name,
  Tip = V(media_net)$type,
  Eigenvector = round(eigen_centrality(media_net)$vector, 4)
)

eigen_df <- eigen_df[order(-eigen_df$Eigenvector), ]

kable(eigen_df, 
      col.names = c("Medij", "Tip", "Svojstvena vekt. centralnost"),
      row.names = FALSE) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE)
```

U istraživanjima masovne komunikacije, svojstvena vektorska centralnost je korisna za identificiranje aktera čiji utjecaj proizlazi iz veza s drugim utjecajnim akterima. Novinar koji ima pristup elitnim izvorima, komentator kojeg citiraju drugi utjecajni komentatori, ili portal kojeg dijele mainstream mediji, svi oni mogu imati visoku svojstvenu vektorsku centralnost čak i ako njihov ukupni broj veza nije među najvećima. Ova mjera posebno je relevantna za razumijevanje elite mrežne strukture i identifikaciju aktera koji su utjecajni ne zbog svoje vidljivosti, već zbog kvalitete svojih veza.


## Usporedba mjera centralnosti

Različite mjere centralnosti hvataju različite aspekte važnosti čvora u mreži i mogu proizvoditi značajno različite rangove istih čvorova. Razumijevanje ovih razlika ključno je za odabir odgovarajuće mjere s obzirom na istraživačko pitanje.

```{r}
#| label: fig-centrality-comparison
#| fig-cap: "Usporedba četiri mjere centralnosti za sve čvorove u mreži hrvatskih medija. Različite mjere mogu značajno različito rangirati iste čvorove ovisno o aspektu važnosti koji mjere."
#| fig-width: 10
#| fig-height: 6

centrality_df <- data.frame(
  Medij = V(media_net)$name,
  Stupanj = scale(degree(media_net))[,1],
  Meduposredovanje = scale(betweenness(media_net))[,1],
  Bliskost = scale(closeness(media_net))[,1],
  Eigenvector = scale(eigen_centrality(media_net)$vector)[,1]
)

centrality_long <- centrality_df |>
  pivot_longer(cols = -Medij, names_to = "Mjera", values_to = "Vrijednost")

centrality_long$Mjera <- factor(centrality_long$Mjera, 
                                 levels = c("Stupanj", "Meduposredovanje", "Bliskost", "Eigenvector"),
                                 labels = c("Stupanj", "Međuposredovanje", "Bliskost", "Eigenvector"))

ggplot(centrality_long, aes(x = reorder(Medij, Vrijednost), y = Vrijednost, fill = Mjera)) +
  geom_col(position = "dodge") +
  coord_flip() +
  scale_fill_brewer(palette = "Set2") +
  labs(
    title = "Usporedba mjera centralnosti",
    subtitle = "Standardizirane vrijednosti za usporedivost",
    x = NULL,
    y = "Standardizirana centralnost (z-score)",
    fill = "Mjera centralnosti"
  ) +
  theme_minimal(base_size = 11) +
  theme(legend.position = "bottom")
```

```{r}
#| label: tbl-all-centrality
#| tbl-cap: "Sažetak svih mjera centralnosti za mrežu hrvatskih medija. Svaka mjera hvata različit aspekt važnosti čvora u mrežnoj strukturi."

all_centrality <- data.frame(
  Medij = V(media_net)$name,
  Tip = V(media_net)$type,
  Stupanj = degree(media_net),
  Meduposredovanje = round(betweenness(media_net, normalized = TRUE), 3),
  Bliskost = round(closeness(media_net, normalized = TRUE), 3),
  Eigenvector = round(eigen_centrality(media_net)$vector, 3)
)

all_centrality <- all_centrality[order(-all_centrality$Stupanj), ]

kable(all_centrality, 
      col.names = c("Medij", "Tip", "Stupanj", "Međuposr.", "Bliskost", "Eigenvector"),
      row.names = FALSE) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Tablica 7 sažima interpretacije različitih mjera centralnosti u kontekstu istraživanja masovne komunikacije.

```{r}
#| label: tbl-interpretation
#| tbl-cap: "Interpretacija mjera centralnosti u kontekstu istraživanja masovne komunikacije."

interpretation_df <- data.frame(
  Mjera = c("Stupanj", "Međuposredovanje", "Bliskost", "Eigenvector/PageRank"),
  Pitanje = c(
    "Koliko je akter vidljiv/popularan?",
    "Kontrolira li akter protok informacija?",
    "Koliko učinkovito akter može širiti poruke?",
    "Je li akter povezan s drugim važnim akterima?"
  ),
  Primjer_visokog = c(
    "Mainstream medij s mnogo pratitelja",
    "Agregator koji povezuje različite izvore",
    "Centralno pozicionirani portal",
    "Novinar s pristupom elitnim izvorima"
  ),
  Komunikacijski_koncept = c(
    "Doseg, vidljivost, popularnost",
    "Gatekeeping, kontrola informacija",
    "Učinkovitost difuzije",
    "Elitni utjecaj, prestiž"
  )
)

kable(interpretation_df,
      col.names = c("Mjera", "Pitanje koje odgovara", "Primjer visokog rezultata", "Komunikacijski koncept")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Izbor mjere centralnosti treba biti vođen teorijskim pitanjem koje istraživač postavlja. Ako nas zanima tko je najpopularniji ili najvidljiviji akter, stupanj centralnosti je prirodan izbor. Ako nas zanima tko kontrolira tokove informacija između različitih skupina, međuposredovanje je prikladnije. Ako istražujemo potencijal za brzo širenje poruka, bliskost je relevantna mjera. Ako nas zanima pristup elitnim krugovima ili utjecaj koji proizlazi iz kvalitete veza, svojstvena vektorska centralnost ili PageRank pružaju odgovarajuće uvide. U praksi, sveobuhvatna analiza često uključuje izračun više mjera centralnosti i usporedbu dobivenih rezultata, što omogućuje bogatiju interpretaciju mrežne strukture i uloga pojedinih aktera.

# Struktura mreže na makro razini

Dosadašnja razmatranja fokusirala su se na pojedinačne čvorove i njihovu relativnu važnost unutar mrežne strukture. Međutim, mreže posjeduju i globalna svojstva koja karakteriziraju strukturu kao cjelinu i koja se ne mogu svesti na karakteristike pojedinih čvorova. Zamislimo istraživača koji uspoređuje mrežu dijeljenja vijesti na Twitteru s mrežom citiranja među akademskim časopisima. Obje mreže mogu imati slične veličine u terminima broja čvorova i veza, no njihove globalne strukture mogu se dramatično razlikovati. Jedna može biti gusta i kohezivna, druga rijetka i fragmentirana. Jedna može pokazivati jasnu hijerarhiju s dominantnim čvorištima, druga može biti egalitarnija. Razumijevanje ovih makro karakteristika pruža uvide u temeljnu organizaciju komunikacijskog sustava i ima implikacije za procese poput širenja informacija, formiranja zajednica i otpornosti mreže na poremećaje.

Analiza strukture mreže na makro razini obuhvaća skup metrika i koncepata koji opisuju globalnu organizaciju mrežne strukture. Ove mjere omogućuju usporedbu različitih mreža, praćenje evolucije iste mreže kroz vrijeme i testiranje hipoteza o procesima koji su generirali promatranu strukturu. U ovom poglavlju razmatramo tri ključna koncepta: gustoću koja mjeri ukupnu povezanost mreže, fenomen malog svijeta koji opisuje istovremenu prisutnost lokalne gustoće i globalnih prečaca, te mreže bez skale koje karakterizira ekstremna nejednakost u distribuciji veza.

```{r}
#| label: setup-section4
#| include: false

library(igraph)
library(ggraph)
library(tidygraph)
library(ggplot2)
library(dplyr)
library(tidyr)
library(knitr)
library(kableExtra)

theme_set(theme_minimal(base_size = 12))
```


## Gustoća mreže

**Gustoća** (engl. *density*) predstavlja najjednostavniju globalnu mjeru mrežne strukture koja kvantificira udio realiziranih veza u odnosu na maksimalan mogući broj veza. Intuitivno, gustoća odgovara na pitanje koliko je mreža ispunjena vezama. U potpuno povezanoj mreži gdje svaki čvor ima vezu sa svakim drugim čvorom gustoća iznosi 1, dok u mreži bez ikakvih veza gustoća iznosi 0. Stvarne društvene mreže tipično imaju gustoću negdje između ovih ekstrema, a njezina konkretna vrijednost pruža uvid u kohezivnost i integriranost promatrane zajednice.

Formalno, gustoća neusmjerene mreže definira se kao omjer broja postojećih veza i maksimalnog mogućeg broja veza:

$$D = \frac{2m}{n(n-1)}$$

U ovoj formuli $m$ označava broj veza u mreži, a $n$ broj čvorova. Faktor 2 u brojniku proizlazi iz činjenice da je maksimalan broj veza u neusmjerenoj mreži jednak $\frac{n(n-1)}{2}$ jer svaki par čvorova može biti povezan najviše jednom vezom. Za usmjerene mreže formula se modificira jer svaki par čvorova može imati dvije veze (u oba smjera):

$$D_{usmjerena} = \frac{m}{n(n-1)}$$

```{r}
#| label: fig-density-comparison
#| fig-cap: "Usporedba mreža različitih gustoća. Lijevo: rijetka mreža (gustoća ≈ 0.15) tipična za velike društvene mreže. Sredina: umjereno gusta mreža (gustoća ≈ 0.35) karakteristična za manje profesionalne zajednice. Desno: gusta mreža (gustoća ≈ 0.65) kakvu nalazimo u kohezivnim grupama poput redakcija ili timova."
#| fig-width: 12
#| fig-height: 4

set.seed(42)

sparse_net <- erdos.renyi.game(20, 0.15, type = "gnp")
medium_net <- erdos.renyi.game(20, 0.35, type = "gnp")
dense_net <- erdos.renyi.game(20, 0.65, type = "gnp")

par(mfrow = c(1, 3), mar = c(2, 1, 3, 1))

plot(sparse_net,
     vertex.size = 12,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray60",
     edge.width = 1.2,
     main = paste0("Rijetka mreža\nGustoća = ", round(edge_density(sparse_net), 2)))

plot(medium_net,
     vertex.size = 12,
     vertex.color = "#2ecc71",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray60",
     edge.width = 1.2,
     main = paste0("Umjerena gustoća\nGustoća = ", round(edge_density(medium_net), 2)))

plot(dense_net,
     vertex.size = 12,
     vertex.color = "#e74c3c",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray60",
     edge.width = 1.2,
     main = paste0("Gusta mreža\nGustoća = ", round(edge_density(dense_net), 2)))
```

U kontekstu istraživanja masovne komunikacije, gustoća mreže može se interpretirati na nekoliko načina ovisno o tipu mreže koja se analizira. U mreži suradnje među novinarima, visoka gustoća sugerira kohezivnu profesionalnu zajednicu gdje većina novinara surađuje s većinom drugih novinara. Niska gustoća može indicirati fragmentiranu profesiju s izoliranim skupinama koje rijetko komuniciraju. U mreži dijeljenja sadržaja na društvenim mrežama, gustoća reflektira intenzitet interakcije među korisnicima. Visoka gustoća može sugerirati aktivnu i angažiranu zajednicu, dok niska gustoća može indicirati pasivniju publiku.

Važno je napomenuti da gustoća ima tendenciju opadanja s veličinom mreže. U maloj grupi od desetak ljudi relativno je lako održavati veze sa svima, no u mreži od tisuću ljudi to postaje praktički nemoguće. Stoga usporedba gustoća mreža različitih veličina zahtijeva oprez. Mreža od 50 čvorova s gustoćom 0.3 nije nužno manje kohezivna od mreže od 500 čvorova s gustoćom 0.05 jer veća mreža ima strukturna ograničenja koja onemogućuju visoku gustoću.

```{r}
#| label: tbl-density-examples
#| tbl-cap: "Tipične vrijednosti gustoće za različite tipove komunikacijskih mreža. Gustoća varira ovisno o veličini mreže i prirodi odnosa koji se modeliraju."

density_examples <- data.frame(
  Tip_mreze = c(
    "Redakcija medijske kuće",
    "Mreža novinara u državi", 
    "Pratitelji na Twitteru (uzorak)",
    "Mreža citiranja među portalima",
    "Globalna mreža hiperlinkova"
  ),
  Tipicna_velicina = c("10-50", "100-500", "1.000-10.000", "50-200", "> 1.000.000"),
  Ocekivana_gustoca = c("0.40 - 0.70", "0.05 - 0.15", "0.001 - 0.01", "0.10 - 0.30", "< 0.0001"),
  Interpretacija = c(
    "Visoka kohezija, česta suradnja",
    "Umjerena povezanost profesije",
    "Vrlo rijetka, selektivno praćenje",
    "Umjerena, selektivno citiranje",
    "Ekstremno rijetka, fragmentirana"
  )
)

kable(density_examples,
      col.names = c("Tip mreže", "Tipična veličina", "Očekivana gustoća", "Interpretacija")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Osim ukupne gustoće, često je informativno računati **lokalnu gustoću** za pojedine dijelove mreže. Usporedba gustoće unutar identificiranih zajednica s ukupnom gustoćom mreže može otkriti stupanj modularnosti strukture. Ako su lokalne gustoće unutar zajednica značajno više od globalne gustoće, to sugerira jasno razdvojene i interno kohezivne skupine. Takva struktura tipična je za polarizirane online prostore gdje ideološki slične grupe intenzivno komuniciraju međusobno, ali rijetko s drugima.


## Fenomen malog svijeta

Jedno od najfascinantnijih otkrića mrežne znanosti jest da mnoge stvarne mreže pokazuju **fenomen malog svijeta** (engl. *small world phenomenon*). Ovo svojstvo, popularno poznato kao šest stupnjeva odvojenosti, označava da su čvorovi u mreži međusobno povezani iznenađujuće kratkim putanjama usprkos velikoj veličini mreže i relativno niskoj gustoći. Milgramov eksperiment iz 1967. godine empirijski je demonstrirao ovaj fenomen pokazavši da nasumično odabrani Amerikanci mogu biti povezani lancem od svega pet do šest poznanstava. Ovo otkriće izazvalo je duboko čuđenje jer intuitivno očekujemo da bi povezivanje dvaju stranaca u populaciji od stotina milijuna zahtijevalo mnogo duži lanac.

Matematička analiza ovog fenomena pokazuje da mreže malog svijeta karakteriziraju dva naizgled proturječna svojstva. S jedne strane, pokazuju visok **koeficijent klasteriranja** (engl. *clustering coefficient*) koji mjeri tendenciju da prijatelji mojih prijatelja budu i moji prijatelji. Ovo svojstvo odražava lokalnu strukturu zajednica i klika. S druge strane, pokazuju kratku **prosječnu duljinu putanje** (engl. *average path length*) koja mjeri prosječan broj koraka potrebnih za povezivanje bilo koja dva čvora. Ovo svojstvo odražava postojanje prečaca koji povezuju udaljene dijelove mreže.

**Koeficijent klasteriranja** za pojedini čvor $i$ definira se kao udio realiziranih veza među susjedima tog čvora u odnosu na maksimalan mogući broj veza:

$$C_i = \frac{2e_i}{k_i(k_i-1)}$$

U ovoj formuli $e_i$ označava broj veza među susjedima čvora $i$, a $k_i$ je stupanj čvora (broj susjeda). Globalni koeficijent klasteriranja dobiva se kao prosjek lokalnih koeficijenata preko svih čvorova. Visok koeficijent klasteriranja indicira da mreža sadrži mnogo zatvorenih trokuta, odnosno da postoji snažna tendencija formiranja gusto povezanih lokalnih zajednica.

```{r}
#| label: fig-small-world
#| fig-cap: "Ilustracija fenomena malog svijeta kroz usporedbu tri tipa mreža s 30 čvorova. Lijevo: pravilna rešetka s visokim klasteriranjem ali dugim putanjama. Sredina: mreža malog svijeta (Watts-Strogatz) s visokim klasteriranjem i kratkim putanjama. Desno: nasumična mreža s niskim klasteriranjem i kratkim putanjama."
#| fig-width: 12
#| fig-height: 5

set.seed(123)

lattice_net <- make_lattice(length = 30, dim = 1, nei = 3, circular = TRUE)

small_world_net <- sample_smallworld(dim = 1, size = 30, nei = 3, p = 0.1)

random_net <- erdos.renyi.game(30, p = edge_density(lattice_net), type = "gnp")

par(mfrow = c(1, 3), mar = c(2, 1, 4, 1))

plot(lattice_net,
     layout = layout_in_circle,
     vertex.size = 10,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray50",
     edge.width = 1.2,
     main = paste0("Pravilna rešetka\nKlasteriranje = ", round(transitivity(lattice_net), 2),
                   "\nProsj. putanja = ", round(mean_distance(lattice_net), 2)))

plot(small_world_net,
     layout = layout_in_circle,
     vertex.size = 10,
     vertex.color = "#2ecc71",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray50",
     edge.width = 1.2,
     main = paste0("Mreža malog svijeta\nKlasteriranje = ", round(transitivity(small_world_net), 2),
                   "\nProsj. putanja = ", round(mean_distance(small_world_net), 2)))

plot(random_net,
     layout = layout_in_circle,
     vertex.size = 10,
     vertex.color = "#e74c3c",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray50",
     edge.width = 1.2,
     main = paste0("Nasumična mreža\nKlasteriranje = ", round(transitivity(random_net), 2),
                   "\nProsj. putanja = ", round(mean_distance(random_net), 2)))
```

Duncan Watts i Steven Strogatz 1998. godine predložili su elegantan model koji objašnjava kako mreže malog svijeta nastaju. Počevši od pravilne rešetke gdje je svaki čvor povezan samo s najbližim susjedima, nasumično preusmjeravamo mali udio veza prema udaljenim čvorovima. Ovi preusmjereni bridovi djeluju kao prečaci koji dramatično skraćuju prosječnu udaljenost u mreži, dok istovremeno zadržavaju visoko klasteriranje jer većina lokalnih veza ostaje netaknuta. Ključan uvid jest da je potreban samo mali broj prečaca da bi se prosječna putanja drastično skratila.

```{r}
#| label: fig-watts-strogatz
#| fig-cap: "Efekt dodavanja prečaca na svojstva mreže. S povećanjem vjerojatnosti preusmjeravanja (p), prosječna duljina putanje naglo opada dok klasteriranje opada postupno. Područje malog svijeta nalazi se pri niskim vrijednostima p gdje mreža zadržava visoko klasteriranje uz kratke putanje."
#| fig-width: 10
#| fig-height: 5

set.seed(42)
p_values <- c(0, 0.001, 0.005, 0.01, 0.02, 0.05, 0.1, 0.2, 0.5, 1)
n_nodes <- 100
n_neighbors <- 4

results <- data.frame(
  p = numeric(),
  clustering = numeric(),
  path_length = numeric()
)

base_lattice <- make_lattice(length = n_nodes, dim = 1, nei = n_neighbors, circular = TRUE)
base_clustering <- transitivity(base_lattice)
base_path <- mean_distance(base_lattice)

for (p in p_values) {
  if (p == 0) {
    net <- base_lattice
  } else {
    net <- sample_smallworld(dim = 1, size = n_nodes, nei = n_neighbors, p = p)
  }
  
  results <- rbind(results, data.frame(
    p = p,
    clustering = transitivity(net) / base_clustering,
    path_length = mean_distance(net) / base_path
  ))
}

results_long <- results |>
  pivot_longer(cols = c(clustering, path_length), 
               names_to = "Mjera", values_to = "Vrijednost")

results_long$Mjera <- factor(results_long$Mjera,
                              levels = c("clustering", "path_length"),
                              labels = c("Klasteriranje (C/C₀)", "Duljina putanje (L/L₀)"))

ggplot(results_long, aes(x = p, y = Vrijednost, color = Mjera, shape = Mjera)) +
  geom_line(linewidth = 1.2) +
  geom_point(size = 3) +
  scale_x_log10(labels = scales::label_number()) +
  scale_color_manual(values = c("#e74c3c", "#3498db")) +
  annotate("rect", xmin = 0.005, xmax = 0.1, ymin = 0, ymax = 1.1, 
           alpha = 0.2, fill = "#2ecc71") +
  annotate("text", x = 0.02, y = 0.15, label = "Područje\nmalog svijeta", 
           size = 3.5, color = "#27ae60") +
  labs(
    title = "Watts-Strogatz model: prijelaz prema malom svijetu",
    subtitle = "Normalizirane vrijednosti u odnosu na pravilnu rešetku (p = 0)",
    x = "Vjerojatnost preusmjeravanja (p)",
    y = "Normalizirana vrijednost",
    color = NULL, shape = NULL
  ) +
  theme_minimal(base_size = 12) +
  theme(legend.position = "bottom")
```

U kontekstu istraživanja masovne komunikacije, fenomen malog svijeta ima značajne implikacije za razumijevanje širenja informacija. Visoko klasteriranje znači da se informacije učinkovito šire unutar lokalnih zajednica jer su članovi gusto povezani. Istovremeno, kratke globalne putanje omogućuju da informacija preskoči iz jedne zajednice u drugu putem malobrojnih prečaca. Ova kombinacija objašnjava zašto vijesti mogu brzo postati viralne, šireći se najprije unutar uskih krugova, a potom eksplodirajući na globalnu razinu kada dosegnu ključne mostove između zajednica.

```{r}
#| label: tbl-small-world
#| tbl-cap: "Usporedba strukturnih svojstava različitih tipova mreža. Mreže malog svijeta kombiniraju visoko klasteriranje pravilnih rešetki s kratkim putanjama nasumičnih mreža."

sw_comparison <- data.frame(
  Tip_mreze = c("Pravilna rešetka", "Mreža malog svijeta", "Nasumična mreža"),
  Klasteriranje = c("Visoko", "Visoko", "Nisko"),
  Prosjecna_putanja = c("Duga", "Kratka", "Kratka"),
  Primjer = c(
    "Geografski ograničene zajednice",
    "Većina stvarnih društvenih mreža",
    "Teoretski konstrukt"
  ),
  Implikacije = c(
    "Spora difuzija, lokalna kohezija",
    "Brza difuzija uz lokalnu koheziju",
    "Brza difuzija bez lokalne strukture"
  )
)

kable(sw_comparison,
      col.names = c("Tip mreže", "Klasteriranje", "Prosječna putanja", "Primjer", "Implikacije za komunikaciju")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Empirijska istraživanja pokazala su da mnoge komunikacijske mreže doista pokazuju svojstva malog svijeta. Mreža pratitelja na Twitteru, mreža prijatelja na Facebooku, mreža citiranja akademskih radova i mreža hiperlinkova na webu sve pokazuju kombinaciju visokog klasteriranja i kratkih prosječnih putanja. Ovo svojstvo čini te sustave iznimno učinkovitima za širenje informacija, ali i ranjivima na brzo širenje dezinformacija koje mogu doseći milijune korisnika u rekordno kratkom vremenu.


## Mreže bez skale

Dok fenomen malog svijeta opisuje globalna svojstva putanja i klasteriranja, **mreže bez skale** (engl. *scale-free networks*) odnose se na specifičnu distribuciju povezanosti čvorova. U mreži bez skale, distribucija stupnjeva slijedi **zakon potencije** (engl. *power law*):

$$P(k) \propto k^{-\gamma}$$

U ovoj formuli $P(k)$ označava vjerojatnost da nasumično odabrani čvor ima stupanj $k$, a $\gamma$ je eksponent zakona potencije koji tipično poprima vrijednosti između 2 i 3 za stvarne mreže. Ključna karakteristika ove distribucije jest da nema karakterističnu skalu, odnosno tipičnu vrijednost oko koje bi se stupnjevi koncentrirali. Umjesto toga, postoji kontinuum od čvorova s vrlo malo veza do rijetkih čvorova s enormno mnogo veza.

```{r}
#| label: fig-degree-distribution
#| fig-cap: "Usporedba distribucija stupnjeva za nasumičnu mrežu (lijevo) i mrežu bez skale (desno). Nasumična mreža pokazuje zvonoliku distribuciju s karakterističnim stupnjem, dok mreža bez skale pokazuje distribuciju zakona potencije s dugim repom visokih vrijednosti."
#| fig-width: 12
#| fig-height: 5

set.seed(42)

random_large <- erdos.renyi.game(1000, p = 0.01, type = "gnp")
scale_free_large <- barabasi.game(1000, m = 5, directed = FALSE)

random_degrees <- data.frame(
  stupanj = degree(random_large),
  tip = "Nasumična mreža\n(Erdős-Rényi)"
)

sf_degrees <- data.frame(
  stupanj = degree(scale_free_large),
  tip = "Mreža bez skale\n(Barabási-Albert)"
)

all_degrees <- rbind(random_degrees, sf_degrees)

p1 <- ggplot(random_degrees, aes(x = stupanj)) +
  geom_histogram(binwidth = 1, fill = "#3498db", color = "white", alpha = 0.8) +
  labs(
    title = "Nasumična mreža (Erdős-Rényi)",
    subtitle = paste0("n = 1000, prosječni stupanj = ", round(mean(random_degrees$stupanj), 1)),
    x = "Stupanj čvora",
    y = "Frekvencija"
  ) +
  theme_minimal(base_size = 11) +
  geom_vline(xintercept = mean(random_degrees$stupanj), color = "#e74c3c", 
             linetype = "dashed", linewidth = 1)

p2 <- ggplot(sf_degrees, aes(x = stupanj)) +
  geom_histogram(binwidth = 5, fill = "#e74c3c", color = "white", alpha = 0.8) +
  labs(
    title = "Mreža bez skale (Barabási-Albert)",
    subtitle = paste0("n = 1000, prosječni stupanj = ", round(mean(sf_degrees$stupanj), 1)),
    x = "Stupanj čvora",
    y = "Frekvencija"
  ) +
  theme_minimal(base_size = 11) +
  scale_x_continuous(limits = c(0, max(sf_degrees$stupanj)))

gridExtra::grid.arrange(p1, p2, ncol = 2)
```

Vizualno, razlika između nasumične mreže i mreže bez skale postaje očita kada promotrimo distribuciju stupnjeva. U nasumičnoj mreži većina čvorova ima približno jednak broj veza koji se grupira oko prosječne vrijednosti, tvoreći zvonoliku distribuciju. U mreži bez skale, većina čvorova ima vrlo malo veza dok mali broj čvorova, nazvanih **čvorištima** ili hubovima, ima enormno mnogo veza. Ova ekstremna nejednakost ključna je karakteristika mreža bez skale.

```{r}
#| label: fig-loglog-distribution
#| fig-cap: "Distribucija stupnjeva na logaritamskoj skali. Za mreže bez skale, log-log graf pokazuje približno linearni odnos što indicira zakon potencije. Nagib pravca odgovara eksponentu γ."
#| fig-width: 10
#| fig-height: 5

sf_degree_dist <- data.frame(table(degree(scale_free_large)))
colnames(sf_degree_dist) <- c("stupanj", "frekvencija")
sf_degree_dist$stupanj <- as.numeric(as.character(sf_degree_dist$stupanj))
sf_degree_dist$frekvencija <- as.numeric(sf_degree_dist$frekvencija)
sf_degree_dist$vjerojatnost <- sf_degree_dist$frekvencija / sum(sf_degree_dist$frekvencija)

ggplot(sf_degree_dist, aes(x = stupanj, y = vjerojatnost)) +
  geom_point(color = "#e74c3c", size = 2, alpha = 0.7) +
  geom_smooth(method = "lm", se = FALSE, color = "#2c3e50", linetype = "dashed") +
  scale_x_log10() +
  scale_y_log10() +
  labs(
    title = "Distribucija stupnjeva na log-log skali",
    subtitle = "Linearni odnos indicira zakon potencije karakterističan za mreže bez skale",
    x = "Stupanj čvora (log skala)",
    y = "Vjerojatnost (log skala)"
  ) +
  theme_minimal(base_size = 12) +
  annotate("text", x = 50, y = 0.01, 
           label = "Nagib ≈ -γ", size = 4, color = "#2c3e50")
```

Barabási i Albert 1999. godine predložili su mehanizam koji objašnjava kako mreže bez skale nastaju. Njihov model temelji se na dva ključna procesa: **rast** i **preferencijsko prikapčanje**. Mreža raste dodavanjem novih čvorova koji se povezuju s postojećim čvorovima. Ključna karakteristika jest da novi čvorovi ne biraju susjede nasumično već preferiraju povezivanje s već dobro povezanim čvorovima. Vjerojatnost da će novi čvor formirati vezu s postojećim čvorom $i$ proporcionalna je stupnju tog čvora:

$$\Pi(k_i) = \frac{k_i}{\sum_j k_j}$$

Ovaj mehanizam proizvodi dinamiku bogatiji postaju bogatiji gdje čvorovi koji su rano stekli prednost u broju veza nastavljaju privlačiti neproporcionalno više novih veza. Rezultat je ekstremna koncentracija veza u malom broju čvorišta.

```{r}
#| label: fig-preferential-attachment
#| fig-cap: "Vizualizacija mreže bez skale s 50 čvorova. Veličina čvora proporcionalna je stupnju. Jasno su vidljiva čvorišta (hubovi) s mnogo veza dok većina čvorova ima samo nekoliko poveznica."
#| fig-width: 9
#| fig-height: 7

set.seed(42)
demo_sf <- barabasi.game(50, m = 2, directed = FALSE)

V(demo_sf)$degree <- degree(demo_sf)
V(demo_sf)$is_hub <- degree(demo_sf) > quantile(degree(demo_sf), 0.9)

node_colors <- ifelse(V(demo_sf)$is_hub, "#e74c3c", "#3498db")

plot(demo_sf,
     layout = layout_with_fr,
     vertex.size = sqrt(V(demo_sf)$degree) * 3 + 3,
     vertex.color = node_colors,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 0.8,
     main = "Mreža bez skale: čvorišta (crveno) vs. periferni čvorovi (plavo)")

legend("bottomleft",
       legend = c("Čvorište (hub)", "Periferni čvor"),
       fill = c("#e74c3c", "#3498db"),
       bty = "n")
```

U kontekstu istraživanja masovne komunikacije, mreže bez skale imaju dalekosežne implikacije. Postojanje čvorišta znači da mali broj aktera ima disproporcionalan utjecaj na tokove informacija. U mreži dijeljenja vijesti na društvenim mrežama, nekoliko influencera s milijunima pratitelja može doseći više ljudi nego tisuće običnih korisnika zajedno. U mreži citiranja među medijima, nekoliko autoritativnih izvora dominira kao referentne točke dok većina medija ima marginalnu citiranost.

```{r}
#| label: tbl-scale-free-implications
#| tbl-cap: "Implikacije strukture mreže bez skale za masovnu komunikaciju. Postojanje čvorišta ima i pozitivne i negativne posljedice za komunikacijski ekosustav."

sf_implications <- data.frame(
  Aspekt = c(
    "Širenje informacija",
    "Otpornost na greške",
    "Ranjivost na napade",
    "Koncentracija moći",
    "Viralnost sadržaja"
  ),
  Karakteristika = c(
    "Čvorišta omogućuju brzo globalno širenje",
    "Nasumično uklanjanje čvorova malo utječe na mrežu",
    "Ciljano uklanjanje čvorišta može fragmentirati mrežu",
    "Mali broj aktera kontrolira većinu tokova",
    "Sadržaj koji dođe do čvorišta eksplodira"
  ),
  Primjer_u_medijima = c(
    "Vijest koju podijeli influencer doseže milijune",
    "Gašenje malih portala ne utječe na ekosustav",
    "Suspenzija glavnih računa dramatično utječe na diskurs",
    "Nekoliko medijskih kuća postavlja agendu",
    "Meme ili video postaje viralan preko ključnih računa"
  )
)

kable(sf_implications,
      col.names = c("Aspekt", "Karakteristika", "Primjer u medijima")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Posebno zanimljiva karakteristika mreža bez skale jest njihova **asimetrična otpornost**. Ove mreže pokazuju izvanrednu otpornost na nasumične poremećaje jer uklanjanje nasumičnih čvorova uglavnom pogađa periferne čvorove s malo veza, što minimalno utječe na globalnu povezanost. Međutim, iste mreže izrazito su ranjive na ciljane napade usmjerene protiv čvorišta. Uklanjanje samo nekoliko najvažnijih čvorišta može fragmentirati mrežu u nepovezane komponente. Ova dualnost ima praktične implikacije za razumijevanje otpornosti komunikacijskih sustava i strategija za suzbijanje dezinformacija ili koordiniranih kampanja.

```{r}
#| label: fig-robustness
#| fig-cap: "Usporedba otpornosti nasumične mreže i mreže bez skale na dva tipa poremećaja. Lijevo: nasumično uklanjanje čvorova. Desno: ciljano uklanjanje čvorova s najviše veza. Mreže bez skale su robusne na nasumične greške ali ranjive na ciljane napade."
#| fig-width: 12
#| fig-height: 5

set.seed(42)

simulate_robustness <- function(net, type = "random", steps = 20) {
  n <- vcount(net)
  removal_fractions <- seq(0, 0.5, length.out = steps)
  results <- numeric(steps)
  
  for (i in seq_along(removal_fractions)) {
    temp_net <- net
    n_remove <- floor(removal_fractions[i] * n)
    
    if (n_remove > 0) {
      if (type == "random") {
        remove_nodes <- sample(V(temp_net), n_remove)
      } else {
        degrees <- degree(temp_net)
        remove_nodes <- order(degrees, decreasing = TRUE)[1:n_remove]
      }
      temp_net <- delete_vertices(temp_net, remove_nodes)
    }
    
    if (vcount(temp_net) > 0) {
      components <- components(temp_net)
      results[i] <- max(components$csize) / vcount(net)
    } else {
      results[i] <- 0
    }
  }
  
  return(data.frame(
    uklonjeno = removal_fractions,
    najveca_komponenta = results
  ))
}

random_net_rob <- erdos.renyi.game(500, p = 0.02, type = "gnp")
sf_net_rob <- barabasi.game(500, m = 5, directed = FALSE)

random_random <- simulate_robustness(random_net_rob, "random")
random_random$mreza <- "Nasumična"
random_random$napad <- "Nasumično uklanjanje"

sf_random <- simulate_robustness(sf_net_rob, "random")
sf_random$mreza <- "Bez skale"
sf_random$napad <- "Nasumično uklanjanje"

random_targeted <- simulate_robustness(random_net_rob, "targeted")
random_targeted$mreza <- "Nasumična"
random_targeted$napad <- "Ciljano uklanjanje"

sf_targeted <- simulate_robustness(sf_net_rob, "targeted")
sf_targeted$mreza <- "Bez skale"
sf_targeted$napad <- "Ciljano uklanjanje"

all_robustness <- rbind(random_random, sf_random, random_targeted, sf_targeted)

ggplot(all_robustness, aes(x = uklonjeno * 100, y = najveca_komponenta * 100, 
                            color = mreza, linetype = mreza)) +
  geom_line(linewidth = 1.2) +
  geom_point(size = 2) +
  facet_wrap(~napad) +
  scale_color_manual(values = c("Nasumična" = "#3498db", "Bez skale" = "#e74c3c")) +
  labs(
    title = "Otpornost mreža na poremećaje",
    subtitle = "Veličina najveće povezane komponente nakon uklanjanja čvorova",
    x = "Postotak uklonjenih čvorova (%)",
    y = "Veličina najveće komponente (% izvorne mreže)",
    color = "Tip mreže",
    linetype = "Tip mreže"
  ) +
  theme_minimal(base_size = 11) +
  theme(legend.position = "bottom")
```

Empirijska istraživanja pokazala su da mnoge komunikacijske mreže doista pokazuju karakteristike mreža bez skale. Distribucija pratitelja na Twitteru, distribucija citiranosti znanstvenih radova, distribucija posjećenosti web stranica i distribucija dijeljenja vijesti sve pokazuju približno distribuciju zakona potencije. Ova univerzalnost sugerira da slični generativni procesi, poput preferencijskog prikapčanja, operiraju u raznolikim komunikacijskim sustavima. Razumijevanje ove strukture ključno je za dizajniranje intervencija, bilo da je cilj maksimizirati doseg poruke identificiranjem ključnih čvorišta ili minimizirati širenje dezinformacija prepoznavanjem i neutraliziranjem ključnih širitelja.

```{r}
#| label: tbl-macro-summary
#| tbl-cap: "Sažetak mjera strukture mreže na makro razini s njihovim interpretacijama u kontekstu istraživanja masovne komunikacije."

macro_summary <- data.frame(
  Mjera = c("Gustoća", "Koeficijent klasteriranja", "Prosječna duljina putanje", "Eksponent zakona potencije (γ)"),
  Definicija = c(
    "Udio realiziranih veza od mogućih",
    "Vjerojatnost da su susjedi čvora međusobno povezani",
    "Prosječan broj koraka između bilo koja dva čvora",
    "Nagib distribucije stupnjeva na log-log skali"
  ),
  Tipicne_vrijednosti = c(
    "0.001 - 0.3 ovisno o veličini",
    "0.1 - 0.5 za društvene mreže",
    "3 - 8 za većinu stvarnih mreža",
    "2 - 3 za mreže bez skale"
  ),
  Interpretacija = c(
    "Kohezivnost i integriranost zajednice",
    "Lokalna struktura zajednica i klika",
    "Učinkovitost globalne komunikacije",
    "Stupanj nejednakosti u distribuciji veza"
  )
)

kable(macro_summary,
      col.names = c("Mjera", "Definicija", "Tipične vrijednosti", "Interpretacija")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Razumijevanje makro strukture mreže pruža temelj za sofisticiraniju analizu komunikacijskih fenomena. Gustoća nam govori o kohezivnosti sustava, fenomen malog svijeta objašnjava kako se informacije mogu brzo širiti usprkos velikoj veličini mreže, a distribucija zakona potencije otkriva ekstremnu koncentraciju utjecaja u malom broju čvorišta. Ova tri koncepta zajedno pružaju bogat okvir za razumijevanje arhitekture suvremenih komunikacijskih ekosustava i procesa koji se unutar njih odvijaju.

# Grupe, klasteri i zajednice

Zamislimo istraživača koji analizira mrežu interakcija na hrvatskom političkom Twitteru tijekom predizborne kampanje. Vizualizirajući mrežu, primjećuje da se korisnici ne raspoređuju nasumično već formiraju jasno odvojene skupine. Korisnici unutar svake skupine intenzivno komuniciraju međusobno, dijele slične sadržaje i retweetaju jedni druge, dok su interakcije između skupina znatno rjeđe. Daljnjom analizom otkriva da ove skupine odgovaraju političkim preferencijama: birači jedne stranke grupiraju se zajedno, odvojeni od birača konkurentskih stranaka. Ova opservacija otvara fundamentalna pitanja o strukturi komunikacijskih mreža: zašto se formiraju grupe, kako ih možemo identificirati i kvantificirati, te koje su posljedice takve fragmentacije za javni diskurs?

Analiza grupa, klastera i zajednica unutar mreža predstavlja jedno od najaktivnijih područja mrežne znanosti s dalekosežnim implikacijama za razumijevanje društvenih fenomena. Ljudi imaju prirodnu tendenciju formiranja skupina s onima koji su im slični, bilo po demografskim karakteristikama, interesima, uvjerenjima ili geografskoj blizini. Ova tendencija, poznata kao homofilija, rezultira mrežnim strukturama koje su daleko od nasumičnih. Razumijevanje ovih struktura omogućuje uvide u procese poput formiranja javnog mnijenja, širenja informacija unutar i između zajednica, polarizacije diskursa i fragmentacije javne sfere. U ovom poglavlju razmatramo ključne koncepte i metode za analizu grupne strukture mreža, počevši od najjednostavnijih potpuno povezanih podgrupa (klika), preko fenomena homofilije, do sofisticiranih algoritama za detekciju zajednica i teorije strukturnih rupa.

```{r}
#| label: setup-section5
#| include: false

library(igraph)
library(ggraph)
library(tidygraph)
library(ggplot2)
library(dplyr)
library(tidyr)
library(knitr)
library(kableExtra)

theme_set(theme_minimal(base_size = 12))
```


## Klike

**Klika** (engl. *clique*) predstavlja najjednostavniji i najstroži oblik grupne strukture u mreži. Formalno, klika je potpuni podgraf, odnosno skup čvorova u kojem je svaki čvor izravno povezan sa svakim drugim čvorom u tom skupu. U kliki od tri čvora postoje tri veze, u klici od četiri čvora postoji šest veza, a općenito u klici od $k$ čvorova postoji $\frac{k(k-1)}{2}$ veza. Intuitivno, klika predstavlja savršeno kohezivnu grupu gdje svi članovi poznaju sve ostale članove.

U kontekstu društvenih mreža, klike možemo zamisliti kao uske krugove prijatelja gdje je svaka osoba prijatelj sa svakom drugom osobom u grupi. U kontekstu istraživanja masovne komunikacije, klika bi mogla predstavljati grupu novinara koji svi međusobno surađuju, grupu portala koji svi međusobno citiraju ili grupu korisnika društvenih mreža koji svi međusobno prate i dijele sadržaje jedni drugih.

```{r}
#| label: fig-cliques-example
#| fig-cap: "Primjeri klika različitih veličina. Klika-3 (trokut) najčešći je oblik, klika-4 i klika-5 sve su rjeđe jer zahtijevaju sve gušću povezanost. U stvarnim mrežama, velike klike su izuzetno rijetke."
#| fig-width: 12
#| fig-height: 4

par(mfrow = c(1, 4), mar = c(2, 1, 3, 1))

clique3 <- make_full_graph(3)
plot(clique3,
     vertex.size = 35,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = c("A", "B", "C"),
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 3,
     main = "Klika-3 (Trokut)\n3 veze")

clique4 <- make_full_graph(4)
plot(clique4,
     vertex.size = 35,
     vertex.color = "#2ecc71",
     vertex.frame.color = NA,
     vertex.label = c("A", "B", "C", "D"),
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 3,
     main = "Klika-4\n6 veza")

clique5 <- make_full_graph(5)
plot(clique5,
     vertex.size = 35,
     vertex.color = "#e74c3c",
     vertex.frame.color = NA,
     vertex.label = c("A", "B", "C", "D", "E"),
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 2.5,
     main = "Klika-5\n10 veza")

clique6 <- make_full_graph(6)
plot(clique6,
     vertex.size = 30,
     vertex.color = "#9b59b6",
     vertex.frame.color = NA,
     vertex.label = LETTERS[1:6],
     vertex.label.color = "white",
     vertex.label.cex = 1,
     edge.color = "gray40",
     edge.width = 2,
     main = "Klika-6\n15 veza")
```

Identificiranje klika u mreži omogućuje otkrivanje najkohezivnijih podskupina. Međutim, strogi zahtjev da svaki član mora biti povezan sa svakim drugim članom čini velike klike izuzetno rijetkim u stvarnim mrežama. U velikoj društvenoj mreži od tisuću čvorova možemo pronaći stotine trokuta (klika-3), desetke klika-4, možda nekoliko klika-5, a klike većih veličina vjerojatno neće postojati. Ova rijetkoća proizlazi iz kombinatoričkih ograničenja jer broj potrebnih veza eksponencijalno raste s veličinom klike.

```{r}
#| label: fig-cliques-in-network
#| fig-cap: "Identifikacija klika u primjeru mreže. Crveno su označene sve klike veličine 3 (trokuti). Svaki trokut predstavlja potpuno povezanu trojku čvorova, što indicira kohezivnu podgrupu."
#| fig-width: 9
#| fig-height: 7

set.seed(42)

example_net <- graph_from_literal(
  A--B--C--A,
  B--D--E--B,
  C--D,
  E--F--G--H--E,
  F--H,
  G--I--J--K--G,
  I--K,
  L--M--N--L,
  M--O,
  A--L
)

cliques_3 <- cliques(example_net, min = 3, max = 3)

edge_in_clique <- rep(FALSE, ecount(example_net))
for (cl in cliques_3) {
  cl_nodes <- as.numeric(cl)
  for (i in 1:(length(cl_nodes)-1)) {
    for (j in (i+1):length(cl_nodes)) {
      eid <- get.edge.ids(example_net, c(cl_nodes[i], cl_nodes[j]))
      if (eid > 0) edge_in_clique[eid] <- TRUE
    }
  }
}

E(example_net)$color <- ifelse(edge_in_clique, "#e74c3c", "gray70")
E(example_net)$width <- ifelse(edge_in_clique, 3, 1.5)

node_in_clique <- rep(FALSE, vcount(example_net))
for (cl in cliques_3) {
  node_in_clique[as.numeric(cl)] <- TRUE
}
V(example_net)$color <- ifelse(node_in_clique, "#e74c3c", "#3498db")

plot(example_net,
     layout = layout_with_fr,
     vertex.size = 25,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1,
     main = paste0("Mreža s označenim klikama-3\nPronađeno ", length(cliques_3), " trokuta"))

legend("bottomleft",
       legend = c("Čvor u klici", "Čvor izvan klika", "Veza u klici", "Ostale veze"),
       col = c("#e74c3c", "#3498db", "#e74c3c", "gray70"),
       pch = c(16, 16, NA, NA),
       lty = c(NA, NA, 1, 1),
       lwd = c(NA, NA, 3, 1.5),
       bty = "n")
```

Budući da su klike često prerestriktivan koncept, istraživači koriste relaksirane verzije poput **n-klana** (čvorovi udaljeni najviše n koraka), **k-plexa** (dopušta da svakom čvoru nedostaje do k veza) ili **k-jezgre** (svaki čvor ima najmanje k veza unutar podgrupa). Ove relaksirane definicije omogućuju identificiranje kohezivnih grupa koje nisu savršeno povezane, ali ipak pokazuju visoku razinu unutarnje gustoće.

```{r}
#| label: tbl-clique-variants
#| tbl-cap: "Usporedba strogog koncepta klike s relaksiranim varijantama koje dopuštaju manje savršenu povezanost unutar grupe."

clique_variants <- data.frame(
  Koncept = c("Klika", "K-jezgra", "N-klan", "K-pleks"),
  Definicija = c(
    "Svaki čvor povezan sa svakim drugim",
    "Svaki čvor ima najmanje k veza unutar grupe",
    "Svi čvorovi udaljeni najviše n koraka",
    "Svakom čvoru nedostaje najviše k veza do potpunosti"
  ),
  Strogost = c("Najviša", "Srednja", "Niža", "Niža"),
  Primjena = c(
    "Identifikacija najužih krugova",
    "Pronalaženje kohezivnih jezgri",
    "Grupe s neizravnim vezama",
    "Gotovo potpune grupe"
  )
)

kable(clique_variants,
      col.names = c("Koncept", "Definicija", "Strogost", "Tipična primjena")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```


## Homofilija

**Homofilija** (engl. *homophily*), doslovno ljubav prema sličnima, označava temeljnu tendenciju u društvenim mrežama da se veze formiraju češće između sličnih nego između različitih aktera. Ova tendencija sažeta je u poslovici ptice istog perja zajedno lete (engl. *birds of a feather flock together*). Homofilija može operirati po različitim dimenzijama sličnosti uključujući demografske karakteristike poput dobi, spola, etničke pripadnosti ili obrazovanja, geografsku blizinu, profesionalnu pripadnost, političke stavove ili kulturne preferencije.

U kontekstu istraživanja masovne komunikacije, homofilija ima dalekosežne implikacije. Ako se korisnici društvenih mreža pretežno povezuju s ideološki sličnim korisnicima, rezultat je fragmentirana mreža s izoliranim odječnim komorama (engl. *echo chambers*) unutar kojih cirkuliraju slične informacije i perspektive. Ova struktura može pojačavati polarizaciju jer članovi svake komore rijetko dolaze u doticaj s alternativnim pogledima.

```{r}
#| label: fig-homophily
#| fig-cap: "Ilustracija homofilije u hipotetskoj mreži korisnika društvenih mreža. Boja označava političku orijentaciju (plavo = lijevo, crveno = desno). Vidljivo je da se veze pretežno formiraju unutar istih ideoloških skupina, dok su međugrupne veze rijetke."
#| fig-width: 10
#| fig-height: 7

set.seed(123)

n_left <- 15
n_right <- 15

left_net <- erdos.renyi.game(n_left, 0.4, type = "gnp")
right_net <- erdos.renyi.game(n_right, 0.4, type = "gnp")

combined_net <- disjoint_union(left_net, right_net)

cross_edges <- sample(1:5, 1)
for (i in 1:cross_edges) {
  from_node <- sample(1:n_left, 1)
  to_node <- sample((n_left+1):(n_left+n_right), 1)
  combined_net <- add_edges(combined_net, c(from_node, to_node))
}

V(combined_net)$political <- c(rep("Lijevo", n_left), rep("Desno", n_right))
V(combined_net)$color <- c(rep("#3498db", n_left), rep("#e74c3c", n_right))

layout_matrix <- rbind(
  cbind(runif(n_left, -2, -0.5), runif(n_left, -1, 1)),
  cbind(runif(n_right, 0.5, 2), runif(n_right, -1, 1))
)

E(combined_net)$color <- "gray60"
ends_matrix <- ends(combined_net, E(combined_net))
for (i in 1:ecount(combined_net)) {
  from_pol <- V(combined_net)$political[ends_matrix[i, 1]]
  to_pol <- V(combined_net)$political[ends_matrix[i, 2]]
  if (from_pol != to_pol) {
    E(combined_net)$color[i] <- "#f39c12"
  }
}

plot(combined_net,
     layout = layout_matrix,
     vertex.size = 15,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.width = 2,
     main = "Homofilija u političkoj mreži: rijetke međugrupne veze")

legend("bottom",
       legend = c("Lijeva orijentacija", "Desna orijentacija", "Međugrupna veza"),
       col = c("#3498db", "#e74c3c", "#f39c12"),
       pch = c(16, 16, NA),
       lty = c(NA, NA, 1),
       lwd = c(NA, NA, 2),
       horiz = TRUE,
       bty = "n")
```

Kvantificiranje homofilije zahtijeva usporedbu promatrane frekvencije veza između sličnih čvorova s očekivanom frekvencijom pod pretpostavkom nasumičnog formiranja veza. **Indeks homofilije** (ili asortativnost po atributu) mjeri stupanj u kojem čvorovi istog tipa imaju tendenciju povezivanja:

$$H = \frac{e_{ii} - a_i^2}{1 - a_i^2}$$

U ovoj formuli $e_{ii}$ predstavlja udio veza koje povezuju čvorove istog tipa $i$, a $a_i$ je udio čvorova tipa $i$ u mreži. Vrijednost 0 indicira nasumično miješanje, pozitivne vrijednosti indiciraju homofiliju, a negativne vrijednosti indiciraju heterofiliju (tendenciju povezivanja s različitima).

```{r}
#| label: fig-homophily-spectrum
#| fig-cap: "Spektar od heterofitije do homofilije. Lijevo: mreža s heterofilijom gdje se različite skupine pretežno povezuju međusobno. Sredina: nasumično miješanje bez preferencija. Desno: snažna homofilija s izoliranim skupinama."
#| fig-width: 12
#| fig-height: 4

set.seed(42)

create_mixed_network <- function(n_per_group, p_within, p_between) {
  net <- make_empty_graph(n_per_group * 2, directed = FALSE)
  V(net)$group <- rep(c("A", "B"), each = n_per_group)
  
  for (i in 1:(n_per_group-1)) {
    for (j in (i+1):n_per_group) {
      if (runif(1) < p_within) {
        net <- add_edges(net, c(i, j))
      }
    }
  }
  
  for (i in (n_per_group+1):(2*n_per_group-1)) {
    for (j in (i+1):(2*n_per_group)) {
      if (runif(1) < p_within) {
        net <- add_edges(net, c(i, j))
      }
    }
  }
  
  for (i in 1:n_per_group) {
    for (j in (n_per_group+1):(2*n_per_group)) {
      if (runif(1) < p_between) {
        net <- add_edges(net, c(i, j))
      }
    }
  }
  
  return(net)
}

heterophily_net <- create_mixed_network(10, 0.1, 0.4)
random_net <- create_mixed_network(10, 0.25, 0.25)
homophily_net <- create_mixed_network(10, 0.5, 0.05)

V(heterophily_net)$color <- ifelse(V(heterophily_net)$group == "A", "#3498db", "#e74c3c")
V(random_net)$color <- ifelse(V(random_net)$group == "A", "#3498db", "#e74c3c")
V(homophily_net)$color <- ifelse(V(homophily_net)$group == "A", "#3498db", "#e74c3c")

par(mfrow = c(1, 3), mar = c(2, 1, 3, 1))

plot(heterophily_net,
     vertex.size = 15,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray50",
     edge.width = 1.5,
     main = "Heterofilija\n(preferencija različitih)")

plot(random_net,
     vertex.size = 15,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray50",
     edge.width = 1.5,
     main = "Nasumično miješanje\n(bez preferencija)")

plot(homophily_net,
     vertex.size = 15,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray50",
     edge.width = 1.5,
     main = "Homofilija\n(preferencija sličnih)")
```

U istraživanjima masovne komunikacije, homofilija se manifestira na više razina. Na razini pojedinaca, korisnici društvenih mreža tendiraju pratiti i dijeliti sadržaje od korisnika sličnih političkih uvjerenja. Na razini medija, portali slične ideološke orijentacije češće citiraju jedni druge nego portale suprotne orijentacije. Na razini tema, rasprave o kontroverznim pitanjima često se fragmentiraju u odvojene struje koje rijetko komuniciraju. Razumijevanje homofilije ključno je za analizu fenomena poput polarizacije, odječnih komora i selektivne izloženosti informacijama.

```{r}
#| label: tbl-homophily-types
#| tbl-cap: "Tipovi homofilije relevantni za istraživanja masovne komunikacije s primjerima i implikacijama."

homophily_types <- data.frame(
  Dimenzija = c(
    "Politička ideologija",
    "Profesionalna pripadnost",
    "Geografska lokacija",
    "Generacija/dob",
    "Jezična grupa"
  ),
  Manifestacija = c(
    "Praćenje ideološki bliskih izvora",
    "Citiranje unutar struke",
    "Dijeljenje lokalnih vijesti",
    "Platformske preferencije po dobi",
    "Konzumacija medija na materinjem jeziku"
  ),
  Posljedice = c(
    "Odječne komore, polarizacija",
    "Disciplinarna izolacija",
    "Lokalizacija javne sfere",
    "Generacijski jaz u informiranosti",
    "Fragmentacija nacionalne javnosti"
  ),
  Primjer = c(
    "Ljevičari prate ljevičarske portale",
    "Novinari citiraju novinare",
    "Splićani dijele splitske vijesti",
    "Mladi na TikToku, stariji na FB",
    "Manjine prate medije na svom jeziku"
  )
)

kable(homophily_types,
      col.names = c("Dimenzija", "Manifestacija", "Posljedice", "Primjer")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```


## Modularnost i detekcija zajednica

Dok klike zahtijevaju savršenu povezanost, a homofilija opisuje tendencije formiranja veza, **detekcija zajednica** (engl. *community detection*) predstavlja opći problem identificiranja grupa čvorova koje su interno gusto povezane, a međusobno rijetko povezane. Ovaj problem nema jedinstveno rješenje jer sama definicija zajednice nije strogo određena. Različiti algoritmi operacionaliziraju koncept zajednice na različite načine, proizvodećE različite podjele iste mreže.

**Modularnost** (engl. *modularity*) jest mjera kvalitete podjele mreže na zajednice koja uspoređuje promatranu gustoću veza unutar zajednica s očekivanom gustoćom pod pretpostavkom nasumičnog formiranja veza. Formalno, modularnost se definira kao:

$$Q = \frac{1}{2m} \sum_{ij} \left[ A_{ij} - \frac{k_i k_j}{2m} \right] \delta(c_i, c_j)$$

U ovoj formuli $A_{ij}$ je element matrice susjedstva, $k_i$ i $k_j$ su stupnjevi čvorova $i$ i $j$, $m$ je ukupan broj veza, a $\delta(c_i, c_j)$ je Kroneckerova delta koja iznosi 1 ako čvorovi $i$ i $j$ pripadaju istoj zajednici, inače 0. Visoka modularnost (tipično iznad 0.3) indicira jasnu podjelu na zajednice.

```{r}
#| label: fig-community-detection
#| fig-cap: "Primjer detekcije zajednica pomoću Louvain algoritma na sintetičkoj mreži. Različite boje označavaju identificirane zajednice. Vidljiva je jasna modularna struktura s gustim vezama unutar zajednica i rijetkim vezama između njih."
#| fig-width: 10
#| fig-height: 7

set.seed(42)

community_net <- sample_islands(
  islands.n = 4,
  islands.size = 12,
  islands.pin = 0.5,
  n.inter = 4
)

louvain_communities <- cluster_louvain(community_net)

community_colors <- c("#3498db", "#e74c3c", "#2ecc71", "#9b59b6")
V(community_net)$community <- membership(louvain_communities)
V(community_net)$color <- community_colors[V(community_net)$community]

modularity_score <- modularity(louvain_communities)

plot(community_net,
     layout = layout_with_fr,
     vertex.size = 12,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1,
     main = paste0("Detekcija zajednica (Louvain algoritam)\n",
                   "Pronađeno ", max(membership(louvain_communities)), " zajednice, ",
                   "Modularnost Q = ", round(modularity_score, 3)))

legend("bottomleft",
       legend = paste("Zajednica", 1:4),
       fill = community_colors,
       bty = "n",
       title = "Identificirane zajednice")
```

**Louvain algoritam** predstavlja jedan od najpopularnijih pristupa detekciji zajednica zbog svoje učinkovitosti i kvalitete rezultata. Algoritam radi u dvije faze koje se iterativno ponavljaju. U prvoj fazi, svaki čvor započinje kao zasebna zajednica, a zatim se iterativno premješta u zajednicu susjeda koja maksimalno povećava modularnost. U drugoj fazi, identificirane zajednice agregiraju se u super-čvorove, formirajući novu, manju mrežu na kojoj se postupak ponavlja. Algoritam konvergira kada više nije moguće povećati modularnost premještanjem čvorova.

```{r}
#| label: fig-louvain-steps
#| fig-cap: "Konceptualna ilustracija Louvain algoritma. Algoritam iterativno optimizira modularnost premještajući čvorove između zajednica, a zatim agregira zajednice u super-čvorove za sljedeću razinu analize."
#| fig-width: 12
#| fig-height: 4

set.seed(42)

step1_net <- make_graph(~ A-B-C-A, D-E-F-D, G-H-I-G, A-D, D-G)
V(step1_net)$color <- rainbow(9)

step2_net <- make_graph(~ A-B-C-A, D-E-F-D, G-H-I-G, A-D, D-G)
V(step2_net)$color <- c(rep("#3498db", 3), rep("#e74c3c", 3), rep("#2ecc71", 3))

step3_net <- make_graph(~ X-Y-Z, X-Y)
V(step3_net)$color <- c("#3498db", "#e74c3c", "#2ecc71")

par(mfrow = c(1, 3), mar = c(2, 1, 4, 1))

plot(step1_net,
     vertex.size = 30,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1,
     edge.color = "gray40",
     edge.width = 2,
     main = "Korak 1:\nSvaki čvor zasebna zajednica")

plot(step2_net,
     vertex.size = 30,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1,
     edge.color = "gray40",
     edge.width = 2,
     main = "Korak 2:\nOptimizacija modularnosti")

plot(step3_net,
     vertex.size = 50,
     vertex.frame.color = NA,
     vertex.label = c("Z1", "Z2", "Z3"),
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 3,
     main = "Korak 3:\nAgregacija u super-čvorove")
```

```{r}
#| label: fig-community-comparison
#| fig-cap: "Usporedba rezultata različitih algoritama za detekciju zajednica na istoj mreži. Različiti algoritmi mogu proizvesti različite podjele ovisno o svojim pretpostavkama i ciljevima optimizacije."
#| fig-width: 12
#| fig-height: 8

set.seed(42)

comparison_net <- sample_islands(
  islands.n = 3,
  islands.size = 15,
  islands.pin = 0.4,
  n.inter = 6
)

louvain_comm <- cluster_louvain(comparison_net)
walktrap_comm <- cluster_walktrap(comparison_net)
label_prop_comm <- cluster_label_prop(comparison_net)
infomap_comm <- cluster_infomap(comparison_net)

par(mfrow = c(2, 2), mar = c(2, 1, 3, 1))

set.seed(42)
layout_coords <- layout_with_fr(comparison_net)

plot(comparison_net,
     layout = layout_coords,
     vertex.size = 10,
     vertex.color = membership(louvain_comm),
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.4),
     main = paste0("Louvain\nQ = ", round(modularity(louvain_comm), 3),
                   ", ", max(membership(louvain_comm)), " zajednica"))

plot(comparison_net,
     layout = layout_coords,
     vertex.size = 10,
     vertex.color = membership(walktrap_comm),
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.4),
     main = paste0("Walktrap\nQ = ", round(modularity(walktrap_comm), 3),
                   ", ", max(membership(walktrap_comm)), " zajednica"))

plot(comparison_net,
     layout = layout_coords,
     vertex.size = 10,
     vertex.color = membership(label_prop_comm),
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.4),
     main = paste0("Label Propagation\nQ = ", round(modularity(label_prop_comm), 3),
                   ", ", max(membership(label_prop_comm)), " zajednica"))

plot(comparison_net,
     layout = layout_coords,
     vertex.size = 10,
     vertex.color = membership(infomap_comm),
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.4),
     main = paste0("Infomap\nQ = ", round(modularity(infomap_comm), 3),
                   ", ", max(membership(infomap_comm)), " zajednica"))
```

```{r}
#| label: tbl-community-algorithms
#| tbl-cap: "Pregled popularnih algoritama za detekciju zajednica s njihovim karakteristikama i tipičnim primjenama."

community_algorithms <- data.frame(
  Algoritam = c("Louvain", "Walktrap", "Label Propagation", "Infomap", "Girvan-Newman"),
  Princip = c(
    "Pohlepna optimizacija modularnosti",
    "Nasumične šetnje unutar zajednica",
    "Propagacija oznaka među susjedima",
    "Minimizacija duljine opisa toka",
    "Iterativno uklanjanje mostova"
  ),
  Prednosti = c(
    "Brz, skalabilan, dobri rezultati",
    "Teoretski utemeljen, hijerarhijski",
    "Vrlo brz, jednostavan",
    "Hvata tokove informacija",
    "Otkriva hijerarhijsku strukturu"
  ),
  Nedostaci = c(
    "Može propustiti male zajednice",
    "Sporiji za velike mreže",
    "Nedeterministički rezultati",
    "Osjetljiv na parametre",
    "Računalno zahtjevan"
  )
)

kable(community_algorithms,
      col.names = c("Algoritam", "Princip rada", "Prednosti", "Nedostaci")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

U kontekstu istraživanja masovne komunikacije, detekcija zajednica omogućuje mapiranje strukture javne sfere. Analizom mreže dijeljenja vijesti na društvenim mrežama možemo identificirati ideološke skupine, tematske zajednice ili regionalne klastere. Analizom mreže citiranja među medijima možemo otkriti medijske ekosustave i razumjeti kako se grupiraju izvori informacija. Ova saznanja imaju praktične implikacije za razumijevanje fragmentacije javnosti, ciljanje komunikacijskih kampanja i dizajn intervencija protiv dezinformacija.


## Strukturne rupe

Dok se dosadašnja rasprava fokusirala na kohezivne grupe i njihovu unutarnju strukturu, teorija **strukturnih rupa** (engl. *structural holes*), koju je razvio sociolog Ronald Burt, usmjerava pažnju na praznine između grupa i aktere koji ih premošćuju. Strukturna rupa jest odsutnost veze između dvaju čvorova ili klastera koji bi inače bili nepovezani. Akter koji premošćuje strukturnu rupu, povezujući inače nepovezane dijelove mreže, zauzima strateški privilegiranu poziciju koja mu pruža pristup raznolikim informacijama i mogućnost posredovanja između različitih grupa.

Burtova teorija temelji se na ideji da redundantne veze, odnosno veze s čvorovima koji su i sami međusobno povezani, pružaju manje koristi od veza koje premošćuju strukturne rupe. Ako su svi moji prijatelji ujedno i prijatelji jedni s drugima, informacije koje dobijem od bilo kojeg od njih vjerojatno će biti slične jer cirkuliraju unutar iste zatvorene grupe. Nasuprot tome, ako imam prijatelje u različitim, nepovezanim grupama, svaki od njih pruža mi pristup jedinstvenim izvorima informacija.

```{r}
#| label: fig-structural-holes
#| fig-cap: "Ilustracija koncepta strukturnih rupa. Čvor E (označen zlatno) premošćuje strukturnu rupu između dva klastera, zauzimajući posredničku poziciju. Crvene isprekidane linije označavaju potencijalne veze koje bi eliminirale strukturnu rupu."
#| fig-width: 10
#| fig-height: 7

set.seed(42)

sh_net <- graph_from_literal(
  A--B--C--A,
  A--D, B--D, C--D,
  E,
  F--G--H--F,
  F--I, G--I, H--I,
  D--E, E--F
)

V(sh_net)$is_broker <- V(sh_net)$name == "E"
V(sh_net)$cluster <- c(rep(1, 4), 0, rep(2, 4))

node_colors <- case_when(
  V(sh_net)$name == "E" ~ "#f1c40f",
  V(sh_net)$cluster == 1 ~ "#3498db",
  V(sh_net)$cluster == 2 ~ "#e74c3c"
)

layout_sh <- matrix(c(
  -2, 1,
  -1, 2,
  -1, 0,
  -1, 1,
  0, 1,
  1, 1,
  2, 2,
  2, 0,
  1, 1.5
), ncol = 2, byrow = TRUE)

plot(sh_net,
     layout = layout_sh,
     vertex.size = 30,
     vertex.color = node_colors,
     vertex.frame.color = "white",
     vertex.frame.width = 2,
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 2.5,
     main = "Strukturna rupa: E kao posrednik između klastera")

segments(x0 = -0.3, y0 = 0.5, x1 = 0.3, y1 = 0.5, 
         col = "#e74c3c", lty = 2, lwd = 2)
segments(x0 = -0.3, y0 = 1.5, x1 = 0.3, y1 = 1.5, 
         col = "#e74c3c", lty = 2, lwd = 2)

legend("bottomleft",
       legend = c("Posrednik (Broker)", "Klaster 1", "Klaster 2", "Strukturna rupa"),
       col = c("#f1c40f", "#3498db", "#e74c3c", "#e74c3c"),
       pch = c(16, 16, 16, NA),
       lty = c(NA, NA, NA, 2),
       lwd = c(NA, NA, NA, 2),
       bty = "n")
```

Za kvantificiranje pozicije aktera u odnosu na strukturne rupe, Burt je predložio mjeru **ograničenja** (engl. *constraint*) koja mjeri stupanj u kojem su veze aktera redundantne. Nisko ograničenje indicira da akter ima veze prema nepovezanim dijelovima mreže, dok visoko ograničenje indicira da su kontakti aktera međusobno povezani. Formalno, ograničenje čvora $i$ definira se kao:

$$C_i = \sum_j \left( p_{ij} + \sum_q p_{iq} p_{qj} \right)^2$$

gdje $p_{ij}$ predstavlja udio veze s čvorom $j$ u ukupnim vezama čvora $i$. Čvorovi s niskim ograničenjem zauzimaju pozicije brokera koji premošćuju strukturne rupe.

```{r}
#| label: fig-constraint-visualization
#| fig-cap: "Vizualizacija Burtovog ograničenja (constraint) u mreži. Veličina čvora obrnuto je proporcionalna ograničenju - veći čvorovi imaju manje ograničenje i zauzimaju posredničke pozicije. Manji čvorovi imaju visoko ograničenje jer su uklopljeni u kohezivne grupe."
#| fig-width: 10
#| fig-height: 7

set.seed(42)

broker_net <- sample_islands(
  islands.n = 3,
  islands.size = 8,
  islands.pin = 0.6,
  n.inter = 2
)

constraint_values <- constraint(broker_net)

inv_constraint <- 1 / (constraint_values + 0.1)
node_size <- scales::rescale(inv_constraint, to = c(8, 25))

V(broker_net)$constraint <- constraint_values
V(broker_net)$is_broker <- constraint_values < median(constraint_values)

node_colors <- ifelse(V(broker_net)$is_broker, "#f1c40f", "#3498db")

plot(broker_net,
     layout = layout_with_fr,
     vertex.size = node_size,
     vertex.color = node_colors,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1.5,
     main = "Burtovo ograničenje: brokeri (zlatno) vs. uklopljeni čvorovi (plavo)\nVeći čvor = manje ograničenje = više strukturnih rupa")

legend("bottomleft",
       legend = c("Broker (nisko ograničenje)", "Uklopljen čvor (visoko ograničenje)"),
       fill = c("#f1c40f", "#3498db"),
       bty = "n")
```

```{r}
#| label: tbl-constraint-examples
#| tbl-cap: "Primjeri aktera s niskim i visokim ograničenjem u kontekstu medijskih istraživanja i njihove strateške implikacije."

constraint_examples <- data.frame(
  Karakteristika = c(
    "Nisko ograničenje (broker)",
    "Visoko ograničenje (uklopljen)"
  ),
  Pozicija_u_mrezi = c(
    "Povezuje nepovezane grupe",
    "Uklopljen u kohezivnu grupu"
  ),
  Pristup_informacijama = c(
    "Raznolike, neredundantne informacije",
    "Redundantne informacije iz iste grupe"
  ),
  Primjer_u_medijima = c(
    "Novinar s izvorima u različitim sektorima; agregator koji povezuje mainstream i alternativne medije",
    "Novinar koji surađuje samo s kolegama iz iste redakcije; korisnik unutar odječne komore"
  ),
  Strateska_prednost = c(
    "Kontrola toka informacija, pristup raznolikim perspektivama, posrednička moć",
    "Povjerenje i solidarnost unutar grupe, ali ograničen pristup novim informacijama"
  )
)

kable(constraint_examples,
      col.names = c("Karakteristika", "Pozicija u mreži", "Pristup informacijama", 
                    "Primjer u medijima", "Strateška prednost/nedostatak")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

U kontekstu istraživanja masovne komunikacije, teorija strukturnih rupa ima značajne implikacije. Novinari ili mediji koji premošćuju strukturne rupe imaju pristup raznolikijim izvorima i mogu posredovati između različitih segmenata javnosti. Influenceri koji povezuju ideološki različite zajednice igraju ključnu ulogu u potencijalnom premošćivanju polarizacije. S druge strane, identificiranje strukturnih rupa može pomoći u razumijevanju zašto određene informacije ne cirkuliraju između grupa i kako bi intervencije mogle poboljšati protok informacija.

```{r}
#| label: fig-groups-summary
#| fig-cap: "Sažetak ključnih koncepata grupne strukture mreža. Od najstrožih (klike) do najopćenitijih (zajednice), različiti koncepti hvataju različite aspekte grupiranja u mrežama."
#| fig-width: 12
#| fig-height: 4

par(mfrow = c(1, 4), mar = c(2, 1, 4, 1))

clique_demo <- make_full_graph(5)
plot(clique_demo,
     vertex.size = 25,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "#3498db",
     edge.width = 2,
     main = "KLIKA\nPotpuna povezanost")

set.seed(1)
homophily_demo <- graph_from_literal(A-B-C-A, D-E-F-D, A-D)
V(homophily_demo)$color <- c(rep("#3498db", 3), rep("#e74c3c", 3))
plot(homophily_demo,
     vertex.size = 25,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray40",
     edge.width = 2,
     main = "HOMOFILIJA\nSličnost privlači")

set.seed(1)
community_demo <- sample_islands(2, 5, 0.7, 1)
comm <- cluster_louvain(community_demo)
plot(community_demo,
     vertex.size = 18,
     vertex.color = membership(comm),
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray40",
     edge.width = 1.5,
     main = "ZAJEDNICE\nModularna struktura")

broker_demo <- graph_from_literal(A-B-C-A, D-E-F-D, B-X-E)
V(broker_demo)$color <- c(rep("#3498db", 3), rep("#e74c3c", 3), "#f1c40f")
plot(broker_demo,
     vertex.size = 25,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = "gray40",
     edge.width = 2,
     main = "STRUKTURNE RUPE\nBrokeri i praznine")
```

Razumijevanje grupne strukture mreža pruža temelj za sofisticirane analize komunikacijskih fenomena. Identificiranje klika otkriva najuže krugove intenzivne suradnje. Mjerenje homofilije kvantificira tendencije formiranja veza po sličnosti. Detekcija zajednica mapira globalnu strukturu javne sfere. Analiza strukturnih rupa identificira ključne posrednike koji kontroliraju tokove informacija. Zajedno, ovi koncepti čine bogat analitički arsenal za razumijevanje kako su komunikacijske mreže strukturirane i kakve su posljedice te strukture za procese poput širenja informacija, formiranja javnog mnijenja i fragmentacije diskursa.

# Vizualizacija mreža

Vizualizacija predstavlja jedan od najsnažnijih aspekata analize društvenih mreža. Za razliku od tradicionalnih statističkih pristupa koji reduciraju složene strukture na numeričke pokazatelje, mrežna vizualizacija omogućuje istraživaču da doslovno vidi strukturu odnosa, identificira obrasce, uoči anomalije i komunicira nalaze na intuitivan način. Dobra vizualizacija može otkriti strukturne karakteristike koje bi ostale skrivene u tablicama brojeva, poput postojanja klastera, identificiranja centralnih aktera ili otkrivanja mostova između zajednica. Međutim, vizualizacija mreža daleko je od trivijalne zadaće. Smještanje desetaka, stotina ili tisuća čvorova i njihovih veza u dvodimenzionalni prostor na način koji je informativan, čitljiv i estetski ugodan predstavlja značajan tehnički i konceptualni izazov.

U ovom poglavlju razmatramo temeljne principe i praktične aspekte vizualizacije mreža. Započinjemo algoritmima rasporeda koji određuju položaje čvorova u prostoru, s posebnim fokusom na pristupe temeljene na silama koji dominiraju suvremenom praksom. Potom analiziramo problem preopterećenosti, poznat kao efekt dlakave lopte, koji nastaje kada mreža postane prevelika ili pregusta za smislenu vizualizaciju. Zaključujemo pregledom softverskih alata koji stoje na raspolaganju istraživačima, od specijaliziranih programa poput Gephija do analitičkih okruženja poput R-a.

```{r}
#| label: setup-section6
#| include: false

library(igraph)
library(ggraph)
library(tidygraph)
library(ggplot2)
library(dplyr)
library(tidyr)
library(knitr)
library(kableExtra)

theme_set(theme_minimal(base_size = 12))
```


## Algoritmi rasporeda

Problem rasporeda mreže (engl. *graph layout*) svodi se na pitanje kako dodijeliti koordinate svakom čvoru u dvodimenzionalnom (ili trodimenzionalnom) prostoru tako da rezultirajuća vizualizacija bude informativna i čitljiva. Budući da mreža sama po sebi ne sadrži prostorne informacije, odnosno čvorovi nemaju inherentne koordinate, algoritam rasporeda mora te koordinate konstruirati na temelju topoloških svojstava mreže. Idealan raspored trebao bi smjestiti blisko povezane čvorove blizu jedni drugima, jasno razdvojiti različite klastere, minimizirati preklapanje veza i stvoriti vizualno uravnoteženu sliku.

Najutjecajnija obitelj algoritama za raspored mreža temelji se na **fizikalnoj analogiji sila** (engl. *force-directed layout*). Ovi algoritmi tretiraju mrežu kao fizički sustav u kojem čvorovi djeluju poput nabijenih čestica koje se međusobno odbijaju, dok veze djeluju poput opruga koje privlače povezane čvorove. Sustav se iterativno simulira dok ne dosegne ravnotežno stanje u kojem se privlačne i odbojne sile uravnotežuju. Rezultat je raspored u kojem su povezani čvorovi blizu, nepovezani čvorovi daleko, a cjelokupna struktura poprima organski, ravnotežni izgled.

```{r}
#| label: fig-force-directed-concept
#| fig-cap: "Konceptualna ilustracija algoritma temeljenog na silama. Veze djeluju kao opruge koje privlače povezane čvorove (zelene strelice), dok se svi parovi čvorova međusobno odbijaju poput istoimenih naboja (crvene strelice). Iterativna simulacija vodi prema ravnotežnom stanju."
#| fig-width: 10
#| fig-height: 5

set.seed(42)

par(mfrow = c(1, 2), mar = c(2, 1, 3, 1))

demo_net <- graph_from_literal(A--B--C--A, B--D)

initial_coords <- matrix(c(
  0.2, 0.5,
  0.4, 0.3,
  0.6, 0.7,
  0.8, 0.4
), ncol = 2, byrow = TRUE)

plot(demo_net,
     layout = initial_coords,
     vertex.size = 35,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1.3,
     edge.color = "gray40",
     edge.width = 3,
     main = "Početno stanje:\nNasumični položaji")

arrows(0.25, 0.48, 0.35, 0.35, col = "#27ae60", lwd = 2, length = 0.1)
arrows(0.55, 0.65, 0.45, 0.38, col = "#27ae60", lwd = 2, length = 0.1)
arrows(0.3, 0.4, 0.15, 0.55, col = "#e74c3c", lwd = 1.5, length = 0.08)
arrows(0.7, 0.6, 0.85, 0.45, col = "#e74c3c", lwd = 1.5, length = 0.08)

final_coords <- layout_with_fr(demo_net)
final_coords <- scales::rescale(final_coords, to = c(0.2, 0.8))

plot(demo_net,
     layout = final_coords,
     vertex.size = 35,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1.3,
     edge.color = "gray40",
     edge.width = 3,
     main = "Ravnotežno stanje:\nSile uravnotežene")
```

Najpopularniji algoritam temeljen na silama jest **Fruchterman-Reingold** algoritam koji kombinira privlačne sile proporcionalne udaljenosti povezanih čvorova s odbojnim silama obrnuto proporcionalnim kvadratu udaljenosti svih parova čvorova. Matematički, privlačna sila između povezanih čvorova $u$ i $v$ definira se kao:

$$f_a(d) = \frac{d^2}{k}$$

dok se odbojna sila između bilo koja dva čvora definira kao:

$$f_r(d) = -\frac{k^2}{d}$$

U ovim formulama $d$ označava udaljenost između čvorova, a $k$ je parametar koji kontrolira idealnu udaljenost i ovisi o veličini prostora i broju čvorova. Algoritam iterativno pomiče čvorove u smjeru rezultantne sile, postupno smanjujući veličinu pomaka (temperaturu) dok sustav ne konvergira.

```{r}
#| label: fig-layout-comparison
#| fig-cap: "Usporedba različitih algoritama rasporeda na istoj mreži od 40 čvorova. Svaki algoritam proizvodi karakterističan raspored ovisno o svojim principima optimizacije. Fruchterman-Reingold i Kamada-Kawai su algoritmi temeljeni na silama, kružni i zvjezdasti su geometrijski rasporedi."
#| fig-width: 12
#| fig-height: 10

set.seed(42)

comparison_net <- sample_islands(
  islands.n = 3,
  islands.size = 12,
  islands.pin = 0.4,
  n.inter = 3
)

communities <- cluster_louvain(comparison_net)
V(comparison_net)$community <- membership(communities)

par(mfrow = c(2, 3), mar = c(1, 1, 3, 1))

plot(comparison_net,
     layout = layout_with_fr,
     vertex.size = 10,
     vertex.color = V(comparison_net)$community,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1,
     main = "Fruchterman-Reingold\n(force-directed)")

plot(comparison_net,
     layout = layout_with_kk,
     vertex.size = 10,
     vertex.color = V(comparison_net)$community,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1,
     main = "Kamada-Kawai\n(force-directed)")

plot(comparison_net,
     layout = layout_with_drl,
     vertex.size = 10,
     vertex.color = V(comparison_net)$community,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1,
     main = "DrL (Distributed Recursive)\n(za velike mreže)")

plot(comparison_net,
     layout = layout_in_circle,
     vertex.size = 10,
     vertex.color = V(comparison_net)$community,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1,
     main = "Kružni raspored\n(geometrijski)")

plot(comparison_net,
     layout = layout_as_star,
     vertex.size = 10,
     vertex.color = V(comparison_net)$community,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1,
     main = "Zvjezdasti raspored\n(geometrijski)")

plot(comparison_net,
     layout = layout_with_graphopt,
     vertex.size = 10,
     vertex.color = V(comparison_net)$community,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1,
     main = "GraphOpt\n(force-directed, brži)")
```

Alternativni algoritam temeljen na silama jest **Kamada-Kawai** koji definira idealnu udaljenost između svaka dva čvora kao proporcionalnu njihovoj grafovskoj udaljenosti (najkraćem putu). Algoritam zatim minimizira ukupnu energiju sustava definiranu kao suma kvadrata odstupanja stvarnih udaljenosti od idealnih. Ovaj pristup često proizvodi simetričnije rasporede, ali može biti računalno zahtjevniji za veće mreže.

Za vrlo velike mreže s desecima tisuća čvorova razvijeni su specijalizirani algoritmi poput **OpenOrd** (poznat i kao DrL) koji koristi višerazinsku dekompoziciju i paralelno procesiranje za učinkovito raspoređivanje masivnih mreža. Ovi algoritmi žrtvuju preciznost lokalnog rasporeda u korist globalne strukture i računalne učinkovitosti.

```{r}
#| label: tbl-layout-algorithms
#| tbl-cap: "Pregled popularnih algoritama rasporeda s njihovim karakteristikama i preporučenim primjenama."

layout_algorithms <- data.frame(
  Algoritam = c(
    "Fruchterman-Reingold",
    "Kamada-Kawai",
    "DrL / OpenOrd",
    "ForceAtlas2",
    "Kružni",
    "Hijerarhijski"
  ),
  Princip = c(
    "Privlačne i odbojne sile",
    "Minimizacija energije opruga",
    "Višerazinska dekompozicija",
    "Prilagođene sile za vizualizaciju",
    "Geometrijski, fiksni krug",
    "Rangiranje po razinama"
  ),
  Velicina_mreze = c(
    "Do nekoliko tisuća",
    "Do tisuću",
    "Deseci tisuća",
    "Tisuće do deseci tisuća",
    "Bilo koja",
    "Do nekoliko stotina"
  ),
  Prednosti = c(
    "Dobar opći izbor, intuitivni rezultati",
    "Simetrični rasporedi, teorijski utemeljen",
    "Skalabilnost, brzina",
    "Čitljivo razdvajanje klastera",
    "Deterministički, jednostavan",
    "Pokazuje tokove i hijerarhije"
  )
)

kable(layout_algorithms,
      col.names = c("Algoritam", "Princip", "Optimalna veličina", "Prednosti")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Važno je naglasiti da algoritmi temeljeni na silama imaju stohastičku komponentu jer obično započinju s nasumičnim početnim položajima čvorova. To znači da će svako pokretanje algoritma potencijalno proizvesti različit raspored iste mreže. Iako će strukturne karakteristike poput klastera biti konzistentno prikazane, točni položaji čvorova variraju. Za reproducibilnost rezultata nužno je fiksirati sjeme generatora slučajnih brojeva prije pokretanja algoritma.

```{r}
#| label: fig-seed-importance
#| fig-cap: "Ista mreža vizualizirana s različitim sjemenima generatora slučajnih brojeva. Iako globalna struktura ostaje prepoznatljiva, konkretni položaji čvorova značajno variraju. Za reproducibilnost je nužno dokumentirati korišteno sjeme."
#| fig-width: 12
#| fig-height: 4

demo_net2 <- sample_islands(islands.n = 2, islands.size = 10, islands.pin = 0.5, n.inter = 2)
V(demo_net2)$community <- rep(c(1, 2), each = 10)

par(mfrow = c(1, 4), mar = c(1, 1, 3, 1))

for (seed in c(1, 42, 123, 999)) {
  set.seed(seed)
  plot(demo_net2,
       layout = layout_with_fr,
       vertex.size = 12,
       vertex.color = V(demo_net2)$community + 1,
       vertex.frame.color = NA,
       vertex.label = NA,
       edge.color = adjustcolor("gray50", alpha = 0.5),
       edge.width = 1,
       main = paste0("Sjeme = ", seed))
}
```


## Problem dlakave lopte

Kako broj čvorova i veza u mreži raste, vizualizacija postaje sve izazovnija. U određenoj točki, čak i najbolji algoritmi rasporeda proizvode sliku koja nalikuje spletenoj lopti od dlaka, nečitljivu masu preklapajućih čvorova i veza iz koje je nemoguće izvući smislene informacije. Ovaj fenomen naziva se **efekt dlakave lopte** (engl. *hairball effect*) i predstavlja fundamentalno ograničenje mrežne vizualizacije.

Efekt dlakave lopte nastaje zbog kombinacije nekoliko faktora. S porastom broja čvorova, prostor za njihov smještaj postaje sve ograničeniji, što dovodi do preklapanja. Istovremeno, broj veza tipično raste brže od broja čvorova (posebno u mrežama s visokim klasteriranjem), što rezultira gustim prepletom linija koje zamagljuju strukturu. Konačno, ljudska percepcija ima ograničenu sposobnost procesiranja složenih vizualnih podražaja, pa čak i savršeno raspoređena mreža s tisućama elemenata nadmašuje naše kognitivne kapacitete.

```{r}
#| label: fig-hairball-progression
#| fig-cap: "Progresija od čitljive do nečitljive vizualizacije s porastom veličine mreže. Mreža od 30 čvorova jasno pokazuje strukturu, mreža od 100 čvorova postaje gušća, mreža od 300 čvorova ulazi u zonu dlakave lopte, a mreža od 1000 čvorova potpuno je nečitljiva."
#| fig-width: 12
#| fig-height: 8

par(mfrow = c(2, 2), mar = c(1, 1, 3, 1))

set.seed(42)
net_30 <- barabasi.game(30, m = 2, directed = FALSE)
plot(net_30,
     layout = layout_with_fr,
     vertex.size = 8,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.6),
     edge.width = 1,
     main = "n = 30 čvorova\nStruktura jasno vidljiva")

set.seed(42)
net_100 <- barabasi.game(100, m = 2, directed = FALSE)
plot(net_100,
     layout = layout_with_fr,
     vertex.size = 5,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.4),
     edge.width = 0.5,
     main = "n = 100 čvorova\nStruktura još prepoznatljiva")

set.seed(42)
net_300 <- barabasi.game(300, m = 2, directed = FALSE)
plot(net_300,
     layout = layout_with_fr,
     vertex.size = 3,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.2),
     edge.width = 0.3,
     main = "n = 300 čvorova\nPočetak efekta dlakave lopte")

set.seed(42)
net_1000 <- barabasi.game(1000, m = 2, directed = FALSE)
plot(net_1000,
     layout = layout_with_fr,
     vertex.size = 1.5,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.1),
     edge.width = 0.2,
     main = "n = 1000 čvorova\nPotpuna dlakava lopta")
```

Postoji niz strategija za suočavanje s efektom dlakave lopte. Prva strategija jest **filtriranje** mreže uklanjanjem manje važnih čvorova ili veza. Na primjer, možemo zadržati samo čvorove s visokom centralnošću ili veze iznad određenog praga težine. Ova strategija reducira složenost ali zahtijeva oprez jer filtriranje može ukloniti važne strukturne karakteristike.

```{r}
#| label: fig-filtering-strategy
#| fig-cap: "Strategija filtriranja za smanjenje efekta dlakave lopte. Lijevo: originalna mreža od 200 čvorova. Desno: filtrirana mreža koja prikazuje samo čvorove s više od 5 veza. Filtriranje otkriva strukturu hubova koja je bila skrivena u originalnoj vizualizaciji."
#| fig-width: 12
#| fig-height: 5

set.seed(42)
filter_net <- barabasi.game(200, m = 2, directed = FALSE)
V(filter_net)$degree <- degree(filter_net)

par(mfrow = c(1, 2), mar = c(1, 1, 3, 1))

plot(filter_net,
     layout = layout_with_fr,
     vertex.size = 3,
     vertex.color = "#3498db",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.2),
     edge.width = 0.3,
     main = "Originalna mreža (n = 200)\nStruktura skrivena")

high_degree_nodes <- which(V(filter_net)$degree > 5)
filtered_net <- induced_subgraph(filter_net, high_degree_nodes)

set.seed(42)
plot(filtered_net,
     layout = layout_with_fr,
     vertex.size = sqrt(degree(filtered_net)) * 2,
     vertex.color = "#e74c3c",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.5),
     edge.width = 1,
     main = paste0("Filtrirano (stupanj > 5, n = ", vcount(filtered_net), ")\nHubovi jasno vidljivi"))
```

Druga strategija jest **agregacija** čvorova u veće jedinice. Umjesto prikazivanja svakog pojedinačnog čvora, možemo grupirati čvorove u zajednice i prikazati mrežu zajednica. Svaka zajednica postaje jedan super-čvor čija veličina odražava broj članova, a veze između super-čvorova odražavaju gustoću veza između odgovarajućih zajednica.

```{r}
#| label: fig-aggregation-strategy
#| fig-cap: "Strategija agregacije za smanjenje složenosti. Lijevo: originalna mreža s označenim zajednicama. Desno: agregirana mreža gdje svaka zajednica postaje jedan čvor. Veličina čvora proporcionalna je broju članova zajednice, a debljina veze broju međuzajedničkih veza."
#| fig-width: 12
#| fig-height: 5

set.seed(42)
agg_net <- sample_islands(islands.n = 5, islands.size = 20, islands.pin = 0.4, n.inter = 8)
communities <- cluster_louvain(agg_net)
V(agg_net)$community <- membership(communities)

par(mfrow = c(1, 2), mar = c(1, 1, 3, 1))

community_colors <- c("#3498db", "#e74c3c", "#2ecc71", "#9b59b6", "#f39c12")
V(agg_net)$color <- community_colors[V(agg_net)$community]

set.seed(42)
plot(agg_net,
     layout = layout_with_fr,
     vertex.size = 5,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.3),
     edge.width = 0.5,
     main = "Originalna mreža (n = 100)\nS označenim zajednicama")

contracted_net <- contract(agg_net, V(agg_net)$community, vertex.attr.comb = list(
  community = "first",
  color = "first",
  "ignore"
))
contracted_net <- simplify(contracted_net, remove.multiple = TRUE, remove.loops = TRUE,
                           edge.attr.comb = list(weight = "sum", "ignore"))

community_sizes <- table(V(agg_net)$community)
V(contracted_net)$size <- as.numeric(community_sizes)
V(contracted_net)$color <- community_colors[1:5]

plot(contracted_net,
     layout = layout_with_fr,
     vertex.size = sqrt(V(contracted_net)$size) * 5,
     vertex.frame.color = "white",
     vertex.frame.width = 2,
     vertex.label = paste0("Z", 1:5, "\n(", V(contracted_net)$size, ")"),
     vertex.label.color = "white",
     vertex.label.cex = 0.9,
     edge.color = "gray40",
     edge.width = 2,
     main = "Agregirana mreža zajednica\nJasna makro-struktura")
```

Treća strategija jest korištenje **interaktivnih vizualizacija** koje omogućuju korisniku zumiranje, pomicanje i filtriranje u stvarnom vremenu. Interaktivna vizualizacija može prikazati globalnu strukturu na udaljenoj razini zumiranja, a zatim omogućiti detaljno istraživanje pojedinih regija. Ova strategija zahtijeva specijalizirane alate koji podržavaju interaktivnost.

```{r}
#| label: tbl-hairball-solutions
#| tbl-cap: "Strategije za suočavanje s efektom dlakave lopte s njihovim prednostima i ograničenjima."

hairball_solutions <- data.frame(
  Strategija = c(
    "Filtriranje čvorova",
    "Filtriranje veza",
    "Agregacija u zajednice",
    "Uzorkovanje",
    "Interaktivna vizualizacija",
    "Višerazinska vizualizacija"
  ),
  Opis = c(
    "Zadržavanje samo visoko centralnih čvorova",
    "Zadržavanje samo jakih veza (iznad praga)",
    "Grupiranje čvorova u super-čvorove",
    "Nasumični uzorak čvorova i njihovih veza",
    "Zumiranje, filtriranje u stvarnom vremenu",
    "Različite razine detalja za različite skale"
  ),
  Prednosti = c(
    "Otkriva ključne aktere",
    "Naglašava jake odnose",
    "Pokazuje makro-strukturu",
    "Jednostavno za implementaciju",
    "Fleksibilno istraživanje",
    "Kombinira pregled i detalje"
  ),
  Ogranicenja = c(
    "Gubi periferne čvorove",
    "Može ukloniti važne slabe veze",
    "Skriva unutarzajedničku strukturu",
    "Može propustiti važne dijelove",
    "Zahtijeva specijalizirane alate",
    "Složeno za implementaciju"
  )
)

kable(hairball_solutions,
      col.names = c("Strategija", "Opis", "Prednosti", "Ograničenja")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Četvrta strategija uključuje **vizualno kodiranje** dodatnih informacija kroz veličinu, boju i oblik čvorova. Čak i u gustoj mreži, čvorovi kodirani bojom prema zajednici ili veličinom prema centralnosti mogu prenijeti strukturne informacije bez potrebe za čitanjem individualnih veza.

```{r}
#| label: fig-visual-encoding
#| fig-cap: "Vizualno kodiranje kao strategija za povećanje čitljivosti. Ista mreža prikazana bez kodiranja (lijevo) i s kodiranjem veličine prema stupnju te boje prema zajednici (desno). Kodiranje omogućuje prepoznavanje strukture čak i bez čitanja pojedinačnih veza."
#| fig-width: 12
#| fig-height: 5

set.seed(42)
encoding_net <- barabasi.game(150, m = 2, directed = FALSE)
communities <- cluster_louvain(encoding_net)
V(encoding_net)$community <- membership(communities)
V(encoding_net)$degree <- degree(encoding_net)

par(mfrow = c(1, 2), mar = c(1, 1, 3, 1))

set.seed(42)
layout_coords <- layout_with_fr(encoding_net)

plot(encoding_net,
     layout = layout_coords,
     vertex.size = 4,
     vertex.color = "gray50",
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.15),
     edge.width = 0.3,
     main = "Bez vizualnog kodiranja\nStruktura nejasna")

community_colors <- c("#3498db", "#e74c3c", "#2ecc71", "#9b59b6", "#f39c12", 
                      "#1abc9c", "#e67e22", "#34495e")
V(encoding_net)$color <- community_colors[V(encoding_net)$community]

plot(encoding_net,
     layout = layout_coords,
     vertex.size = sqrt(V(encoding_net)$degree) * 2,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray40", alpha = 0.15),
     edge.width = 0.3,
     main = "S vizualnim kodiranjem\nZajednice i hubovi vidljivi")
```


## Alati za vizualizaciju

Istraživačima masovne komunikacije na raspolaganju stoji niz softverskih alata za vizualizaciju i analizu mreža. Svaki alat ima svoje prednosti i ograničenja, a izbor ovisi o veličini mreže, potrebnim analizama, razini tehničke ekspertize i zahtjevima za kvalitetom vizualnog outputa.

**Gephi** predstavlja vjerojatno najpopularniji samostalni softver za vizualizaciju mreža. Kao besplatni program otvorenog koda, Gephi nudi intuitivno grafičko sučelje koje omogućuje istraživačima bez programerskog iskustva da učitaju, vizualiziraju i analiziraju mreže. Program podržava veliki broj formata za učitavanje podataka, implementira sve standardne mjere centralnosti i algoritme za detekciju zajednica, te nudi sofisticirane algoritme rasporeda uključujući ForceAtlas2 koji je posebno dizajniran za čitljivu vizualizaciju. Gephi također podržava interaktivno istraživanje mreže, vremensku dinamiku i izvoz visokokvalitetnih vizualizacija za publikacije.

**UCINET** (University of California at Irvine NETwork) jest komercijalni softver s dugom tradicijom u analizi društvenih mreža, posebno popularan među sociolozima. UCINET nudi opsežan skup statističkih analiza i integrira se s programom **NetDraw** za vizualizaciju. Iako sučelje može djelovati zastarjelo u usporedbi s modernijim alatima, UCINET ostaje referentni alat za mnoge napredne mrežne analize i koristi se kao standard u akademskoj literaturi.

**R** s paketima poput **igraph**, **ggraph**, **tidygraph** i **statnet** nudi programatičan pristup mrežnoj analizi. Prednost R okruženja jest potpuna reproducibilnost analiza, fleksibilnost u prilagodbi vizualizacija i integracija s širim ekosustavam statističkih metoda. Nedostatak jest potreba za programerskim vještinama i strmija krivulja učenja u usporedbi s alatima s grafičkim sučeljem.

```{r}
#| label: fig-ggraph-demo
#| fig-cap: "Primjer sofisticirane vizualizacije mreže kreirane u R-u pomoću paketa ggraph. Paket omogućuje primjenu gramatike grafike na mrežne podatke, nudeći veliku fleksibilnost u dizajnu vizualizacija."
#| fig-width: 10
#| fig-height: 8

set.seed(42)

demo_data <- sample_islands(islands.n = 4, islands.size = 15, islands.pin = 0.35, n.inter = 4) |>
  as_tbl_graph() |>
  mutate(
    name = paste0("N", row_number()),
    community = as.factor(group_louvain()),
    centrality = centrality_degree(),
    betweenness = centrality_betweenness()
  )

ggraph(demo_data, layout = "fr") +
  geom_edge_link(alpha = 0.2, color = "gray50") +
  geom_node_point(aes(size = centrality, color = community), alpha = 0.8) +
  geom_node_text(aes(label = ifelse(centrality > quantile(centrality, 0.9), name, "")),
                 repel = TRUE, size = 3) +
  scale_size_continuous(range = c(2, 10), name = "Stupanj") +
  scale_color_brewer(palette = "Set1", name = "Zajednica") +
  labs(
    title = "Mrežna vizualizacija s ggraph paketom",
    subtitle = "Veličina čvora prema stupnju, boja prema zajednici, označeni visoko centralni čvorovi"
  ) +
  theme_graph() +
  theme(legend.position = "bottom")
```

**Python** s bibliotekama **NetworkX**, **graph-tool** i **pyvis** nudi sličnu programatičnu fleksibilnost kao R. NetworkX je posebno popularan zbog jednostavnosti korištenja i dobre dokumentacije, dok graph-tool nudi superiorne performanse za vrlo velike mreže.

Za interaktivnu vizualizaciju u web preglednicima, biblioteke poput **D3.js**, **Sigma.js** i **Cytoscape.js** omogućuju kreiranje dinamičnih, zumabilnih vizualizacija koje se mogu ugraditi u web stranice i aplikacije. Ovi alati posebno su korisni za prezentaciju rezultata široj publici ili za istraživačke alate koji zahtijevaju interaktivnost.

```{r}
#| label: tbl-tools-comparison
#| tbl-cap: "Usporedba popularnih alata za mrežnu analizu i vizualizaciju s preporukama za različite profile korisnika."

tools_comparison <- data.frame(
  Alat = c(
    "Gephi",
    "UCINET + NetDraw",
    "R (igraph, ggraph)",
    "Python (NetworkX)",
    "NodeXL",
    "Cytoscape"
  ),
  Tip = c(
    "Samostalni program",
    "Samostalni program",
    "Programski jezik",
    "Programski jezik",
    "Excel dodatak",
    "Samostalni program"
  ),
  Cijena = c(
    "Besplatan",
    "Komercijalan",
    "Besplatan",
    "Besplatan",
    "Freemium",
    "Besplatan"
  ),
  Prednosti = c(
    "Intuitivno sučelje, interaktivnost, ForceAtlas2",
    "Opsežne analize, akademski standard",
    "Reproducibilnost, fleksibilnost, integracija",
    "Jednostavnost, velika zajednica",
    "Integracija s Excelom, pristupačnost",
    "Biološke mreže, dodaci"
  ),
  Preporuceno_za = c(
    "Istraživanje i prezentaciju",
    "Akademsku analizu",
    "Napredne korisnike, reproducibilnost",
    "Programere, brze prototipe",
    "Početnike, manje mreže",
    "Bioinformatiku"
  )
)

kable(tools_comparison,
      col.names = c("Alat", "Tip", "Cijena", "Prednosti", "Preporučeno za")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Izbor alata ovisi o specifičnim potrebama istraživanja. Za brzo istraživačko vizualiziranje i prezentaciju rezultata, Gephi nudi najbolji omjer jednostavnosti i mogućnosti. Za rigorozne akademske analize koje zahtijevaju reproducibilnost, R ili Python pružaju programatičnu kontrolu nad svakim korakom analize. Za specifične domene poput bioinformatike, specijalizirani alati poput Cytoscapea nude prilagođenu funkcionalnost. Za interaktivne web prezentacije, JavaScript biblioteke omogućuju ugradnju dinamičnih vizualizacija u digitalne publikacije.

```{r}
#| label: fig-export-quality
#| fig-cap: "Primjer vizualizacije visoke kvalitete pogodne za publikaciju. Pažljivo odabrani parametri uključuju minimalističku estetiku, jasno čitljive oznake za ključne čvorove i legendu koja objašnjava kodiranje."
#| fig-width: 10
#| fig-height: 8

set.seed(42)

publication_net <- sample_islands(islands.n = 3, islands.size = 12, islands.pin = 0.4, n.inter = 3) |>
  as_tbl_graph() |>
  mutate(
    community = as.factor(group_louvain()),
    degree = centrality_degree(),
    is_hub = degree > quantile(degree, 0.85)
  )

hub_names <- c("Portal A", "Influencer", "Novinar", "Agencija", "TV kuća")
node_count <- publication_net |> as_tibble() |> nrow()

publication_net <- publication_net |>
  mutate(
    label = ifelse(is_hub, hub_names[cumsum(is_hub)], "")
  )

ggraph(publication_net, layout = "fr") +
  geom_edge_link(alpha = 0.15, color = "gray60", width = 0.5) +
  geom_node_point(aes(size = degree, fill = community), shape = 21, color = "white", stroke = 0.5) +
  geom_node_text(aes(label = label), repel = TRUE, size = 3.5, fontface = "bold",
                 box.padding = 0.5, point.padding = 0.3) +
  scale_size_continuous(range = c(3, 12), name = "Broj veza", breaks = c(5, 10, 15)) +
  scale_fill_manual(values = c("#2c3e50", "#e74c3c", "#27ae60"), name = "Zajednica",
                    labels = c("Mainstream mediji", "Alternativni portali", "Društvene mreže")) +
  labs(
    title = "Mreža dijeljenja vijesti u hrvatskom medijskom prostoru",
    subtitle = "Hipotetski primjer za ilustraciju kvalitete vizualizacije",
    caption = "Izvor: Hipotetski podaci | Vizualizacija: R/ggraph"
  ) +
  theme_graph(base_family = "sans") +
  theme(
    legend.position = "right",
    legend.box = "vertical",
    plot.title = element_text(size = 14, face = "bold"),
    plot.subtitle = element_text(size = 11, color = "gray40"),
    plot.caption = element_text(size = 9, color = "gray50")
  )
```

Vizualizacija mreža ostaje koliko umjetnost toliko i znanost. Tehnička kompetencija u korištenju algoritama i alata nužna je, ali nije dovoljna. Učinkovita vizualizacija zahtijeva razumijevanje principa vizualne percepcije, pažljiv odabir vizualnih varijabli i iterativno dotjerivanje dok vizualizacija ne komunicira željenu poruku. Istraživač mora balansirati između vjernosti podacima i čitljivosti prikaza, između detalja i pregleda, između estetike i informativnosti. Ovladavanje ovim balansima dolazi s iskustvom i kritičkim promišljanjem o tome što vizualizacija treba postići i za koju publiku je namijenjena.

# Metodološki problemi i ograničenja

Analiza društvenih mreža pruža moćan konceptualni i metodološki aparat za razumijevanje relacijskih fenomena, no kao i svaka istraživačka metoda, suočava se s nizom izazova koji mogu ugroziti valjanost i pouzdanost nalaza. Istraživači koji primjenjuju mrežnu analizu moraju biti svjesni ovih ograničenja i aktivno ih adresirati u dizajnu istraživanja, prikupljanju podataka i interpretaciji rezultata. Ignoriranje metodoloških problema može dovesti do pristrane slike mrežne strukture, pogrešnih zaključaka o odnosima među akterima i neopravdanih generalizacija.

U ovom zaključnom poglavlju razmatramo tri ključna metodološka izazova s kojima se suočavaju istraživači mreža u kontekstu masovne komunikacije. Problem granica odnosi se na pitanje kako definirati koje aktere i veze uključiti u analizu, odluku koja fundamentalno oblikuje sve naknadne nalaze. Problem nedostajućih podataka proizlazi iz činjenice da rijetko imamo potpune informacije o svim vezama u mreži, a nedostajući podaci mogu značajno iskriviti izračunate mjere. Etički izazovi odnose se na tenziju između znanstvene transparentnosti i zaštite privatnosti sudionika, posebno akutnu u mrežnim podacima gdje anonimizacija individualnih čvorova ne garantira zaštitu identiteta.

```{r}
#| label: setup-section7
#| include: false

library(igraph)
library(ggraph)
library(tidygraph)
library(ggplot2)
library(dplyr)
library(tidyr)
library(knitr)
library(kableExtra)

theme_set(theme_minimal(base_size = 12))
```


## Problem granica

Svaka mrežna analiza započinje fundamentalnom odlukom: koji akteri i koje veze čine mrežu koju proučavamo? Ova naizgled jednostavna pitanja kriju duboke konceptualne i praktične izazove poznate kao **problem granica** (engl. *boundary specification problem*). Za razliku od tradicionalnih istraživanja gdje uzorak možemo definirati prema jasnim kriterijima pripadnosti populaciji, mrežne granice često su nejasne, propusne i ovisne o arbitrarnim odlukama istraživača.

Problem granica manifestira se na dvije razine. **Realistička** perspektiva pretpostavlja da mreža ima objektivne granice koje istraživač treba otkriti, poput formalne pripadnosti organizaciji ili geografskog područja. **Nominalistička** perspektiva priznaje da su granice konstrukt koji istraživač nameće podacima prema teorijskim ili praktičnim kriterijima. U praksi, većina istraživanja kombinira oba pristupa, koristeći neke objektivne kriterije uz nužne arbitrarne odluke.

```{r}
#| label: fig-boundary-problem
#| fig-cap: "Ilustracija problema granica. Crtkana linija označava arbitrarno postavljenu granicu mreže. Čvorovi izvan granice (sivi) isključeni su iz analize iako imaju veze s čvorovima unutar granice. Različite odluke o granicama produciraju različite slike mrežne strukture."
#| fig-width: 10
#| fig-height: 7

set.seed(42)

full_net <- sample_gnp(30, 0.15)

core_nodes <- 1:20
boundary_nodes <- 21:25
external_nodes <- 26:30

V(full_net)$type <- case_when(
  1:30 %in% core_nodes ~ "Unutar granice",
  1:30 %in% boundary_nodes ~ "Na granici",
  TRUE ~ "Izvan granice"
)

V(full_net)$color <- case_when(
  V(full_net)$type == "Unutar granice" ~ "#3498db",
  V(full_net)$type == "Na granici" ~ "#f39c12",
  TRUE ~ "#bdc3c7"
)

set.seed(42)
layout_coords <- layout_with_fr(full_net)

layout_coords[core_nodes, ] <- layout_coords[core_nodes, ] * 0.6
layout_coords[external_nodes, 1] <- layout_coords[external_nodes, 1] + 2

plot(full_net,
     layout = layout_coords,
     vertex.size = 15,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1.5,
     main = "Problem granica: Gdje završava mreža?")

theta <- seq(0, 2*pi, length.out = 100)
boundary_x <- cos(theta) * 1.3
boundary_y <- sin(theta) * 1.1
lines(boundary_x, boundary_y, lty = 2, lwd = 2, col = "#e74c3c")

legend("bottomleft",
       legend = c("Unutar granice", "Na granici", "Izvan granice", "Granica mreže"),
       col = c("#3498db", "#f39c12", "#bdc3c7", "#e74c3c"),
       pch = c(16, 16, 16, NA),
       lty = c(NA, NA, NA, 2),
       lwd = c(NA, NA, NA, 2),
       bty = "n")
```

U istraživanjima masovne komunikacije, problem granica poprima specifične oblike. Ako proučavamo mrežu dijeljenja vijesti na Twitteru, moramo odlučiti koje korisnike uključiti. Uključujemo li samo korisnike koji su objavili određeni hashtag? Sve koji su retweetali te objave? Pratitelje tih korisnika? Svakom odlukom definiramo drugačiju mrežu s potencijalno drugačijim strukturnim karakteristikama. Ako proučavamo mrežu citiranja među medijima, moramo odlučiti koje medije smatramo relevantnima. Uključujemo li samo mainstream medije ili i blogove? Samo domaće ili i strane izvore? Samo aktivne ili i ugašene portale?

```{r}
#| label: fig-boundary-effects
#| fig-cap: "Efekt različitih odluka o granicama na izračunate mjere centralnosti. Ista jezgra mreže analizirana s različitim granicama producira različite vrijednosti centralnosti za iste čvorove. Čvor A ima najvišu centralnost u uskoj granici, ali gubi tu poziciju kada se granica proširi."
#| fig-width: 12
#| fig-height: 5

set.seed(123)

core <- graph_from_literal(A--B--C--D--A, B--D, A--E--F, C--G)

extended <- core + vertices("H", "I", "J") + edges(c("E","H", "F","I", "G","J", "H","I"))

full <- extended + vertices("K", "L", "M") + edges(c("J","K", "K","L", "L","M", "M","K", "I","L"))

calculate_centrality <- function(g, node_name) {
  if (node_name %in% V(g)$name) {
    idx <- which(V(g)$name == node_name)
    return(degree(g)[idx])
  }
  return(NA)
}

core_nodes <- V(core)$name
centrality_data <- data.frame(
  Cvor = core_nodes,
  Uska = degree(core)[core_nodes],
  Srednja = degree(extended)[core_nodes],
  Siroka = degree(full)[core_nodes]
)

centrality_long <- centrality_data |>
  pivot_longer(cols = c(Uska, Srednja, Siroka),
               names_to = "Granica", values_to = "Centralnost")
centrality_long$Granica <- factor(centrality_long$Granica, 
                                   levels = c("Uska", "Srednja", "Siroka"))

ggplot(centrality_long, aes(x = Cvor, y = Centralnost, fill = Granica)) +
  geom_col(position = position_dodge(width = 0.8), width = 0.7) +
  scale_fill_manual(values = c("#3498db", "#2ecc71", "#e74c3c"),
                    labels = c("Uska (7 čvorova)", "Srednja (10 čvorova)", "Široka (13 čvorova)")) +
  labs(
    title = "Efekt granica na mjere centralnosti",
    subtitle = "Stupanj centralnosti istih čvorova varira ovisno o definiciji granice mreže",
    x = "Čvor",
    y = "Stupanj centralnosti",
    fill = "Definicija granice"
  ) +
  theme_minimal(base_size = 12) +
  theme(legend.position = "bottom")
```

Posljedice pogrešno postavljenih granica mogu biti ozbiljne. Preuzak obuhvat može isključiti važne aktere i veze, dajući nepotpunu sliku strukture. Preširok obuhvat može uključiti irelevantne aktere koji zamagljuju ključne obrasce. Posebno je problematično kada granice sijeku važne strukturne elemente poput mostova između zajednica jer tada možemo pogrešno zaključiti da su zajednice izolirane kada zapravo postoje veze koje smo isključili.

```{r}
#| label: tbl-boundary-strategies
#| tbl-cap: "Strategije za definiranje granica mreže s primjerima iz istraživanja masovne komunikacije."

boundary_strategies <- data.frame(
  Strategija = c(
    "Atributivna",
    "Relaciona",
    "Događajna",
    "Geografska",
    "Platformska",
    "Snježna gruda"
  ),
  Opis = c(
    "Čvorovi koji dijele određeni atribut",
    "Čvorovi povezani s početnim skupom",
    "Čvorovi uključeni u specifični događaj",
    "Čvorovi unutar geografskog područja",
    "Čvorovi na određenoj platformi",
    "Iterativno proširivanje od početnog skupa"
  ),
  Primjer = c(
    "Svi novinari s akreditacijom",
    "Svi koji su retweetali određenu objavu",
    "Svi koji su komentirali određenu vijest",
    "Svi hrvatski portali",
    "Svi korisnici Twittera (ne Facebooka)",
    "Pratitelji pratitelja početnog korisnika"
  ),
  Rizici = c(
    "Propušta neformalne aktere",
    "Ovisi o odabiru početnog skupa",
    "Ograničena generalizabilnost",
    "Propušta globalne veze",
    "Ignorira međuplatformske veze",
    "Eksponencijalni rast, arbitrarno zaustavljanje"
  )
)

kable(boundary_strategies,
      col.names = c("Strategija", "Opis", "Primjer", "Rizici")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Preporuke za suočavanje s problemom granica uključuju transparentno dokumentiranje svih odluka o granicama, provođenje analiza osjetljivosti s različitim definicijama granica, teorijsko opravdanje odabranih kriterija i oprez pri generalizaciji nalaza izvan definirane populacije. Idealno, istraživač bi trebao ispitati kako se ključni nalazi mijenjaju pod različitim razumnim definicijama granica. Ako su nalazi robusni, možemo imati više povjerenja u zaključke. Ako značajno variraju, to sugerira da su nalazi osjetljivi na arbitrarne odluke i zahtijevaju oprezniju interpretaciju.


## Nedostajući podaci

Čak i kada su granice mreže jasno definirane, rijetko imamo potpune podatke o svim čvorovima i vezama unutar tih granica. **Nedostajući podaci** (engl. *missing data*) predstavljaju sveprisutan problem u mrežnoj analizi koji može značajno iskriviti izračunate mjere i dovesti do pogrešnih zaključaka. Za razliku od tradicionalne statistike gdje nedostajući podaci utječu na pojedinačne opservacije, u mrežnoj analizi nedostajuća veza utječe na strukturu cijele mreže i mjere svih povezanih čvorova.

Nedostajući podaci mogu nastati iz više razloga. **Neodaziv** (engl. *non-response*) javlja se kada akteri odbiju sudjelovati u istraživanju ili ne odgovore na pitanja o svojim vezama. **Granice sjećanja** ograničavaju sposobnost ispitanika da se prisjete svih svojih kontakata, posebno slabih veza. **Tehnička ograničenja** platformi mogu ograničiti pristup podacima, primjerice API ograničenja koja vraćaju samo uzorak veza. **Privatne postavke** korisnika mogu sakriti određene veze ili profile. **Dinamika mreže** znači da čvorovi i veze nastaju i nestaju, pa snimka u jednom trenutku propušta neke elemente.

```{r}
#| label: fig-missing-data-types
#| fig-cap: "Tri tipa nedostajućih podataka u mrežama. Lijevo: nedostajući čvor (Actor F potpuno uklonjen). Sredina: nedostajuća veza (veza B-D postoji ali nije zabilježena). Desno: kombinacija (nedostaje čvor i neke veze). Svaki tip drugačije utječe na mrežne mjere."
#| fig-width: 12
#| fig-height: 4

complete_net <- graph_from_literal(A--B--C--D--E--A, B--D, A--C, C--F--D)

missing_node_net <- delete_vertices(complete_net, "F")

missing_edge_net <- delete_edges(complete_net, "B|D")

missing_both_net <- delete_vertices(complete_net, "F")
missing_both_net <- delete_edges(missing_both_net, "A|C")

par(mfrow = c(1, 4), mar = c(1, 1, 3, 1))

V(complete_net)$color <- "#3498db"
plot(complete_net,
     layout = layout_with_fr,
     vertex.size = 30,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 2.5,
     main = "Potpuna mreža")

V(missing_node_net)$color <- "#3498db"
plot(missing_node_net,
     layout = layout_with_fr,
     vertex.size = 30,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 2.5,
     main = "Nedostajući čvor\n(F uklonjen)")

V(missing_edge_net)$color <- "#3498db"
plot(missing_edge_net,
     layout = layout_with_fr,
     vertex.size = 30,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 2.5,
     main = "Nedostajuća veza\n(B-D uklonjena)")

V(missing_both_net)$color <- "#3498db"
plot(missing_both_net,
     layout = layout_with_fr,
     vertex.size = 30,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1.2,
     edge.color = "gray40",
     edge.width = 2.5,
     main = "Kombinacija\n(F i A-C uklonjeni)")
```

Istraživanja pokazuju da različite mrežne mjere pokazuju različitu osjetljivost na nedostajuće podatke. **Gustoća** je relativno robusna jer je prosjek preko svih mogućih veza. **Stupanj centralnosti** umjereno je osjetljiv jer nedostajući podaci izravno utječu na broj veza svakog čvora. **Međuposredovanje** izrazito je osjetljivo jer ovisi o globalnoj strukturi putanja koja se dramatično mijenja s nedostajućim vezama. **Koeficijent klasteriranja** također je visoko osjetljiv jer nedostatak jedne veze u trokutu eliminira cijeli trokut.

```{r}
#| label: fig-missing-data-effect
#| fig-cap: "Efekt nasumično nedostajućih podataka na mrežne mjere. Simulacija pokazuje kako se četiri mjere mijenjaju s porastom udjela nedostajućih veza. Međuposredovanje i klasteriranje najosjetljiviji su na nedostajuće podatke."
#| fig-width: 10
#| fig-height: 6

set.seed(42)

original_net <- sample_smallworld(dim = 1, size = 50, nei = 4, p = 0.1)

missing_proportions <- seq(0, 0.4, by = 0.05)

results <- data.frame(
  udio_nedostajucih = numeric(),
  gustoca = numeric(),
  prosj_stupanj = numeric(),
  prosj_medjuposredovanje = numeric(),
  klasteriranje = numeric()
)

original_density <- edge_density(original_net)
original_degree <- mean(degree(original_net))
original_betweenness <- mean(betweenness(original_net))
original_clustering <- transitivity(original_net, type = "global")

for (prop in missing_proportions) {
  temp_net <- original_net
  n_edges <- ecount(temp_net)
  n_remove <- floor(prop * n_edges)
  
  if (n_remove > 0) {
    remove_edges <- sample(1:n_edges, n_remove)
    temp_net <- delete_edges(temp_net, remove_edges)
  }
  
  results <- rbind(results, data.frame(
    udio_nedostajucih = prop,
    gustoca = edge_density(temp_net) / original_density,
    prosj_stupanj = mean(degree(temp_net)) / original_degree,
    prosj_medjuposredovanje = mean(betweenness(temp_net)) / original_betweenness,
    klasteriranje = transitivity(temp_net, type = "global") / original_clustering
  ))
}

results_long <- results |>
  pivot_longer(cols = -udio_nedostajucih,
               names_to = "Mjera", values_to = "Relativna_vrijednost")

results_long$Mjera <- factor(results_long$Mjera,
                              levels = c("gustoca", "prosj_stupanj", 
                                        "prosj_medjuposredovanje", "klasteriranje"),
                              labels = c("Gustoća", "Prosječni stupanj",
                                        "Prosječno međuposredovanje", "Klasteriranje"))

ggplot(results_long, aes(x = udio_nedostajucih * 100, y = Relativna_vrijednost * 100,
                          color = Mjera, shape = Mjera)) +
  geom_line(linewidth = 1.2) +
  geom_point(size = 3) +
  scale_color_manual(values = c("#3498db", "#2ecc71", "#e74c3c", "#9b59b6")) +
  geom_hline(yintercept = 100, linetype = "dashed", color = "gray50") +
  labs(
    title = "Osjetljivost mrežnih mjera na nedostajuće podatke",
    subtitle = "Relativne vrijednosti u odnosu na potpunu mrežu (100% = izvorna vrijednost)",
    x = "Udio nasumično uklonjenih veza (%)",
    y = "Relativna vrijednost mjere (%)",
    color = NULL, shape = NULL
  ) +
  theme_minimal(base_size = 12) +
  theme(legend.position = "bottom") +
  ylim(0, 120)
```

Problem je dodatno kompliciran činjenicom da nedostajući podaci rijetko nedostaju potpuno nasumično. Akteri s određenim karakteristikama mogu biti skloniji neodazivu, čvorovi na periferiji mogu biti teže dostupni, a slabe veze lakše se zaboravljaju od jakih. Ovaj **selektivni nedostatak** može sustavno iskriviti sliku mrežne strukture na načine koje je teško detektirati i korigirati.

```{r}
#| label: tbl-missing-data-sources
#| tbl-cap: "Izvori nedostajućih podataka u istraživanjima komunikacijskih mreža s implikacijama i mogućim rješenjima."

missing_sources <- data.frame(
  Izvor = c(
    "Neodaziv ispitanika",
    "Ograničenja sjećanja",
    "API ograničenja",
    "Privatne postavke",
    "Obrisani računi",
    "Dinamika mreže"
  ),
  Opis = c(
    "Akteri odbijaju sudjelovanje",
    "Ispitanici zaboravljaju veze",
    "Platforme ograničavaju pristup",
    "Korisnici skrivaju profile ili veze",
    "Računi uklonjeni prije prikupljanja",
    "Veze nastaju/nestaju između mjerenja"
  ),
  Tipicni_ucinak = c(
    "Nedostaju cijeli čvorovi",
    "Nedostaju slabe veze",
    "Nasumični uzorak veza",
    "Sustavno nedostaju određeni profili",
    "Nedostaju povijesni čvorovi",
    "Snimka ne odražava stabilnu strukturu"
  ),
  Moguce_rjesenje = c(
    "Poticaji, više kontakata, procjena iz drugih izvora",
    "Podsjetnički popisi, ograničenje na nedavne kontakte",
    "Više API poziva, kombiniranje izvora",
    "Transparentno dokumentiranje ograničenja",
    "Arhivski podaci, web arhive",
    "Longitudinalno prikupljanje, vremenske prozore"
  )
)

kable(missing_sources,
      col.names = c("Izvor", "Opis", "Tipični učinak", "Moguće rješenje")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Strategije za suočavanje s nedostajućim podacima uključuju prevenciju kroz pažljiv dizajn prikupljanja, detekciju kroz usporedbu s očekivanim distribucijama, korekciju kroz statističke tehnike imputacije i transparentnost kroz dokumentiranje opsega i mogućih učinaka nedostajućih podataka. Posebno je važno provesti analize osjetljivosti koje ispituju kako bi se nalazi promijenili pod različitim scenarijima nedostajućih podataka. Ako su nalazi robusni čak i uz pesimistične pretpostavke o nedostajućim podacima, možemo im više vjerovati.


## Etički izazovi

Mrežni podaci nose posebne etičke izazove koji nadilaze standardne etičke protokole društvenih istraživanja. Fundamentalna tenzija proizlazi iz činjenice da mrežna analiza inherentno uključuje podatke o odnosima između ljudi, što znači da pristanak jedne osobe na sudjelovanje nužno uključuje podatke o drugima koji možda nisu pristali. Dodatno, strukturna priroda mrežnih podataka čini tradicionalne tehnike anonimizacije neučinkovitima jer se identitet čvorova često može rekonstruirati iz samih strukturnih obrazaca.

**Problem relacijskog pristanka** manifestira se kada ispitanik izvijesti o svojim vezama s drugima. Ako osoba A navede da komunicira s osobom B, uključili smo osobu B u istraživanje bez njezina izričitog pristanka. U malim mrežama poput organizacija, ovo je osobito problematično jer struktura odnosa može otkriti osjetljive informacije o položaju, utjecaju ili izolaciji pojedinaca.

```{r}
#| label: fig-anonymization-problem
#| fig-cap: "Problem anonimizacije u mrežnim podacima. Čak i kada su imena uklonjena, strukturna pozicija može otkriti identitet. U organizacijskoj mreži, čvor sa stupnjem 8 koji je jedini most između dva odjela vjerojatno je prepoznatljiv kolegama unatoč uklanjanju imena."
#| fig-width: 10
#| fig-height: 7

set.seed(42)

org_net <- graph_from_literal(
  CEO -- VP1 -- M1 -- E1,
  CEO -- VP1 -- M1 -- E2,
  CEO -- VP1 -- M2 -- E3,
  CEO -- VP1 -- M2 -- E4,
  CEO -- VP2 -- M3 -- E5,
  CEO -- VP2 -- M3 -- E6,
  CEO -- VP2 -- M4 -- E7,
  CEO -- VP2 -- M4 -- E8,
  VP1 -- VP2,
  M1 -- M2, M3 -- M4,
  E1 -- E2, E3 -- E4, E5 -- E6, E7 -- E8
)

V(org_net)$degree <- degree(org_net)
V(org_net)$color <- case_when(
  V(org_net)$degree >= 5 ~ "#e74c3c",
  V(org_net)$degree >= 3 ~ "#f39c12",
  TRUE ~ "#3498db"
)

par(mfrow = c(1, 2), mar = c(1, 1, 3, 1))

plot(org_net,
     layout = layout_as_tree(org_net, root = 1),
     vertex.size = 20,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 0.7,
     edge.color = "gray50",
     edge.width = 1.5,
     main = "S imenima:\nIdentiteti vidljivi")

V(org_net)$anon_name <- paste0("Čvor ", 1:vcount(org_net))

plot(org_net,
     layout = layout_as_tree(org_net, root = 1),
     vertex.size = 20,
     vertex.frame.color = NA,
     vertex.label = V(org_net)$anon_name,
     vertex.label.color = "white",
     vertex.label.cex = 0.6,
     edge.color = "gray50",
     edge.width = 1.5,
     main = "Bez imena:\nStruktura i dalje otkriva poziciju")

legend("bottomright",
       legend = c("Visoka centralnost (5+)", "Srednja (3-4)", "Niska (1-2)"),
       fill = c("#e74c3c", "#f39c12", "#3498db"),
       bty = "n", cex = 0.8,
       title = "Stupanj centralnosti")
```

**Reidentifikacija iz strukture** predstavlja možda najozbiljniji etički izazov. Istraživanja su pokazala da se pojedinci mogu identificirati samo na temelju strukturnih karakteristika njihovih veza, čak i bez ikakvih atributa. Ako napadač poznaje približnu strukturu veza neke osobe (primjerice iz druge javno dostupne mreže), može tu osobu locirati u anonimiziranom grafu. Ovo čini standardnu praksu uklanjanja imena potpuno neadekvatnom za zaštitu privatnosti.

```{r}
#| label: fig-reidentification-risk
#| fig-cap: "Ilustracija rizika reidentifikacije. Ako napadač zna da ciljna osoba ima točno 4 kontakta specifičnog obrasca (trokut + izolirana veza), može je locirati u većoj mreži unatoč anonimizaciji. Crveni čvor jedini odgovara poznatom obrascu."
#| fig-width: 10
#| fig-height: 5

set.seed(42)

larger_net <- sample_gnp(25, 0.12)

target_neighbors <- c(5, 8, 12, 18)
for (n in target_neighbors) {
  if (!are_adjacent(larger_net, 3, n)) {
    larger_net <- add_edges(larger_net, c(3, n))
  }
}
if (!are_adjacent(larger_net, 5, 8)) {
  larger_net <- add_edges(larger_net, c(5, 8))
}
if (!are_adjacent(larger_net, 5, 12)) {
  larger_net <- add_edges(larger_net, c(5, 12))
}
if (!are_adjacent(larger_net, 8, 12)) {
  larger_net <- add_edges(larger_net, c(8, 12))
}

V(larger_net)$color <- "#3498db"
V(larger_net)$color[3] <- "#e74c3c"
V(larger_net)$color[target_neighbors] <- "#f39c12"

par(mfrow = c(1, 2), mar = c(1, 1, 3, 1))

known_pattern <- graph_from_literal(Target -- A -- B -- C -- A, Target -- D, A -- C)
V(known_pattern)$color <- c("#e74c3c", rep("#f39c12", 4))

plot(known_pattern,
     vertex.size = 35,
     vertex.frame.color = NA,
     vertex.label.color = "white",
     vertex.label.cex = 1,
     edge.color = "gray40",
     edge.width = 2.5,
     main = "Poznati obrazac veza\n(napadačevo znanje)")

set.seed(42)
plot(larger_net,
     layout = layout_with_fr,
     vertex.size = 15,
     vertex.frame.color = NA,
     vertex.label = NA,
     edge.color = adjustcolor("gray50", alpha = 0.5),
     edge.width = 1,
     main = "Anonimizirana mreža\n(crveni čvor = identificiran)")

legend("bottomleft",
       legend = c("Identificirana meta", "Poznati kontakti", "Ostali čvorovi"),
       fill = c("#e74c3c", "#f39c12", "#3498db"),
       bty = "n")
```

Etički okvir za mrežna istraživanja mora balansirati između znanstvene vrijednosti istraživanja, zaštite privatnosti sudionika i transparentnosti prema javnosti. **Informirani pristanak** trebao bi jasno komunicirati da sudjelovanje uključuje podatke o odnosima s drugima. **Minimizacija podataka** nalaže prikupljanje samo nužnih informacija za istraživačka pitanja. **Ograničenje pristupa** znači da sirovi podaci ne bi smjeli biti javno dostupni bez rigoroznih protokola zaštite. **Agregirana prezentacija** preporučuje izvještavanje na razini mreže ili zajednice umjesto pojedinačnih čvorova kada je to moguće.

```{r}
#| label: tbl-privacy-techniques
#| tbl-cap: "Tehnike zaštite privatnosti u mrežnim podacima s procjenom učinkovitosti i utjecaja na korisnost podataka."

privacy_techniques <- data.frame(
  Tehnika = c(
    "Uklanjanje identifikatora",
    "K-anonimnost",
    "Dodavanje šuma",
    "Agregacija čvorova",
    "Diferencijalna privatnost",
    "Sigurno računanje"
  ),
  Opis = c(
    "Zamjena imena pseudonimima",
    "Osiguranje da svaki čvor dijeli karakteristike s k-1 drugih",
    "Nasumično dodavanje/uklanjanje veza",
    "Grupiranje čvorova u super-čvorove",
    "Matematički garantirana zaštita od reidentifikacije",
    "Analiza bez pristupa sirovim podacima"
  ),
  Ucinkovitost = c(
    "Niska",
    "Srednja",
    "Srednja do visoka",
    "Visoka",
    "Vrlo visoka",
    "Vrlo visoka"
  ),
  Utjecaj_na_podatke = c(
    "Nikakav",
    "Gubitak strukturnih detalja",
    "Iskrivljenje mjera",
    "Gubitak individualne razine",
    "Kontrolirano iskrivljenje",
    "Ograničene analize"
  )
)

kable(privacy_techniques,
      col.names = c("Tehnika", "Opis", "Učinkovitost zaštite", "Utjecaj na korisnost")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

U kontekstu istraživanja masovne komunikacije, etički izazovi poprimaju dodatne dimenzije. Analiza mreža na društvenim platformama često uključuje javno dostupne podatke, što stvara iluziju da pristanak nije potreban. Međutim, činjenica da su podaci tehnički javni ne znači da korisnici očekuju da će biti uključeni u istraživanja ili da će njihovi komunikacijski obrasci biti analizirani. Platforme poput Twittera doživjele su kontroverze kada su istraživači objavili analize koje su omogućile identificiranje korisnika unatoč nominalnoj anonimizaciji.

```{r}
#| label: fig-ethics-framework
#| fig-cap: "Konceptualni okvir za etičko odlučivanje u mrežnim istraživanjima. Istraživač mora balansirati četiri dimenzije: znanstvenu vrijednost, privatnost sudionika, transparentnost i društvenu korist. Optimalna pozicija ovisi o specifičnom kontekstu istraživanja."
#| fig-width: 9
#| fig-height: 7

ethics_data <- data.frame(
  kategorija = c("Znanstvena\nvrijednost", "Zaštita\nprivatnosti", 
                 "Transparentnost\nistraživanja", "Društvena\nkorist"),
  vrijednost = c(0.85, 0.7, 0.8, 0.75),
  angle = seq(0, 270, by = 90)
)

ggplot(ethics_data, aes(x = kategorija, y = vrijednost, fill = kategorija)) +
  geom_col(width = 0.7, show.legend = FALSE) +
  geom_hline(yintercept = c(0.25, 0.5, 0.75, 1), linetype = "dashed", 
             color = "gray70", linewidth = 0.3) +
  scale_fill_manual(values = c("#3498db", "#e74c3c", "#2ecc71", "#9b59b6")) +
  scale_y_continuous(limits = c(0, 1), breaks = c(0, 0.25, 0.5, 0.75, 1),
                     labels = c("0", "Nisko", "Srednje", "Visoko", "Maksimalno")) +
  coord_polar(start = 0) +
  labs(
    title = "Etičko balansiranje u mrežnim istraživanjima",
    subtitle = "Hipotetski profil istraživanja s visokom znanstvenom vrijednošću\ni umjerenom zaštitom privatnosti"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    axis.text.y = element_blank(),
    axis.title = element_blank(),
    panel.grid = element_blank()
  )
```

Preporuke za etičko provođenje mrežnih istraživanja uključuju konzultiranje s etičkim povjerenstvima specijaliziranim za digitalna istraživanja, proaktivno razmatranje rizika reidentifikacije prije objave podataka, ograničavanje javnog dijeljenja sirovih mrežnih podataka, korištenje agregiranih prikaza kada individualna razina nije nužna i kontinuirano praćenje razvoja tehnika zaštite privatnosti i regulatornog okvira. Etička odgovornost ne završava objavom već uključuje i odgovornost za potencijalnu buduću zloupotrebu objavljenih podataka.

```{r}
#| label: tbl-methodology-summary
#| tbl-cap: "Sažetak ključnih metodoloških izazova u analizi društvenih mreža s preporukama za istraživače."

methodology_summary <- data.frame(
  Izazov = c(
    "Problem granica",
    "Nedostajući podaci",
    "Etički izazovi"
  ),
  Kljucno_pitanje = c(
    "Koje aktere i veze uključiti u mrežu?",
    "Kako postupati s nepotpunim podacima?",
    "Kako zaštititi privatnost uz znanstvenu vrijednost?"
  ),
  Potencijalne_posljedice = c(
    "Različite granice daju različite nalaze",
    "Iskrivljene mjere, pogrešni zaključci",
    "Šteta za sudionike, gubitak povjerenja"
  ),
  Kljucne_preporuke = c(
    "Transparentnost, teorijsko opravdanje, analize osjetljivosti",
    "Procjena opsega, robusnost nalaza, dokumentiranje ograničenja",
    "Minimizacija podataka, agregacija, napredne tehnike zaštite"
  )
)

kable(methodology_summary,
      col.names = c("Izazov", "Ključno pitanje", "Potencijalne posljedice", "Ključne preporuke")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

Metodološka rigoroznost u mrežnoj analizi zahtijeva kontinuiranu refleksiju o odlukama koje oblikuju istraživanje. Problem granica podsjeća nas da svaka mreža koju analiziramo jest konstrukcija nastala iz naših odluka o tome što uključiti. Nedostajući podaci upozoravaju nas da naši podaci nikada nisu potpuni i da moramo razumjeti kako ta nepotpunost utječe na zaključke. Etički izazovi podsjećaju nas da iza svakog čvora i svake veze stoje stvarni ljudi čiju privatnost moramo poštivati. Svjesnost o ovim izazovima i aktivno suočavanje s njima razlikuje rigorozno istraživanje od naivne primjene tehnika bez razumijevanja njihovih ograničenja.

