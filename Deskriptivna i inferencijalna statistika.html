<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="hr" xml:lang="hr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lux">

<title>Deskriptivna i inferencijalna statistika</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Deskriptivna i inferencijalna statistika_files/libs/clipboard/clipboard.min.js"></script>
<script src="Deskriptivna i inferencijalna statistika_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Deskriptivna i inferencijalna statistika_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Deskriptivna i inferencijalna statistika_files/libs/quarto-html/popper.min.js"></script>
<script src="Deskriptivna i inferencijalna statistika_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Deskriptivna i inferencijalna statistika_files/libs/quarto-html/anchor.min.js"></script>
<link href="Deskriptivna i inferencijalna statistika_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Deskriptivna i inferencijalna statistika_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Deskriptivna i inferencijalna statistika_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Deskriptivna i inferencijalna statistika_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Deskriptivna i inferencijalna statistika_files/libs/bootstrap/bootstrap-813c323200a87c37e262811031999de4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-centralna-tendencija" id="toc-sec-centralna-tendencija" class="nav-link active" data-scroll-target="#sec-centralna-tendencija"><span class="header-section-number">1</span> Mjere centralne tendencije</a>
  <ul class="collapse">
  <li><a href="#sec-aritmeticka-sredina" id="toc-sec-aritmeticka-sredina" class="nav-link" data-scroll-target="#sec-aritmeticka-sredina"><span class="header-section-number">1.1</span> Aritmetička sredina</a></li>
  <li><a href="#sec-medijan" id="toc-sec-medijan" class="nav-link" data-scroll-target="#sec-medijan"><span class="header-section-number">1.2</span> Medijan</a></li>
  <li><a href="#sec-mod" id="toc-sec-mod" class="nav-link" data-scroll-target="#sec-mod"><span class="header-section-number">1.3</span> Mod</a></li>
  <li><a href="#sec-izbor-mjere" id="toc-sec-izbor-mjere" class="nav-link" data-scroll-target="#sec-izbor-mjere"><span class="header-section-number">1.4</span> Izbor odgovarajuće mjere</a></li>
  </ul></li>
  <li><a href="#sažetak" id="toc-sažetak" class="nav-link" data-scroll-target="#sažetak">Sažetak</a></li>
  <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference">Reference</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Deskriptivna-i-inferencijalna-statistika.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Deskriptivna i inferencijalna statistika</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lux </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="sec-centralna-tendencija" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="sec-centralna-tendencija"><span class="header-section-number">1</span> Mjere centralne tendencije</h2>
<p>Zamislimo da analiziramo podatke o dnevnoj gledanosti večernjeg Dnevnika HRT-a tijekom jednog mjeseca. Urednica programa pregledava brojke i vidi vrijednosti koje variraju od dana do dana – ponekad emisiju prati 320.000 gledatelja, ponekad 280.000, a vikendom brojka pada na oko 210.000. Pred njom je lista od trideset različitih brojki, i potreban joj je način da te podatke sažme u nešto razumljivo. Želi odgovoriti na prividno jednostavno pitanje: kolika je “tipična” gledanost Dnevnika? Međutim, što točno znači “tipična” u ovom kontekstu? Trebamo li gledati najčešću vrijednost, sredinu skupa podataka, ili nešto treće? Ovaj problem predstavlja srž onoga čime se bave <strong>mjere centralne tendencije</strong> – statistički alati koji nam omogućuju da iz mnoštva brojki izvučemo jednu reprezentativnu vrijednost koja najbolje opisuje “središte” naših podataka.</p>
<p>Kada istraživač masovne komunikacije prikuplja podatke, bilo da se radi o gledanosti televizijskog programa, broju komentara na novinskom portalu ili trajanju videa na YouTube kanalu, gotovo uvijek se suočava s istim izazovom. Sirovi podaci sami po sebi rijetko govore jasnu priču. Nadalje, previše je informacija da bismo ih sve mogli držati u glavi odjednom, a njihovo jednostavno nabrajanje ne pomaže u razumijevanju onoga što nam podaci zapravo pokušavaju reći. Potreban nam je način da kondenziramo te podatke u nekoliko ključnih brojki koje će nam pružiti brz i informativan uvid u ono što promatramo. U većini situacija, prva stvar koju želimo izračunati jest upravo mjera centralne tendencije – broj koji nam govori nešto o “prosjeku” ili “sredini” naših podataka.</p>
<p>Postoje tri glavne mjere centralne tendencije koje se redovito koriste u istraživanju medija: <strong>aritmetička sredina</strong>, <strong>medijan</strong> i <strong>mod</strong>. Svaka od njih odgovara na pitanje “koja je tipična vrijednost” na malo drugačiji način, a svaka ima svoje prednosti i nedostatke ovisno o vrsti podataka s kojima radimo i o tome što pokušavamo saznati. U nastavku ćemo detaljno razmotriti svaku od ovih mjera, objasniti kako se izračunavaju, kada ih je primjereno koristiti, i što nam njihove vrijednosti zapravo govore o komunikološkim fenomenima koje istražujemo.</p>
<section id="sec-aritmeticka-sredina" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="sec-aritmeticka-sredina"><span class="header-section-number">1.1</span> Aritmetička sredina</h3>
<p>Urednica HRT-a koja pokušava razumjeti gledanost Dnevnika instinktivno zna što treba učiniti: zbrojiti sve vrijednosti i podijeliti ih s brojem dana. Ovaj postupak poznat je svima iz svakodnevnog života, no u statističkoj terminologiji govorimo o izračunu <strong>aritmetičke sredine</strong> ili <strong>prosjeka</strong>. Pretpostavimo da imamo podatke o gledanosti za prvi tjedan mjeseca: 315.000 gledatelja u ponedjeljak, 298.000 u utorak, 322.000 u srijedu, 305.000 u četvrtak, 288.000 u petak, 245.000 u subotu i 218.000 u nedjelju. Kada zbrojimo ove vrijednosti i podijelimo s brojem dana, dobivamo jednu brojku koja reprezentira “tipičnu” gledanost tog tjedna.</p>
<p>Ovaj pristup ima intuitivnog smisla jer tretira sve dane podjednako – svaki dan jednako doprinosi konačnom rezultatu. Međutim, valja odmah uočiti i potencijalnu zamku: ako u našim podacima postoji jedan iznimno atipičan dan (npr. dan kada je emitiran poseban prilog o nekom vrlo popularnom događaju), ta vrijednost će značajno utjecati na prosjek. Nadalje, aritmetička sredina koristi sve informacije koje imamo – ne zanemaruje nijednu opservaciju – što može biti velika prednost kada radimo s manjim brojem podataka, ali istovremeno znači da smo osjetljivi na <strong>outliere</strong>, odnosno ekstremne vrijednosti koje možda ne reprezentiraju uobičajenu situaciju.</p>
<p>Prije nego što prijeđemo na formalnu definiciju, potrebno je uvesti matematičku notaciju koju statističari koriste. Označimo broj opservacija (u našem slučaju broj dana) sa <span class="math inline">\(N\)</span>. U našem primjeru gledanosti, <span class="math inline">\(N = 7\)</span> jer imamo podatke za sedam dana. Pojedina opažanja označavamo s <span class="math inline">\(X_1, X_2, ..., X_N\)</span>, gdje indeks označava redni broj opservacije. Tako je <span class="math inline">\(X_1 = 315.000\)</span> (gledanost u ponedjeljak), <span class="math inline">\(X_2 = 298.000\)</span> (gledanost u utorak), i tako dalje do <span class="math inline">\(X_7 = 218.000\)</span> (gledanost u nedjelju). Općenito, <span class="math inline">\(X_i\)</span> označava <span class="math inline">\(i\)</span>-to opažanje u našem skupu podataka.</p>
<p>Koristeći ovu notaciju, možemo formalno definirati <strong>aritmetičku sredinu</strong>. Označavamo je simbolom <span class="math inline">\(\bar{X}\)</span> (čita se “iks bar”), a izračunava se prema sljedećoj formuli:</p>
<p><span id="eq-mean"><span class="math display">\[\bar{X} = \frac{1}{N}\sum_{i=1}^{N}X_i = \frac{X_1 + X_2 + ... + X_N}{N} \tag{1}\]</span></span></p>
<p>Symbol <span class="math inline">\(\sum\)</span> (velika grčka slova sigma) označava sumaciju, odnosno zbrajanje. Izraz <span class="math inline">\(\sum_{i=1}^{N}X_i\)</span> doslovno znači “zbroji sve vrijednosti <span class="math inline">\(X_i\)</span> počevši od <span class="math inline">\(i=1\)</span> pa sve do <span class="math inline">\(i=N\)</span>”. Ova formula je samo formalan način zapisivanja onoga što smo već intuitivno razumjeli: zbroji sve opažene vrijednosti i podijeli ih s ukupnim brojem opažanja.</p>
<p>Za naš primjer gledanosti HRT-a, izračun bi izgledao ovako:</p>
<p><span class="math display">\[\bar{X} = \frac{315.000 + 298.000 + 322.000 + 305.000 + 288.000 + 245.000 + 218.000}{7}\]</span></p>
<p><span class="math display">\[\bar{X} = \frac{1.991.000}{7} \approx 284.429\]</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Praktični primjer
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prosječna gledanost Dnevnika tijekom analiziranog tjedna bila je približno 284.000 gledatelja. Ova brojka omogućuje brzu usporedbu s drugim tjednima ili konkurentskim programima.</p>
</div>
</div>
<p>Posljedično tome, možemo zaključiti da je prosječna gledanost Dnevnika tijekom tog tjedna bila približno 284.000 gledatelja. Ova brojka istraživaču medija daje brzu informaciju o općoj razini uspješnosti programa, omogućujući usporedbu s drugim tjednima ili konkurentskim programima. Međutim, ona ne govori ništa o konzistentnosti gledanosti – ne znamo jesu li sve vrijednosti bile blizu prosjeka ili su neke bile iznimno visoke a druge iznimno niske. Osim toga, vidimo da razlika između vikendom (subota i nedjelja) i radnim danom značajno utječe na našu percepciju “tipične” gledanosti, što nas upozorava da ponekad trebamo biti oprezni s jednostavnim prosjekom.</p>
<p>Valja istaknuti još jednu važnu karakteristiku aritmetičke sredine: ona predstavlja svojevrsno “težište” naših podataka. Ako bismo zamislili histogram naših podataka kao čvrst objekt, aritmetička sredina bi bila točka na kojoj bismo mogli balansirati taj objekt kao na ljuljački. U tom smislu, aritmetička sredina ima dublje matematičke značenje – to je vrijednost oko koje su naši podaci “centralizirani”, odnosno vrijednost od koje su ukupna odstupanja prema dolje i ukupna odstupanja prema gore u ravnoteži.</p>
<section id="sec-mean-r" class="level4" data-number="1.1.1">
<h4 data-number="1.1.1" class="anchored" data-anchor-id="sec-mean-r"><span class="header-section-number">1.1.1</span> Izračun u R-u</h4>
<p>Izračun aritmetičke sredine u programskom jeziku R vrlo je jednostavan. Pretpostavimo da smo podatke o gledanosti HRT-a pohranili u vektor:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podaci o gledanosti Dnevnika HRT-a (u tisućama)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>gledanost_hrt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">315</span>, <span class="dv">298</span>, <span class="dv">322</span>, <span class="dv">305</span>, <span class="dv">288</span>, <span class="dv">245</span>, <span class="dv">218</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Izračun aritmetičke sredine</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>prosjek <span class="ot">&lt;-</span> <span class="fu">mean</span>(gledanost_hrt)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Prosječna gledanost:"</span>, prosjek, <span class="st">"tisuća gledatelja"</span>))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternativno, možemo izračunati ručno</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>prosjek_rucno <span class="ot">&lt;-</span> <span class="fu">sum</span>(gledanost_hrt) <span class="sc">/</span> <span class="fu">length</span>(gledanost_hrt)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Prosječna gledanost (ručni izračun):"</span>, prosjek_rucno))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="sec-medijan" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="sec-medijan"><span class="header-section-number">1.2</span> Medijan</h3>
<p>Vratimo se na našu urednicu HRT-a, ali sada zamislimo malo drugačiju situaciju. Zanima je gledanost različitih vrsta sadržaja na HRTPlayerU – streaming platformi HRT-a. Prikupila je podatke o broju pregleda za deset najpopularnijih emisija prošlog mjeseca. Većina emisija ima između 15.000 i 25.000 pregleda, ali jedna emisija – ekskluzivni intervju s vrlo popularnom javnom osobom – ima čak 180.000 pregleda. Ako bi izračunala aritmetičku sredinu, ta jedna ekstremna vrijednost bi značajno “povukla” prosjek prema gore, dajući iskrivljenu sliku o tome što je “tipično” za gledanost na platformi. U ovakvim situacijama gdje postoje ekstremne vrijednosti koje ne reprezentiraju uobičajenu situaciju, istraživači često posežu za drugom mjerom centralne tendencije: <strong>medijanom</strong>.</p>
<p>Medijan je koncept koji je možda još intuitivniji od aritmetičke sredine. Jednostavno rečeno, medijan je <strong>srednja vrijednost</strong> kada sve naše podatke poredamo od najmanjeg prema najvećem. Zamislimo da imamo podatke o dnevnom broju objava na Facebook stranici Jutarnjeg lista tijekom jednog tjedna: 12, 8, 15, 10, 9, 14, 11 objava. Da bismo pronašli medijan, najprije moramo sortirati ove brojeve u rastući niz: 8, 9, 10, 11, 12, 14, 15. Sada je očito da je srednja vrijednost 11 objava, jer se ona nalazi točno u sredini – tri vrijednosti su manje od nje, a tri su veće. Ovaj broj predstavlja medijan našeg skupa podataka.</p>
<p>Medijan ima jednu vrlo važnu karakteristiku koja ga razlikuje od aritmetičke sredine: nije osjetljiv na ekstremne vrijednosti. Nadalje, ova svojstva čini ga posebno korisnim u situacijama gdje podaci sadrže <strong>outliere</strong>. Da pojasnimo ovaj koncept, vratimo se primjeru s HRT Playerom. Recimo da deset emisija ima sljedeći broj pregleda (već sortirani): 14.000, 16.000, 18.000, 19.000, 22.000, 23.000, 24.000, 26.000, 28.000, 180.000. Aritmetička sredina ovih podataka bila bi <span class="math inline">\((370.000) / 10 = 37.000\)</span> pregleda, što stvara dojam da je “tipična” emisija daleko popularnija nego što zapravo jest. Međutim, ako izračunamo medijan, situacija je drugačija.</p>
<p>Kada imamo paran broj opservacija, medijan nije samo jedna vrijednost iz našeg skupa podataka, već <strong>prosjek dviju srednjih vrijednosti</strong>. U našem primjeru s deset emisija, srednje vrijednosti su peta i šesta emisija u sortiranom nizu: 22.000 i 23.000 pregleda. Stoga je medijan:</p>
<p><span class="math display">\[\text{Medijan} = \frac{22.000 + 23.000}{2} = 22.500\]</span></p>
<p>Ovaj rezultat od 22.500 pregleda daleko bolje odražava “tipičnu” gledanost na platformi nego što to čini aritmetička sredina od 37.000 pregleda. Razlog je jasan: medijan jednostavno “ignorira” činjenicu da postoji jedna emisija s 180.000 pregleda. On gleda samo poziciju vrijednosti u sortiranom nizu, a ne njihovu stvarnu veličinu. Posljedično tome, medijan nam govori koja je vrijednost takva da polovina naših opservacija pada ispod nje, a polovina iznad nje.</p>
<p>Formalno gledano, za skup od <span class="math inline">\(N\)</span> opservacija sortiranih u rastući niz, medijan se definira na sljedeći način:</p>
<p><span id="eq-median"><span class="math display">\[\text{Medijan} = \begin{cases}
X_{(N+1)/2} &amp; \text{ako je } N \text{ neparan broj}\\
\frac{X_{N/2} + X_{(N/2)+1}}{2} &amp; \text{ako je } N \text{ paran broj}
\end{cases} \tag{2}\]</span></span></p>
<p>gdje <span class="math inline">\(X_{(i)}\)</span> označava <span class="math inline">\(i\)</span>-tu vrijednost u sortiranom nizu. Ova formula samo formalizira ono što smo već intuitivno razumjeli: za neparan broj opservacija uzimamo vrijednost točno u sredini, a za paran broj opservacija uzimamo prosjek dviju središnjih vrijednosti.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Kada koristiti medijan?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Medijan je posebno koristan kada:</p>
<ul>
<li>Podaci sadrže ekstremne vrijednosti (outliere)</li>
<li>Distribucija podataka je asimetrična (skewed)</li>
<li>Želimo znati “tipičnu” vrijednost koja nije pod utjecajem ekstremnih slučajeva</li>
</ul>
</div>
</div>
<p>Za istraživača masovne komunikacije, izbor između aritmetičke sredine i medijana ovisi o prirodi podataka i o tome što želimo saznati. Ako nas zanima ukupna količina angažmana ili ukupni “teret” nekog fenomena, aritmetička sredina može biti prava mjera. Međutim, ako nas zanima što je “tipično” za većinu slučajeva, a posebno ako sumnjamo na prisutnost ekstremnih vrijednosti, medijan je često bolji izbor. U praksi, iskusni istraživači često izvještavaju obje mjere, jer svaka od njih otkriva drugačiji aspekt podataka.</p>
<section id="sec-median-r" class="level4" data-number="1.2.1">
<h4 data-number="1.2.1" class="anchored" data-anchor-id="sec-median-r"><span class="header-section-number">1.2.1</span> Izračun u R-u</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podaci o broju pregleda emisija na HRT Playeru (u tisućama)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>pregledi_player <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">16</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">28</span>, <span class="dv">180</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Izračun medijana</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>medijan <span class="ot">&lt;-</span> <span class="fu">median</span>(pregledi_player)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Medijan pregleda:"</span>, medijan, <span class="st">"tisuća"</span>))</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Izračun aritmetičke sredine za usporedbu</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>sredina <span class="ot">&lt;-</span> <span class="fu">mean</span>(pregledi_player)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Aritmetička sredina:"</span>, sredina, <span class="st">"tisuća"</span>))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Razlika pokazuje utjecaj outliera</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Razlika (sredina - medijan):"</span>, sredina <span class="sc">-</span> medijan, <span class="st">"tisuća"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="sec-mod" class="level3" data-number="1.3">
<h3 data-number="1.3" class="anchored" data-anchor-id="sec-mod"><span class="header-section-number">1.3</span> Mod</h3>
<p>Analizirajmo sada posve drugačiju vrstu komunikoloških podataka. Istraživač analizira duljinu video clipova na YouTube kanalu popularne hrvatske medijske kuće. Prikupio je podatke o trajanju stotinu najnovijih videa, i primjećuje nešto zanimljivo: iako postoji velika varijabilnost u trajanju videa (od 30 sekundi do 15 minuta), čini se da određene duljine prevladavaju. Veliki broj videa traje točno 2 minute, što je najvjerojatnije rezultat uređivačke politike koja preferira takvo trajanje za vijesti. U ovakvim situacijama, gdje nas zanima koja vrijednost se pojavljuje najčešće, koristimo treću mjeru centralne tendencije: <strong>mod</strong>.</p>
<p>Mod je ujedno najjednostavnija mjera centralne tendencije za definirati: to je <strong>vrijednost koja se pojavljuje najčešće</strong> u našem skupu podataka. Za razliku od aritmetičke sredine i medijana koji zahtijevaju numeričke podatke i računanje, mod možemo primijeniti na bilo koju vrstu podataka, uključujući i kategorijske podatke. Stoga, mod je posebno koristan u istraživanjima masovne komunikacije gdje često radimo s nominalnim mjerilima.</p>
<p>Razmotrimo konkretan primjer. Analitičar sadržaja istražuje dominantne teme u večernjim vijestima RTL-a tijekom mjeseca dana. Za svaku emisiju zabilježio je koja je tema dominirala taj dan. Podaci pokazuju sljedeću distribuciju: politika se pojavila kao dominantna tema 12 puta, gospodarstvo 5 puta, kriminal 8 puta, zdravstvo 3 puta, a sport 2 puta. U ovom slučaju, <strong>mod</strong> je “politika”, jer se ta kategorija pojavljuje najčešće. Valja napomenuti da ovdje ne možemo izračunati aritmetičku sredinu niti medijan – pojmovi kao što je “prosjek” između politike i gospodarstva jednostavno nemaju smisla za nominalne podatke. Međutim, mod nam daje korisnu informaciju: najčešća tema u analiziranom periodu bila je politika.</p>
<p>Mod je jednako koristan i za numeričke podatke, osobito u situacijama gdje nas zanima “najvjerojatnija” pojedinačna vrijednost. Vratimo se primjeru trajanja YouTube videa. Pretpostavimo da smo analizirali sto videa i dobili sljedeću distribuciju prema trajanju: 35 videa traje 2 minute, 20 videa traje 3 minute, 15 videa traje 1 minutu, 12 videa traje 5 minuta, 10 videa traje 4 minute, a ostalih 8 videa ima različita druga trajanja. U ovom slučaju, mod je 2 minute, jer se ta vrijednost pojavljuje u čak 35 od 100 slučajeva. Nadalje, ova informacija može biti vrlo vrijedna za razumijevanje uređivačke politike i strategije sadržaja – očito postoji jaka preferencija za videima koji traju točno 2 minute.</p>
<p>Zanimljivo je primijetiti da, za razliku od aritmetičke sredine i medijana koje uvijek imaju samo jednu vrijednost, skup podataka može imati <strong>više modova</strong>. Ako se dvije ili više vrijednosti pojavljuju jednako često i češće od svih ostalih, tada govorimo o bimodalnoj (dva moda) ili multimodalnoj (više modova) distribuciji. Takve situacije mogu biti vrlo informativne. Na primjer, ako analiza duljine članaka na nekom portalu pokazuje da postoje dva moda – jedan oko 300 riječi i drugi oko 1200 riječi – to može ukazivati na postojanje dviju različitih vrsta sadržaja: kratkih vijesti i dugačkih analitičkih članaka. Ovakav uvid mogao bi promaknuti kada bismo gledali samo aritmetičku sredinu.</p>
<p>Međutim, valja biti svjestan i ograničenja moda. Mod može biti vrlo nestabilan, osobito kada radimo s kontinuiranim podacima gdje se svaka vrijednost pojavljuje samo jednom ili nekoliko puta. Osim toga, mod nam ne govori ništa o “sredini” distribucije u širem smislu – samo nam govori koja je vrijednost najčešća. U nekim slučajevima, mod može biti prilično udaljen od onoga što bismo intuitivno smatrali “tipičnom” vrijednošću. Stoga, u praksi istraživanja medija, mod se često koristi u kombinaciji s drugim mjerama centralne tendencije kako bi se dobila potpunija slika o podacima.</p>
<section id="sec-mode-r" class="level4" data-number="1.3.1">
<h4 data-number="1.3.1" class="anchored" data-anchor-id="sec-mode-r"><span class="header-section-number">1.3.1</span> Izračun u R-u</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R nema ugrađenu funkciju za mod, ali možemo je kreirati</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>calculate_mode <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  unique_x <span class="ot">&lt;-</span> <span class="fu">unique</span>(x)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  unique_x[<span class="fu">which.max</span>(<span class="fu">tabulate</span>(<span class="fu">match</span>(x, unique_x)))]</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Primjer: Teme u vijestima RTL-a</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>teme_rtl <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"politika"</span>, <span class="st">"politika"</span>, <span class="st">"gospodarstvo"</span>, <span class="st">"kriminal"</span>, </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>              <span class="st">"politika"</span>, <span class="st">"zdravstvo"</span>, <span class="st">"kriminal"</span>, <span class="st">"politika"</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>              <span class="st">"sport"</span>, <span class="st">"kriminal"</span>, <span class="st">"politika"</span>, <span class="st">"gospodarstvo"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>mod_tema <span class="ot">&lt;-</span> <span class="fu">calculate_mode</span>(teme_rtl)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Najčešća tema:"</span>, mod_tema))</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Frekvencijska tablica</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(teme_rtl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="sec-izbor-mjere" class="level3" data-number="1.4">
<h3 data-number="1.4" class="anchored" data-anchor-id="sec-izbor-mjere"><span class="header-section-number">1.4</span> Izbor odgovarajuće mjere</h3>
<p>Istraživač masovne komunikacije koji stoji pred nizom podataka mora donijeti važnu odluku: koju mjeru centralne tendencije primijeniti? Ovaj izbor nije proizvoljan, već ovisi o tri ključna čimbenika: vrsti podataka koje imamo, distribuciji tih podataka, i istraživačkom pitanju na koje želimo odgovoriti. U nastavku ćemo sistematično razmotriti kako ovi čimbenici utječu na naš izbor.</p>
<p>Vrsta podataka predstavlja prvi i najvažniji kriterij. Ako radimo s <strong>nominalnim podacima</strong> – kategorijama bez inherentnog redoslijeda kao što su vrsta medija (televizija, radio, novine, internet) ili žanr sadržaja (vijesti, zabava, sport, kultura) – jedino smislena mjera je mod. Pojmovi kao što su “prosjek” ili “sredina” nemaju značenje kada govorimo o kategorijama koje nemaju numeričku vrijednost. Nadalje, pokušaj pripisivanja numeričkih vrijednosti nominalnim kategorijama samo radi izračunavanja srednje vrijednosti bio bi metodološki neispravan i mogao bi voditi do potpuno besmislenih zaključaka.</p>
<p>Kada imamo <strong>ordinalne podatke</strong> – kategorije koje imaju prirodni redoslijed ali ne i jednake intervale između njih – situacija je nešto kompleksnija. Primjer ordinalnih podataka u komunikološkom istraživanju bile bi ocjene na Likertovoj skali gdje ispitanici procjenjuju koliko često prate vijesti: “nikada” (1), “rijetko” (2), “ponekad” (3), “često” (4), “uvijek” (5). U ovakvim slučajevima, medijan je obično prikladnija mjera od aritmetičke sredine. Razlog je jednostavan: medijan koristi samo informaciju o redoslijedu vrijednosti, ne ovisi o točnim numeričkim vrijednostima koje smo možda proizvoljno dodijelili kategorijama. Međutim, valja priznati da u praksi istraživanja medija mnogi istraživači ipak izvještavaju aritmetičke sredine Likertovih skala, što je predmet kontinuirane metodološke debate.</p>
<p>Za <strong>intervalne i omjerne podatke</strong> – podatke s numeričkim vrijednostima i smislenim intervalima ili omjerima – imamo najveću fleksibilnost. Ovdje su obje mjere, aritmetička sredina i medijan, u principu prihvatljive, a izbor ovisi o distribuciji podataka i istraživačkom cilju. Ako je distribucija podataka relativno simetrična i bez ekstremnih outliera, aritmetička sredina je često preferirana jer koristi sve informacije u podacima i ima bolja matematička svojstva. Međutim, ako distribucija pokazuje <strong>asimetriju</strong> ili sadrži ekstremne vrijednosti, medijan može pružiti vjerodostojniju sliku o “tipičnoj” vrijednosti.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Oprez s outierima!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ekstremne vrijednosti mogu značajno iskriviti aritmetičku sredinu. Uvijek provjerite distribuciju podataka prije odabira mjere centralne tendencije.</p>
</div>
</div>
<p>Razmotrimo konkretni primjer koji ilustrira ovaj izbor. Analitičar istražuje učinkovitost društvenih mreža za promociju sadržaja portala Index.hr. Prikupio je podatke o broju klikova koje je generirala stotina Facebook objava tijekom mjeseca. Većina objava generirala je između 500 i 2000 klikova, što odražava uobičajenu razinu angažmana. Međutim, tri objave su postale viralane i generirale su 45.000, 52.000 i 68.000 klikova. Ako izračunamo aritmetičku sredinu, te tri viralane objave će značajno povećati prosjek, možda na 3500 klikova. Ova brojka stvara pogrešan dojam o tome što portal može “tipično” očekivati od Facebook promocije. S druge strane, medijan bi bio možda oko 1200 klikova, što bolje odražava uobičajeni scenarij. U ovoj situaciji, iskusni istraživač bi vjerojatno izvijestio obje vrijednosti, objašnjavajući da je medijan bolji pokazatelj “tipične” uspješnosti, dok aritmetička sredina odražava ukupni prosjek uključujući rijetke ali vrlo uspješne objave.</p>
<section id="sec-decision-tree" class="level4" data-number="1.4.1">
<h4 data-number="1.4.1" class="anchored" data-anchor-id="sec-decision-tree"><span class="header-section-number">1.4.1</span> Odlučna stablo za izbor mjere</h4>
<div id="tbl-mjere-preporuke" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mjere-preporuke-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Preporuke za izbor mjere centralne tendencije prema vrsti podataka
</figcaption>
<div aria-describedby="tbl-mjere-preporuke-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 32%">
<col style="width: 22%">
<col style="width: 17%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Vrsta podataka</th>
<th style="text-align: left;">Preporučena mjera</th>
<th style="text-align: left;">Alternativa</th>
<th style="text-align: left;">Napomena</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Nominalni</td>
<td style="text-align: left;">Mod</td>
<td style="text-align: left;">-</td>
<td style="text-align: left;">Jedina smislena opcija</td>
</tr>
<tr class="even">
<td style="text-align: left;">Ordinalni</td>
<td style="text-align: left;">Medijan</td>
<td style="text-align: left;">Mod</td>
<td style="text-align: left;">Aritmetička sredina upitna</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Intervalni/Omjerni (simetrični)</td>
<td style="text-align: left;">Aritmetička sredina</td>
<td style="text-align: left;">Medijan</td>
<td style="text-align: left;">Obje prihvatljive</td>
</tr>
<tr class="even">
<td style="text-align: left;">Intervalni/Omjerni (asimetrični)</td>
<td style="text-align: left;">Medijan</td>
<td style="text-align: left;">Aritmetička sredina</td>
<td style="text-align: left;">Oprez s outierima</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Posljedično tome, možemo zaključiti da ne postoji univerzalno “najbolja” mjera centralne tendencije. Umjesto toga, svaka mjera otkriva različite aspekte naših podataka, i izbor između njih zahtijeva promišljeno razmatranje prirode podataka i istraživačkog konteksta. U praksi kvalitetnog istraživanja masovne komunikacije, često je korisno izvijestiti više mjera centralne tendencije, jer svaka od njih pridonosi našem razumijevanju fenomena koji istražujemo. Osim toga, mjere centralne tendencije su samo dio priče – da bismo dobili potpunu sliku, potrebno je razmotriti i mjere disperzije, o čemu ćemo govoriti u sljedećoj sekciji.</p>
</section>
</section>
</section>
<section id="sažetak" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sažetak">Sažetak</h2>
<p>U ovoj sekciji razmotrili smo tri temeljne mjere centralne tendencije:</p>
<ul>
<li><strong>Aritmetička sredina</strong> (<span class="math inline">\(\bar{X}\)</span>) – prosjek svih vrijednosti, osjetljiv na outliere, koristi sve podatke</li>
<li><strong>Medijan</strong> – srednja vrijednost u sortiranom nizu, robustan na outliere, dijeli podatke na dva jednaka dijela</li>
<li><strong>Mod</strong> – najčešća vrijednost, primjenjiv na sve vrste podataka, može biti nestabilan</li>
</ul>
<p>Izbor odgovarajuće mjere ovisi o vrsti podataka, distribuciji i istraživačkom cilju. U praksi je često korisno izvijestiti više mjera kako bi se dobila potpunija slika o podacima.</p>
</section>
<section id="reference" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="reference">Reference</h2>
<div class="{#ref">

</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>